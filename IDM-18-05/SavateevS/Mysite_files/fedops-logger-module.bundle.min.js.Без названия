!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fedops-logger",[],t):"object"==typeof exports?exports["fedops-logger"]=t():e["fedops-logger"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};if(t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.p="undefined"!=typeof window&&window.__STATICS_BASE_URL__||t.p,"undefined"!=typeof document){var r=document.getElementById("fedops-logger-module.stylable.bundle.css");r||(r=document.createElement("style"),r.id="fedops-logger-module.stylable.bundle.css",document.head.appendChild(r)),r.textContent=""}return t(t.s=14)}([function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n={},r=function(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope:n};t.env=r}).call(t,n(13))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{src:72,evid:e,session_id:n,_:(new Date).getTime()}))}return i(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(0);t.default={getNavigation:function(){return void 0!==(0,i.env)()&&(0,i.env)().performance?(0,i.env)().performance.navigation:{}},getResources:function(){var e=[];try{return(0,i.env)()&&(0,i.env)().performance&&(0,i.env)().performance.getEntriesByType&&(0,i.env)().performance.getEntriesByType("resource")||e}catch(t){return e}},getTiming:function(){return(0,i.env)()&&(0,i.env)().performance?(0,i.env)().performance.timing:{}},now:function(){return(0,i.env)()&&(0,i.env)().performance&&(0,i.env)().performance.now?(0,i.env)().performance.now():"undefined"!=typeof performance&&performance&&performance.now?performance.now():(new Date).getTime()},mark:function(e){o.default.isFedopsDev()&&(0,i.env)()&&(0,i.env)().performance&&(0,i.env)().performance.mark&&(0,i.env)().performance.mark(e)},measure:function(e,t,n){o.default.isFedopsDev()&&(0,i.env)()&&(0,i.env)().performance&&(0,i.env)().performance.measure&&(0,i.env)().performance.measure(e,t,n)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;r(this,e),this.data=t}return o(e,[{key:"isActive",value:function(){return!0}},{key:"export",value:function(){return this.data}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={mapToQuery:r,generateGuid:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0;switch(e){case v.beacon:t=u;break;case v.fetch:t=a;break;case v.image:t=i;break;default:t=(0,p.isWebWorker)()||!(0,h.env)().Image?a:i}return t}function i(e,t){return c.default.fetch(e+"?"+l.default.mapToQuery(t))}function u(e,t){var n=e+"?"+l.default.mapToQuery(t);return new Promise(function(e,t){return(0,d.sendBeacon)(n)?e(n):t(n)}).catch(function(){return i(e,t)}).catch(function(){return a(e,t)})}function a(e,t){return fetch(e+"?"+l.default.mapToQuery(t),{credentials:"include",method:"GET"}).then(function(e){if(!e.ok)throw Error(e.status);return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.publisherTypes=void 0,t.getPublisherByType=o,t.imagePublisher=i,t.beaconPublisher=u,t.fetchPublisher=a;var s=n(18),c=r(s),f=n(4),l=r(f),d=n(19),p=n(6),h=n(0),v=t.publisherTypes={image:"image",beacon:"beacon",fetch:"fetch"}},function(e,t,n){"use strict";function r(e){s=e}function o(){return s}function i(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function u(e){if(void 0!==(0,a.env)()&&(0,a.env)())try{return(0,a.env)().top===(0,a.env)().self?e?e((0,a.env)()):(0,a.env)():null}catch(e){return null}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.setHost=r,t.getHost=o,t.isWebWorker=i,t.provideBrowsingContext=u;var a=n(0),s="frog.wix.com"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(21),a=r(u),s=n(22),c=r(s),f=n(8),l=r(f),d=n(12),p=r(d),h=n(2),v=r(h),y=n(23),_=r(y),b=n(0),m=function(){function e(t,n,r,i){var u=i.sessionId,s=i.errorHandlerToggle,c=i.disableAutoLoadFinish;o(this,e),this.appName=t,this.appVersion=n,this.reporter=r,this.params={sessionId:u},this.errorHandlerToggle=s,this.disableAutoLoadFinish=c,this.dataSource=new a.default({appName:t}),s&&(0,b.env)().fedopsLoggerErrorHandler.subscribeListener(t,this.reportError.bind(this))}return i(e,[{key:"reportNetworkAnalysis",value:function(){var e=this,t=v.default.getResources();setTimeout(function(){try{var n=new _.default(e.sessionId),r=n.performNetworkAnalysis(t);if(!r)return;var o=e.dataSource.clone().addItem(n).addItem(r);e._report(o)}catch(e){console.error("[fedops] Failed to report resource metrics",e)}},1e3)}},{key:"reportError",value:function(e,t,n){var r=void 0;r=this._appLoadedCalled?Object.keys(this._outgoingInteractions)[0]:"[APP LOAD]";var o=this.dataSource.clone().addItem({interactionName:r}).addItem({errorType:t}).addItem({errorInfo:n}).addItem(new p.default(this.sessionId));r&&this._report(o)}},{key:"_report",value:function(e){return this.reporter.report(e.mergeItems())}},{key:"getAppName",value:function(){return this.appName}},{key:"getAppVersion",value:function(){return this.appVersion}},{key:"getReporter",value:function(){return this.reporter}},{key:"getParam",value:function(e){return this.params[e]}},{key:"_isDisableAutoLoadFinish",value:function(){return this.disableAutoLoadFinish}},{key:"appLoadingPhase",value:function(e){var t=this.dataSource.clone().addItem({name:e}).addItem(new c.default(this.sessionId)).addItem(new l.default);return this._report(t)}},{key:"sessionId",get:function(){return this.getParam("sessionId")}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),f=n(3),l=r(f),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{duration:Math.floor(c.default.appLoadTime(e))}));return n.appName=e,n}return u(t,e),a(t,[{key:"setFirstRequestDuration",value:function(){return this.data.frd=Math.floor(c.default.firstRequestDuration(this.appName)),this}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.getStartLoadTime(e)||0}function i(){return c.default.now()}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),a=r(u),s=n(2),c=r(s);t.default={appLoadTime:function(e){return i()-o(e)},loadStarted:function(e){a.default.setStartLoadTime(e,c.default.now())},firstRequestDuration:function(e){return o(e)}}},function(e,t,n){"use strict";function r(e){return(0,o.env)().fedops.apps[e]}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default={init:function(e){(0,o.env)().fedops.apps[e]=(0,o.env)().fedops.apps[e]||{}},getStartLoadTime:function(e){var t=r(e);return t?t.startLoadTime:null},setStartLoadTime:function(e,t){return r(e).startLoadTime=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){return void 0!==(0,r.env)()&&(0,r.env)().location};t.default={getHost:function(){return o()&&(0,r.env)().location.host},isFedopsDev:function(){return((o()||{}).search||"").indexOf("fedops=dev")>-1}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EVID=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=t.EVID=17,c=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e))}return i(t,e),t}(a.default);t.default=c},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.baseUrl,r=void 0===n?null:n,o=t.appId,a=void 0===o?null:o,s=t.isWidgetLogger,c=void 0!==s&&s,f=t.errorHandlerToggle,l=void 0!==f&&f,d=t.disableAutoLoadFinish,p=void 0!==d&&d,h=t.swallowExceptions,v=void 0!==h&&h,y=t.interactionTimeout,_=void 0===y?null:y,b=t.timeoutHook,m=void 0===b?null:b,g=t.startHook,w=void 0===g?null:g,O=t.endHook,k=void 0===O?null:O,E=t.networkAnalysis,T=void 0!==E&&E,I=t.publisher,j=void 0===I?null:I,P=void 0!==(0,u.env)()?(0,u.env)().__CI_APP_VERSION__:null;return(0,u.env)().fedops=(0,u.env)().fedops||{},(0,u.env)().fedops.apps=(0,u.env)().fedops.apps||{},(new i.default).setAppName(e).setAppVersion(P).setBaseUrl(r).setAppId(a).setErrorHandlerToggle(l).setSwallowExceptions(v).setWidgetLogger(c).setInteractionTimeout(_).setTimeoutHook(m).setStartHook(w).setEndHook(k).setDisableAutoLoadFinish(p).setNetworkAnalysis(T).setPublisher(j).build()}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r;var o=n(15),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=void 0!==(0,O.env)()&&(0,O.env)().fedops&&(0,O.env)().fedops.sessionId;return e=e||l.default.getItem(g.SESSION_ID_STORAGE_KEY),e=e||c.default.generateGuid(),l.default.setItem(g.SESSION_ID_STORAGE_KEY,e),e}function u(e){k=e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.setFactory=u;var s=n(4),c=r(s),f=n(16),l=r(f),d=n(17),p=r(d),h=n(20),v=r(h),y=n(27),_=r(y),b=n(29),m=r(b),g=n(30),w=n(5),O=n(0),k=p.default,E=function(){function e(){o(this,e)}return a(e,[{key:"setAppName",value:function(e){return this.appName=e,this}},{key:"setAppVersion",value:function(e){return this.appVersion=e,this}},{key:"setErrorHandlerToggle",value:function(e){return this.errorHandlerToggle=e,this}},{key:"setSwallowExceptions",value:function(e){return this.swallowExceptions=e,this}},{key:"setAppId",value:function(e){return this.appId=e,this}},{key:"setBaseUrl",value:function(e){return this.baseUrl=e,this}},{key:"setWidgetLogger",value:function(e){return this.isWidgetLogger=e,this}},{key:"setInteractionTimeout",value:function(e){return this.interactionTimeout=e,this}},{key:"setTimeoutHook",value:function(e){return this.timeoutHook=e,this}},{key:"setStartHook",value:function(e){return this.startHook=e,this}},{key:"setEndHook",value:function(e){return this.endHook=e,this}},{key:"setDisableAutoLoadFinish",value:function(e){return this.disableAutoLoadFinish=e,this}},{key:"setNetworkAnalysis",value:function(){return this}},{key:"setPublisher",value:function(e){return this.publisher=e,this}},{key:"build",value:function(){if(!this.appName)return null;this.appVersion||(this.appVersion=g.DEFAULT_APP_VERSION);var e=this._createReporterInstance(this.baseUrl||g.BI_BASE_URL,(0,w.getPublisherByType)(this.publisher)),t=this.errorHandlerToggle,n=this.swallowExceptions,r=this.interactionTimeout,o=this.timeoutHook,u=this.startHook,a=this.endHook,s=this.disableAutoLoadFinish;t&&((0,O.env)().fedopsLoggerErrorHandler=(0,O.env)().fedopsLoggerErrorHandler||new m.default({swallowExceptions:n}));return this.isWidgetLogger?new _.default(this.appName,this.appVersion,e,{sessionId:i(),errorHandlerToggle:t,swallowExceptions:n,disableAutoLoadFinish:s}):new v.default(this.appName,this.appVersion,e,{sessionId:i(),errorHandlerToggle:t,swallowExceptions:n,disableAutoLoadFinish:s,interactionTimeout:r,timeoutHook:o,startHook:u,endHook:a})}},{key:"_createReporterInstance",value:function(e,t){try{return new k(e,t)}catch(n){return k(e,t)}}}]),e}();t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={getItem:function(e){try{return(0,r.env)().localStorage.getItem(e)}catch(e){}},setItem:function(e,t){try{return(0,r.env)().localStorage.setItem(e,t)}catch(e){}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=function(){function e(t,n){r(this,e),this.baseUrl=t,this.publisher=n,this.publisher||(this.publisher=(0,i.getPublisherByType)())}return o(e,[{key:"getBaseUrl",value:function(){return this.baseUrl}},{key:"getPublisher",value:function(){return this.publisher}},{key:"report",value:function(e){return e?this.publisher(this.baseUrl,e):null}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={fetch:function(e){return(new(0,(0,r.env)().Image)).src=e}}},function(e,t,n){"use strict";function r(e,t,n){if(e&&e[t]){var r=e[t];e[t]=function(){return n.apply(null,arguments),r.apply(e,arguments)}}}function o(e){setTimeout(function(){return(0,c.provideBrowsingContext)(function(t){return e(t.location.href)})})}function i(e){(0,c.provideBrowsingContext)(function(t){var n=t.history;return["pushState","replaceState"].forEach(function(t){r(n,t,function(t,n,r){return e(r)})})})}function u(e){(0,c.provideBrowsingContext)(function(t){return t.addEventListener("popstate",function(){return e(t.location.href)})})}function a(e){var t="";[o,i,u].forEach(function(n){return n(function(n){e(t,n),t=n})})}function s(e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.listen=a,t.sendBeacon=s;var c=n(6)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(7),c=r(s),f=n(24),l=r(f),d=n(8),p=r(d),h=n(25),v=r(h),y=n(26),_=r(y),b=n(12),m=r(b),g=n(2),w=r(g),O=n(0),k=function(e,t){if(e)return e(t)},E=function(e){function t(e,n,r,u){var a=u.sessionId,s=u.errorHandlerToggle,c=u.disableAutoLoadFinish,f=u.interactionTimeout,l=u.timeoutHook,d=u.startHook,p=u.endHook;o(this,t);var h=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,{sessionId:a,errorHandlerToggle:s,disableAutoLoadFinish:c}));return h._outgoingInteractions={},h.interactionTimeout=f,h.timeoutHook=l,h.startHook=d,h.endHook=p,h}return u(t,e),a(t,[{key:"appLoaded",value:function(){if(!this._appLoadedCalled){(0,O.env)()&&(0,O.env)().fedops&&"function"==typeof(0,O.env)().fedops.clearLoadTimeout&&(0,O.env)().fedops.clearLoadTimeout();var e=this.dataSource.clone().addItem(new l.default(this.sessionId)).addItem(new p.default(this.appName).setFirstRequestDuration());return this._appLoadedCalled=!0,w.default.mark("[fedops] app-loaded"),w.default.measure("[fedops] app-loaded","navigationStart","[fedops] app-loaded"),this.reportNetworkAnalysis(),this._report(e)}}},{key:"interactionStarted",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.interactionTimeout,o=n.startHook,i=n.timeoutHook;w.default.mark(e+" started");var u=this.dataSource.clone().addItem({name:e}).addItem(new v.default(this.sessionId));return this._outgoingInteractions[e]={timestamp:w.default.now(),timeout:r||this.interactionTimeout},this._report(u),k(o||this.startHook,{name:e}),{timeoutId:function(){if(r||t.interactionTimeout)return setTimeout(function(){var n=t.dataSource.clone().addItem({interactionName:e}).addItem({errorType:"timeout"}).addItem(new m.default(t.sessionId));t._report(n),k(i||t.timeoutHook,{name:e,timeout:r||t.interactionTimeout})},r||t.interactionTimeout)}()}}},{key:"interactionEnded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.timeoutId,r=t.endHook;w.default.mark(e+" ended"),w.default.measure(e+" duration",e+" started",e+" ended"),n&&clearTimeout(n);var o=this._outgoingInteractions[e]?Math.floor(w.default.now()-this._outgoingInteractions[e].timestamp):"";k(r||this.endHook,{name:e,duration:o,timeout:this._outgoingInteractions[e]&&this._outgoingInteractions[e].timeout});var i=this.dataSource.clone().addItem({name:e}).addItem({duration:o}).addItem(new _.default(this.sessionId));delete this._outgoingInteractions[e],this._report(i)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}(c.default);t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.items=[],n&&(void 0===n.length?[n]:n).forEach(function(e){return t.addItem(e)})}return o(e,[{key:"clone",value:function(){return new e(this.items.slice())}},{key:"addItem",value:function(e){return this.items.push(e instanceof u.default?e:new u.default(e)),this}},{key:"mergeItems",value:function(){for(var e={},t=0;t<this.items.length;t++){var n=this.items[t];if(!n.isActive()){e=null;break}var r=n.export();for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,13,e))}return i(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=x[t];return e.filter(function(e){return t===e.initiatorType&&(!n||n(e))})}function s(e){return e.reduce(function(e,t){return e+t.transferSize},0)}function c(e){if(0===e.length)return 0;var t=e.reduce(function(e,t){return S(t)>=S(e)?t:e});return S(t)}function f(e){if(0===e.length)return 0;var t={startTime:1/0,responseEnd:0};return e.forEach(function(e){t.startTime>e.startTime&&(t.startTime=e.startTime),t.responseEnd<e.responseEnd&&(t.responseEnd=e.responseEnd)}),t.responseEnd-t.startTime}function l(e){var t=e.length;if(0===t)return 0;var n=e.filter(v).length;return Math.round(n/t*100)}function d(e){if(0===e.length)return 0;var t=e.filter(function(e){return 0===e.transferSize});return Math.round(t.length/e.length*100)}function p(e){if(0===e.length)return 0;var t=!1,n=Math.round(e.filter(function(e){return t=t||"nextHopProtocol"in e,"h2"===e.nextHopProtocol}).length/e.length*100);return t?n:NaN}function h(e){return!e.name.match(/http(s)?:\/\/frog.wix.com\//)}function v(e){return y(e.name)&&0===e.transferSize&&0===e.requestStart}function y(e){var t=T.default.getHost();return t&&-1===e.indexOf(t)}function _(e){return Object.keys(e).reduce(function(t,n){var r=parseInt(e[n]);return isNaN(r)||"number"!=typeof r||(t[n]=r),t},{})}function b(e){var t=e.filter(function(e){return!v(e)});return Object.keys(P).reduce(function(n,r){var o=a(e,r),i=a(t,r),u=P[r];return n[u.count]=i.length,n[u.duration]=f(i),n[u.total]=s(i),n[u.unsupported]=l(o),n[u.http2]=p(o),u.longest&&(n[u.longest]=c(i)),u.cached&&(n[u.cached]=d(i)),n},{})}function m(e){return{url:e.name,downloadDuration:e.responseEnd-e.startTime,bytesTransferred:e.transferSize,isHTTP2:"h2"===e.nextHopProtocol}}function g(e){var t=e.reduce(function(e,t){return v(t)?e.unsupported.push(t):e.supported.push(t),e},{supported:[],unsupported:[]});return Object.keys(P).reduce(function(e,n){return e[n]={},e[n].supported=a(t.supported,n).map(function(e){return m(e)}),e[n].unsupported=a(t.unsupported,n).map(function(e){return m(e)}),e},{})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=n(1),k=r(O),E=n(11),T=r(E),I=n(2),j=r(I),P={xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr",http2:"h2Xhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs",http2:"h2Js"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss",http2:"h2Css"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages",http2:"h2Images"}},x={link:function(e){return/(.\.css$|.\.css?.)/g.test(e.name)}},S=function(e){return e.responseEnd-e.startTime},L=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,18,e))}return u(t,e),w(t,[{key:"performNetworkAnalysis",value:function(e){if(0===e.length)return null;var t=j.default.now(),n=e.filter(h),r=b(n);r.overhead=j.default.now()-t;var o=_(r);if(console.debug&&T.default.isFedopsDev()){var i=g(n);console.debug("[fedops network analysis] [bytes analysis]\n"+JSON.stringify(o,null,4)),console.debug("[fedops network analysis] [resources breakdown]\n",i)}return o}}]),t}(k.default);t.default=L},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,11,e))}return i(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.INTERACTION_START_EVID=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=t.INTERACTION_START_EVID=15,c=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e))}return i(t,e),t}(a.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.INTERACTION_END_EVID=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=t.INTERACTION_END_EVID=16,c=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,e))}return i(t,e),t}(a.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(7),c=r(s),f=n(28),l=r(f),d=n(9),p=r(d),h=n(10),v=r(h),y=function(e){function t(e,n,r,u){var a=u.sessionId,s=u.disableAutoLoadFinish;o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,{sessionId:a,disableAutoLoadFinish:s}));return v.default.init(c.appName),c}return u(t,e),a(t,[{key:"appLoadStarted",value:function(){p.default.loadStarted(this.appName);var e=this.dataSource.clone().addItem(new l.default(this.sessionId));return this._report(e)}},{key:"isDisableAutoLoadFinish",value:function(){return this._isDisableAutoLoadFinish()}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,14,e))}return i(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),u=function(){function e(t){var n=t.swallowExceptions;r(this,e),this.swallowExceptions=n,this.listeners={},this.instrumentAjax(),this.instrumentSetTimeout(),this.instrumentSetInterval(),this.instrumentAddEventListener(),this.instrumentFetch(),this.instrumentPromise(),this.instrumentGloballyUnhandledError()}return o(e,[{key:"subscribeListener",value:function(e,t){this.listeners[e]=t}},{key:"removeListener",value:function(e){delete this.listeners[e]}},{key:"instrumentAjax",value:function(){var e=this;if("XMLHttpRequest"in(0,i.env)()){var t=XMLHttpRequest.prototype;this._wrap(t,"open",function(e){return function(t,n){return this.__fedops_xhr={method:t,url:n,status_code:null},e.apply(this,arguments)}},"xhr"),this._wrap(t,"send",function(t){return function(){function n(){if(1===r.readyState||4===r.readyState){try{r.__fedops_xhr.status_code=r.status}catch(e){}e._isErrorStatusCode(r.__fedops_xhr.status_code)&&e._reportError(r.__fedops_xhr,"xhr",r.__fedops_xhr.status_code)}}var r=this;return e._wrap(this,"onload",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onerror",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),e._wrap(this,"onprogress",function(e){return function(){e&&e.apply(this,arguments)}},"xhr"),"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?e._wrap(r,"onreadystatechange",function(e){return function(){return n(),e.apply(this,arguments)}}):r.onreadystatechange=n,t.apply(this,arguments)}},"xhr")}}},{key:"instrumentSetTimeout",value:function(){var e=this;this._wrap((0,i.env)(),"setTimeout",function(t){return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.call.apply(t,[this,e._wrapCallback(n,"setTimeout")].concat(o))}})}},{key:"instrumentSetInterval",value:function(){var e=this;this._wrap((0,i.env)(),"setInterval",function(t){return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.call.apply(t,[this,e._wrapCallback(n,"setInterval")].concat(o))}})}},{key:"instrumentAddEventListener",value:function(){function e(e){var n=(0,i.env)()[e]&&(0,i.env)()[e].prototype;n&&Object.prototype.hasOwnProperty.call(n,"addEventListener")&&(t._wrap(n,"addEventListener",function(e){return function(n,r,o,i){var u=t._wrapCallback(r,"addEventListener");return r&&(r.__fedopsWrapper__=u),e.call(this,n,u,o,i)}}),t._wrap(n,"removeEventListener",function(e){return function(t,n,r,o){return n=n&&(n.__fedopsWrapper__||n),e.call(this,t,n,r,o)}}))}var t=this;["EventTarget","env()","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","Modalenv()","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(function(t){return e(t)})}},{key:"instrumentRequestAnimationFrame",value:function(){}},{key:"instrumentFetch",value:function(){var e=this;this._wrap((0,i.env)(),"fetch",function(t){return function(n,r){return t.apply(this,arguments).then(function(t){var o=t.status;if(e._isErrorStatusCode(o)){var i={url:n,method:r?r.method:"GET",status_code:o};e._reportError(i,"fetch",o)}return t})}})}},{key:"instrumentPromise",value:function(){var e=this;(0,i.env)().addEventListener("unhandledrejection",function(t){e._reportError(t,"promise")})}},{key:"instrumentGloballyUnhandledError",value:function(){var e=this;(0,i.env)().addEventListener("error",function(t){e._reportError(t,"env()OnError")})}},{key:"instrumentHistory",value:function(){}},{key:"_wrap",value:function(e,t,n,r){var o=this,i=e[t],u=n(i),a=function(){try{return u.apply(this,arguments)}catch(e){if(o._reportError(e,r),!o.swallowExceptions)throw e}};e[t]=a}},{key:"_wrapCallback",value:function(e,t){var n=this;return function(){try{return e.apply(this,arguments)}catch(e){if(n._reportError(e,t),!n.swallowExceptions)throw e}}}},{key:"_reportError",value:function(e,t,n){var r=this,o=e&&(e.error||e);if(!o.__fedopsHandledError__){Object.keys(this.listeners).forEach(function(e){r.listeners[e](o,t,n)}),o.__fedopsHandledError__=!0}}},{key:"_isErrorStatusCode",value:function(e){return e>=400||0===e}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BI_BASE_URL="https://frog.wix.com/fed",t.SESSION_ID_STORAGE_KEY="fedops.logger.sessionId",t.DEFAULT_APP_VERSION="0.0.0"}])});
//# sourceMappingURL=fedops-logger-module.bundle.min.js.map