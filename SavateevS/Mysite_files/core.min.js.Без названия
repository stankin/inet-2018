define("core",["lodash","utils","santaProps","coreUtils","prop-types","santa-components","skins","experiment","zepto","reactDOM","compUtils","warmupUtils","create-react-class","react","mobx","layout","mobx-react","platformInit","pmrpc","santa-renderer","thirdPartyAnalytics","dataFixer","wix-ui-santa/viewerComponentService.bundle","santa-site-auth-module"],function(e,t,i,n,s,a,r,o,c,u,p,l,d,g,h,f,m,v,y,S,A,P,I,D){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=821)}({0:function(t,i){t.exports=e},1:function(e,i){e.exports=t},108:function(e,t,i){var n,s;n=[i(388),i(0),i(4)],void 0===(s=function(e,t,i){"use strict";return i.loggingUtils.logger.register("core","event",e),e}.apply(t,n))||(e.exports=s)},11:function(e,t){e.exports=c},12:function(e,t){e.exports=u},13:function(e,t){e.exports=p},138:function(e,t){e.exports=A},139:function(e,t,i){var n,s;n=[i(830),i(0),i(4)],void 0===(s=function(e,t,i){"use strict";var n=i.loggingUtils.logger;return t.forEach(e,function(e,t){e.errorName=t}),n.register("core","error",e),e}.apply(t,n))||(e.exports=s)},14:function(e,t){e.exports=l},177:function(e,t,i){var n,s;n=[i(0),i(4),i(257),i(25),i(389)],void 0===(s=function(e,t,i,n,s){"use strict";var a={Image:"wysiwyg.components.imageZoom",PermaLink:"wixapps.integration.components.AppPartZoom"},r=new t.SiteDataPrivates;function o(){this._comps={}}function c(e,i){if(e.selectiveCompDownload){(function(e){var t=r.get(e);return t||(t=new o,r.set(e,t)),t})(e).remember(i);var n=e.currentUrl.query.listComponents;if("all"===n&&t.log.info("Using component",i),!s.isComponentLoaded(i)&&s.exists(i,e))return"requested"!==n&&"true"!==n||t.log.info("Requesing component",i),{customDownload:function(){var t=this;s.loadAndRegister(i,e).then(function(){t.done()})}}}}return o.prototype={remember:function(e){this._comps[e]=!0},getAndClear:function(){var t=e.keys(this._comps);return this._comps={},t}},{get:c,forDataItem:function(e,t){var i=a[t];if(i)return c(e,i)},allButNativeComponents:t.allButNativeComponents,callNativePackageCallback:function(s,a){var r=t.getAllPackagesForAllComponents(),o=t.nativeComponents(a);e.forEach(o,function(e){var t=e.type;return r[t](s[t],i.register,n.registerHostLibsAspect)})},requested:function(e){var t=r.get(e);return t?t.getAndClear():[]},all:t.allPackages,callAllRequiredPackagesCallbacks:function(s){var a=t.getAllPackagesForAllComponents(),r=e.keys(a);e.forEach(r,function(e){return a[e](s[e],i.register,n.registerHostLibsAspect,s.skins.skinsMap.addBatch)})}}}.apply(t,n))||(e.exports=s)},178:function(e,t){e.exports=P},179:function(e,t,i){var n,s;n=[i(4)],void 0===(s=function(e){"use strict";var t=function(e,t){this._activityInfo=e,this._fields=t};return t.prototype={getParams:function(){return{hs:this._activityInfo.hubSecurityToken,"activity-id":e.guidUtils.getUniqueId(),"metasite-id":this._activityInfo.metaSiteId,svSession:this._activityInfo.svSession,version:"1.0.0"}},getPayload:function(){return{activityDetails:{additionalInfoUrl:null,summary:""},activityInfo:"activityInfo",activityLocationUrl:function(e){return e.currentUrl.full}(this._activityInfo),activityType:"activityType",contactUpdate:{},createdAt:(new Date).toISOString()}}},t}.apply(t,n))||(e.exports=s)},18:function(e,t){e.exports=d},180:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i={},n={};t.sessionFreezer.freeze(i),t.sessionFreezer.freeze(n);var s={handle:e.noop};return{getHandler:function(n){return e.has(i,n)?i[n]:(t.log.warn("there is no behavior handler for type "+n),s)},registerHandler:function(e,t){i[e]=t},registerBehaviorPreprocessor:function(e,t){n[e]=t},getBehaviorPreprocessor:function(t){return n[t]||e.identity}}}.apply(t,n))||(e.exports=s)},181:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.triggerTypesConsts;function n(t){this._aspectSiteAPI=t,this._siteData=t.getSiteData(),this.animations=this._siteData.animations,this._isEnabled=!1,this._triggeredOnce={},e.bindAll(this,e({}).assignIn(this).pickBy(e.isFunction).keys().value())}return n.prototype=e.create(Object.prototype,{constructor:n,ACTION_TRIGGERS:[],ACTION_NAME:"BASE_ACTION",ACTIONS_SUPPORTED:["BASE_ACTION"],shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled||(this._triggeredOnce={},this._currentActions={},this._delayActionByTransitionDuration=0,this._executeOnNextTick=[],this.resetActionState(),this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._executeOnNextTick=[],this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this._isEnabled=!1,this._delayActionByTransitionDuration=0,this.resetActionState())},isEnabled:function(){return this._isEnabled},triggerActions:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");return e.forEach(t,function(e){this._triggeredOnce[e]=!0}.bind(this)),i=e.defaults(i||{},{action:this.ACTION_NAME}),n.handleActions(e(this._currentActions).pick(t).values().value(),i)},registerPageTransitionDuration:function(e){this._delayActionByTransitionDuration=e},handleBehaviorsUpdate:e.noop,executeAction:e.noop,_executeActionOnTick:function(){if(!e.isEmpty(this._executeOnNextTick)){var t=this._executeOnNextTick;this._executeOnNextTick=[],e.forEach(t,function(e){e()})}},executeOnNextTick:function(t){this._executeOnNextTick=e(this._executeActionOnTick).concat([t]).uniq().value()},handleTrigger:function(t){var n=e.toArray(arguments);switch(t){case i.ACTIONS_ADDED_LAYOUTED:n[1]=e.pickBy(n[1],function(t){return e.includes(this.ACTIONS_SUPPORTED,t.name)}.bind(this)),e.assign(this._currentActions,n[1]);break;case i.ACTIONS_REMOVED:n[1]=e.pickBy(n[1],function(t){return e.includes(this.ACTIONS_SUPPORTED,t.name)}.bind(this)),this._currentActions=e.omit(this._currentActions,e.keys(n[1]))}this._isEnabled&&this.handleActionTrigger.apply(this,n)},handleActionTrigger:function(){throw new Error("Need to implement handleTrigger in specific actions")},resetActionState:function(){throw new Error("Need to implement resetActionState in specific actions")}}),n}.apply(t,n))||(e.exports=s)},19:function(e,t){e.exports=g},25:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i={},n={};return t.sessionFreezer.freeze(i),t.sessionFreezer.freeze(n),{registerSiteAspect:function(e,t){i[e]=t},registerHostLibsAspect:function(e,t){n[e]=t},getAllAspectConstructors:function(){return i},getHostLibsAspectConstructor:function(e){return n[e]},getSiteAspectConstructor:function(e){return i[e]}}}.apply(t,n))||(e.exports=s)},256:function(e,t,i){var n,s;n=[i(0),i(11),i(1),i(4),i(3),i(138),i(139),i(25),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o,c){"use strict";var u=i.logger,p=n.stubPageUtil.COMPONENTS_TO_KEEP_IN_STUB,l=new WeakMap;function d(t,i){!t&&arguments.length&&"undefined"!=typeof window&&(i=i||"unknown",window.wixBiSession&&window.wixBiSession.sendError(r.NULL_SITE_ERROR,i)),this._site=t,e.bindAll(this,e.functionsIn(this));var n=s.fetchers.get(this);l.set(this,{fetchers:n});var a=this.getActionQueue();a&&(a.registerPreFlushOperation(this.setQueueFlushStart),a.registerPostFlushOperation(this.setQueueFlushEnd))}function g(e,t,i){var n=this.getPointers().platform.getControllerStageDataPointer(e,t,i);return this.getDisplayedDAL().get(n)}function h(t){var n=this.getRootIdsWhichShouldBeRendered(),s=this.getSiteDataAPI(),a=function(e){return e?i.constants.VIEW_MODES.MOBILE:i.constants.VIEW_MODES.DESKTOP}(t),r=this.getSiteData().anchorsMap;e.forEach(n,function(i){e.has(r,[i,a])||s.anchors.createPageAnchors(i,{forceMobileStructure:t})})}function f(e){return["siteApi",e,"globalData"]}function m(t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=this.getSiteData(),a=s.getCurrentUrlPageId(),r=n.data.getDataItem(a,s.MASTER_PAGE_ID),o=e.pick(i.get(r),e.keys(t));e.isEqual(o,t)||i.merge(r,t)}return d.prototype={setSite:function(e){this._site=e},reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(e){this._site.registerReLayoutPending(e)},cancelReLayoutPending:function(e){this._site.cancelReLayoutPending(e)},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(t){return this._site&&(e.get(this._site.siteAspects,t)||e.get(this._site.props.aspects,t))},getSiteData:function(){return this._site.props.siteData},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(e,t){var i=this.getSiteData();i&&i.wixBiSession&&void 0===i.wixBiSession[e]&&(i.wixBiSession[e]=t)},addPrefetchPages:function(t){var i=this.getDisplayedDAL(),n=i.getByPath(["prefetchPages"]);i.setByPath(["prefetchPages"],e.union(n,t))},markVisitedPage:function(t){var i=this.getDisplayedDAL(),n=i.getByPath(["visitedPages"]);i.setByPath(["visitedPages"],e.union(n,[t]))},setNoEnforceAnchors:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getNoEnforceAnchorsPointer();t.set(i,e)},getNoEnforceAnchors:function(){var e=this.getDisplayedDAL(),t=this.getPointers().general.getNoEnforceAnchorsPointer();return e.get(t)},requestEnforceAnchors:function(){this.getSiteData().enforceAndPatchRequested=!0},setBiMarker:function(t){this.setBiParam(t,e.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){var e=this._site.props.siteData;return!(!e.getExistingRootNavigationInfo(e.getFocusedRootId()).pageItemId&&!e.getNonPageItemZoomData())},openPopup:function(e,t,i){window.open(e,t,i)},href:function(e){window.location.href=e},navigateToRenderedLink:function(t){return!function(e){var t=i.linkRenderer.isExternalLink(this.getSiteData(),e.href),n="mail"===e["data-type"],s="_self"===e.target;return!this.getRenderFlag("isExternalNavigationAllowed")&&(t&&s||n)}.call(this,t)&&(function(t){var s=i.linkRenderer.isExternalLink(this.getSiteData(),t.href);switch(t["data-type"]=s?"external":t["data-type"],t.target=t.target||"_self",t["data-type"]){case"external":window.open(t.href,t.target);break;case"mail":case"phone":window.open(t.href,"_self");break;case"document":t.docId=t.href;var a=n.linkUtils.getDocumentLink(t,this.getSiteData());window.open(a,"_blank");break;default:var r=t["data-no-physical-url"]?t["data-no-physical-url"]:t.href,o=i.wixUrlParser.parseUrl(this.getSiteData(),r);o&&(e.assign(o,{pageItemAdditionalData:t["data-page-item-context"],anchorData:t["data-anchor"]}),this.handleNavigation(o,t,!0))}}.call(this,t),!0)},isPageLandingPage:function(e){return this.getSiteData().isPageLandingPage(e)},getMasterPageLayoutSettings:function(){return this.getSiteData().getMasterPageLayoutSettings()},isPageAllowedAndLoaded:function(e){return this.isPageAllowed(e)&&n.siteDataUtils.isPageLoaded(this.getSiteData(),e.pageId)},isPageAllowed:function(e){return this.getSiteAspect("siteMembers").isPageAllowed(e)},scrollToAnchor:function(e,t){var n=i.scrollAnchors.calcAnchorScrollToPosition(e,this);return this._site.scrollToAnchor(n,t)},scrollToComponent:function(t,i){var n=this.getSiteData(),s=n.measureMap||{},a=function(t,i){var n=t.getAllRenderedRootIds();return e.includes(n,i)?i:e.find(n,function(e){return function(e,t,i){var n=e.getPointers(),s=n.components.getPage(i,e.getSiteData().getViewMode()),a=n.components.getComponent(t,s);return e.getDisplayedDAL().isExist(a)&&n.components.getPageOfComponent(a).id===i}(t,i,e)})}(this,t);if(a)if(function(t,i){return e.get(t,["shownInFixed",i],!1)}(s,t))i&&e.forEach(i,function(t){e.isFunction(t)&&t()});else{var r=e.get(s,["absoluteTop",t])||e.get(s,["top",t]),o=n.isPopupPage(a)?n.getPopupsContainer():this._site.props.getSiteContainer();this._site.scrollTo({y:r},i,o)}},getRenderRealtimeConfigItem:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderRealtimeConfigItem(e);return t.get(i)},getAllRenderedRootIds:function(){return this._site.getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return this._site.getRootIdsWhichShouldBeRendered()},navigateToPage:function(e,t,i){this._site.tryToNavigate(e,t,!1,i)},updateUrlIfNeeded:function(e){this._site.updateUrlIfNeeded(e)},handleNavigation:function(e,t,i){this._site.handleNavigation(e,t,i)},getDynamicPageRealPageAndReloadLoadApps:function(e){var t=this.getSiteData();this._site.props.getDynamicPageRealPage(t,e,function(){this.getSiteAspect("WidgetAspect").restartApps()}.bind(this))},updatePageNavInfo:function(e,t,i){var n=this.getSiteData();if(e.pageId!==n.getPrimaryPageId()&&e.pageId!==n.getCurrentPopupId())throw new Error("you need to navigate to page if it's a different page");this._site.tryToNavigate(e,t,!0,i)},forceUpdate:function(e){this._site.forceUpdate(e)},getComponentsByPageId:function(e){return this._site.getComponentsByPageId(e)},getComponentsOnFocusedPage:function(){return this._site.getComponentsByPageId(this.getSiteData().getFocusedRootId())},getPageUrl:function(t){var i=e.get(this.getSiteData().getRootNavigationInfo(),"routerDefinition.routerId");return this.getPageUrlFor(this.getSiteData().getCurrentUrlPageId(),t,i,"CURRENT_INNER_ROUTE")},getPageData:function(){return this.getSiteData().getDataByQuery(this.getSiteData().getCurrentUrlPageId())},setPageTitle:function(e,t,i){m.call(this,{title:e,descriptionSEO:t,pageTitleSEO:i})},setRunTimePageTitle:function(e,t,i){this.setPageTitle(e,t,i),this._site.updateSiteHeadTag(),this._site.notifyAspects(this._site.supportedEvents.siteMetadataChange,{title:this.getSiteData().getCurrentUrlPageTitle(),description:t})},setRunTimeLinkTags:function(e){m.call(this,e),this._site.updateSiteHeadTag()},removePageSEORuntimeData:function(t){(function(t){if(!e.isEmpty(t)){var i=this.getDisplayedDAL(),n=this.getPointers(),s=this.getSiteData(),a=s.getCurrentUrlPageId(),r=n.data.getDataItem(a,s.MASTER_PAGE_ID),o=i.get(r),c=i.get(r);e.forEach(t,function(t){return e.unset(c,t)}),e.isEqual(o,c)||i.set(r,c)}}).call(this,t),this._site.updateSiteHeadTag()},setPageMetaKeywords:function(e){m.call(this,{metaKeywordsSEO:e})},setPageMetaOgTags:function(e){var t=this.getSiteData();t.setPageOgTags(t.getCurrentUrlPageId(),e)},setPageJsonld:function(e){var t=this.getSiteData();t.setJsonLd(t.getCurrentUrlPageId(),e)},setPageJsonldImmediate:function(e){var t=this.getSiteData();t.setJsonLd(t.getCurrentUrlPageId(),e),this._site.updateSiteHeadTag(["ld+json"])},setPageLinkTag:function(e){var t=this.getSiteData();t.setPageLinkTag(t.getCurrentUrlPageId(),e)},setPageTwitterMetaTags:function(e){var t=this.getSiteData();t.setPageTwitterTags(t.getCurrentUrlPageId(),e)},getPageUrlFor:function(e,t,n,s){var a=this.getSiteData().getDataByQuery(e);if(!a)return"";var r={pageId:e,title:a.pageUriSEO};return n&&(r.routerId=n,r.innerRoute=s),i.wixUrlParser.getUrl(this.getSiteData(),r,t)},initFacebookRemarketing:function(e){e?a.initFacebookRemarketingPixelId(this.getSiteData(),e):a.initFacebookRemarketingUserPixel(this.getSiteData())},fireFacebookRemarketingPixel:function(e,t){a.fireFacebookRemarketingPixel(this.getSiteData(),e,t)},initGoogleRemarketing:function(){a.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){a.fireGoogleRemarketingPixel()},reportGoogleAnalytics:function(){a.reportGoogleAnalytics.apply(a,[this.getSiteData()].concat(Array.prototype.slice.call(arguments)))},reportGoogleTagManager:function(e){a.reportGoogleTagManager(this.getSiteData(),e)},reportBiAnalytics:function(e){a.reportBiAnalytics(this.getSiteData(),e)},fireFacebookCustomEvent:function(e,t,i){a.fireFacebookCustomEvent(this.getSiteData(),e,t,i)},initYandexMetrika:function(){a.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(e){a.reportYandexPageHit(e)},reportBI:function(e,t){u.reportBI(this._site.props.siteData,e,t)},getBiVisitorId:function(){return e.get(this.getSiteData(),"wixBiSession.visitorId")},setBiVisitorId:function(t){e.set(this.getSiteData(),["wixBiSession","visitorId"],t)},reportCurrentPageEvent:function(t,i){var n=this._site.props.siteData;t||(t=e.isString(n.currentUrl)?n.currentUrl:n.currentUrl.full),i||(i=n.getCurrentUrlPageId());var s=n.getExternalBaseUrl().replace(/\/$/,""),a=t.replace(s,"");this.reportPageEvent(a,i)},reportPageEvent:function(e,t){var n=this._site.props.siteData;a.reportPageEvent(n,e),i.integrations.promoteAnalytics.reportPageView(this,{pagePath:e,pageTitle:n.getPageTitle(t)})},reportBeatEvent:function(e,t){u.reportBeatEvent(this._site.props.siteData,e,t)},reportBeatStart:function(e){this.getSiteData().biData.switchPage(e),this.reportBeatEvent("start",e)},reportBeatFinish:function(e){this.reportBeatEvent("finish",e);var t=this.getSiteData();i.integrations.promoteAnalytics.trackEvent(this,"WAPageView",{page_number:t.biData.getPageNumber(),page_id:e})},reportPageBI:function(){u.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},setUserSession:function(e){if(e!==this.getUserSession()){var t=this.getSiteData();t.pubSvSession(e),i.cookieUtils.deleteCookie("svSession",t.currentUrl.hostname,t.getMainPagePath()),i.cookieUtils.setCookie("svSession",e,null,t.currentUrl.hostname,t.getMainPagePath()),this._site.notifyAspects(this._site.supportedEvents.svSessionChange,e)}},triggerFakeModeChange:function(e,t){this._site.notifyAspects(this._site.supportedEvents.fakeModeChange,e,t)},isSiteBusy:function(){return this._site.isBusy},isSiteBusyIncludingTransition:function(){return this.isSiteBusy()||this._site.isDuringTransition},startingPageTransition:function(t){var i=this.getSiteData().getRootNavigationInfo(),n=!e.isEqual(i.routerDefinition,t.routerDefinition)||i.innerRoute!==t.innerRoute;(t.pageId&&this.getSiteData().getFocusedRootId()!==t.pageId||n)&&(this._site.isDuringTransition=!0)},endingPageTransition:function(){this._site.isDuringTransition=!1},setSiteScrollingEnabled:function(e){e?t("html").removeClass("disableSiteScroll"):t("html").addClass("disableSiteScroll")},enterFullScreenMode:function(e){var i=this.getSiteData(),n=void 0;if(i.isInSSR()){var s=i.ssr.bodyClasses=i.ssr.bodyClasses||[];n=s.push.bind(s)}else{var a=t("body");n=a.addClass.bind(a)}n("fullScreenMode"),e&&!e.scrollable||n("fullScreenMode-scrollable")},exitFullScreenMode:function(){"undefined"!=typeof window?(t("body").removeClass("fullScreenMode"),t("body").removeClass("fullScreenMode-scrollable")):i.log.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!")},enterMediaZoomMode:function(){var e=this.getSiteData(),i=void 0;if(e.isInSSR()){var n=e.ssr.htmlClasses=e.ssr.htmlClasses||[];i=n.push.bind(n)}else{var s=t("html");i=s.addClass.bind(s)}i("media-zoom-mode")},exitMediaZoomMode:function(){"undefined"!=typeof window?t("html").removeClass("media-zoom-mode"):i.log.warn("SiteAPI.exitMediaZoomMode should only be called from client specific code!")},forceBackground:function(e){window.document.body.style.background=e},disableForcedBackground:function(){window.document.body.style.background=""},passClickEvent:function(e){this._site.clickHandler(e)},getRuntimeDal:function(){return this.getSiteDataAPI().runtime},hasPendingFonts:function(){return this.getSiteAspect("fontsLoaderAspect").hasPendingFonts()},getCurrentPopupId:function(){return this.getSiteData().getCurrentPopupId()},openPopupPage:function(e){this.getActionQueue().runImmediately(function(){this.navigateToPage({pageId:e},!0)}.bind(this))},closePopupPage:function(){this.getActionQueue().runImmediately(function(){this.navigateToPage(this.getSiteData().getRootNavigationInfo(),!0)}.bind(this))},isPopupOpened:function(){return this.getSiteData().isPopupOpened()},getSiteDataAPI:function(){return e.get(this,"_site.props.viewerPrivateServices.siteDataAPI")},getPointers:function(){return this._site.props.viewerPrivateServices.pointers},getDisplayedDAL:function(){return this._site.props.viewerPrivateServices.displayedDAL},getActiveModes:function(){return this.getSiteDataAPI().modes.getActiveModes()},updateActiveSOSPModes:function(e){return this.getSiteDataAPI().updateActiveSOSPModes(e)},getPrevRenderActiveModes:function(){return this._site.prevActiveModes},activateModeById:function(e,t,i){var n=this.getPointers(),s=n.components.getPage(t,this.getSiteData().getViewMode()),a=n.components.getComponent(e,s);this.activateMode(a,i)},activateMode:function(t,i){var n=this.getPointers(),s=n.components.getPageOfComponent(t);(function(t,i,n){for(;i;){if(e.get(n,[i.id,"isCurrentlyAnimating"]))return!0;i=t.components.getParent(i)}return!1})(n,t,this._site.getComponentsByPageId(s.id))||this.getSiteDataAPI().modes.activateMode(t,i)},deactivateModeById:function(e,t,i){this.getSiteDataAPI().modes.deactivateModeById(e,t,i)},deactivateMode:function(e,t){this.getSiteDataAPI().modes.deactivateMode(e,t)},resetRuntimeOverrides:function(e,t){this.getSiteDataAPI().resetRuntimeOverrides(e,t)},switchModesByIds:function(e,t,i,n){this.getSiteDataAPI().modes.switchModesByIds(e,t,i,n)},resetAllActiveModes:function(){this.getSiteDataAPI().modes.resetAllActiveModes()},setMobileView:function(e){var t=this.getSiteData();if(t.isMobileView()!==e){h.call(this,e),t.setMobileView(e),e||t.updateScreenSize();var i=t.getRootNavigationInfo();i.routerDefinition?this.getDynamicPageRealPageAndReloadLoadApps(i):this.getSiteAspect("WidgetAspect").restartApps()}},showSelectionSharer:function(e,t){this._site.refs.selectionSharer.show(e,t)},hideSelectionSharer:function(){this._site.refs.selectionSharer.isVisible()&&this._site.refs.selectionSharer.hide()},isSelectionSharerVisible:function(){return e.get(this._site,"refs.selectionSharer")&&this._site.refs.selectionSharer.isVisible()},getWixCodeAppApi:function(){return this._site.props.wixCodeAppApi},getControllerStageData:function(t,i,n){var s=g.call(this,t,i,n);if("default"===n)return s;var a=g.call(this,t,i,"default");return e.defaults({},s,a)},getControllerState:function(e){var t=this.getPointers().platform.getControllerStatePointer(e);return this.getDisplayedDAL().get(t)||"default"},getAppManifest:function(e){var t=this.getPointers().platform.getAppManifestPointer(e);return this.getDisplayedDAL().get(t)},getComponentByPageAndCompId:function(e,t){return this._site.getComponentByPageAndCompId(e,t)},getAspectGlobalData:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);return t.get(i)},getAspectComponentData:function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=t?n.siteAspects.getAspectComponentData(e,t):n.siteAspects.getAspectAllComponentsData(e);return i.get(s)},getRenderFlag:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getRenderFlag(e);return t.get(i)},isLoggedInToWix:function(){var e=this.getDisplayedDAL().getByPath(["requestModel","cookie"]);return i.wixUserApi.isSessionValid(e)},logoutFromWix:function(){var e=this.getSiteData();i.wixUserApi.logout(e),this.forceUpdate()},registerClientSpecMapUpdateCallback:function(t){if(e.isFunction(t)){var i=this.getDisplayedDAL(),n=f("ClientSpecMapUpdateCallbacks");if(i.isPathExist(n)){var s=i.getByPath(n);i.pushByPath(n,t,s.length)}else i.setByPath(n,[t])}},getSiteRootPosition:function(){return this._site.props.siteRootPosition},setClientSpecMap:function(e){var t=this.getDisplayedDAL(),i=this.getPointers().general.getClientSpecMap();t.set(i,e),this.triggerClientSpecMapUpdatedCallbacks(e)},triggerClientSpecMapUpdatedCallbacks:function(t){var i=this.getDisplayedDAL();this._site.props.eventsManager&&this._site.props.eventsManager.emit("clientSpecMapUpdated",t);var n=f("ClientSpecMapUpdateCallbacks");if(i.isPathExist(n)){var s=i.getByPath(n);s&&e.isArray(s)&&e.forEach(s,function(e){e(t)})}},getActionQueue:function(){var e=this.getSiteDataAPI();return e&&e.getActionQueue()},setQueueFlushStart:function(){this.getSiteData().relayoutBlockedByQueue=!0},setQueueFlushEnd:function(){this.getSiteData().relayoutBlockedByQueue=!1},setComponentRenderStart:function(e){this.getSiteData().renderingCompsMap.set(e,!1)},setComponentRenderEnd:function(e){this.getSiteData().renderingCompsMap.set(e,!0)},setPopoversLayer:function(e){this.getSiteData().popoversLayer=e},getPopoversLayer:function(){return this.getSiteData().popoversLayer},getSantaFetcher:function(t){var i=l.get(this).fetchers;return e.get(i,t.id)},registerCompBehaviours:function(e,t,i){var n=this.getDisplayedDAL(),s=this.getPointers(),a=s.compBehaviours.getCompBehavioursMapPointer(),r=s.getInnerPointer(a,[e]),o=s.compBehaviours.getCompBehaviourPointer(e,t);n.isExist(r)||n.set(r,{}),n.set(o,i);var c=this.getSiteAspect("actionsAspect"),u=this.getSiteAspect("behaviorsAspect");c.registerBehaviors(t,e,i),u.setBehaviorsForActions(u.convertBehaviors(i,t),e,t)},unregisterCompBehaviours:function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers().compBehaviours.getCompBehaviourPointer(e,t);i.isExist(n)&&i.remove(n);var s=this.getSiteAspect("actionsAspect"),a=this.getSiteAspect("behaviorsAspect");s.registerBehaviors(t,e,[]),a.setBehaviorsForActions([],e,t)},getCompBehaviours:function(){var e=this.getDisplayedDAL(),t=this.getPointers().compBehaviours.getCompBehavioursMapPointer();return e.get(t)},isDuringPostUpdatesOperations:function(e){return!!this.getSiteData().postUpdateOperationsRenders[e]},removePostUpdateOperationsRender:function(e){delete this.getSiteData().postUpdateOperationsRenders[e]},getLayoutMechanism:function(){return n.layoutUtils.getLayoutMechanism(this.getSiteData())},didReact:function(){return this.getSiteData().reacted},resetSiteReacted:function(){this.getSiteData().reacted=!1},isExperimentOpen:function(e){return c.isOpen(e,this.getSiteData())},resetCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!1},getCustomClickOccurred:function(){return this.getSiteData().customClickOccurred},setCustomClickOccurred:function(){this.getSiteData().customClickOccurred=!0},getTPAComponentsOnPage:function(t){var i=this.getPointers(),n=i.components.getPage(t,this.getSiteData().getViewMode());if(n){var s=i.components.getChildrenRecursively(n);return e.reduce(s,function(t,n){var s=this.getDisplayedDAL().get(i.getInnerPointer(n,["componentType"]));return e.includes(p,s)&&t.push(n.id),t}.bind(this),[])}},reloadPage:function(){window.location.reload()},getCompsDataOnPage:function(t){var i=this,n=this.getPointers(),s=this.getDisplayedDAL(),a=n.components.getPage(t,this.getSiteData().getViewMode());if(a){var r=n.components.getChildrenRecursively(a);return e.map(r,function(a){var r=n.getInnerPointer(a,"dataQuery"),o=s.get(r),c=s.get(n.getInnerPointer(a,["componentType"])),u=i.getSiteData().getDataByQuery(o,t,i.getSiteData().dataTypes.DATA);return e.assign(u,{componentType:c,compId:a.id})})}},getHostLibsAspectConstructor:function(e){return o.getHostLibsAspectConstructor(e)},getComponentType:function(e){var t=this.getPageData().id,i=this.getPointers(),n=this.getDisplayedDAL(),s=i.components.getPage(t,this.getSiteData().getViewMode()),a=i.components.getComponent(e,s);return n.get(i.getInnerPointer(a,["componentType"]))},getSvgStringToStoreData:function(e){return i.svg.svgStringToStoreData(e)},notifyOnRendered:function(){this._site.notifyAspects(this._site.supportedEvents.onRendered)},notifyFullyRendered:function(){this._site.notifyAspects(this._site.supportedEvents.fullyRendered)},getClientSpecMap:function(){return this.getSiteData().getClientSpecMap()}},d}.apply(t,n))||(e.exports=s)},257:function(e,t,i){var n,s;n=[i(13)],void 0===(s=function(e){"use strict";return{register:function(t,i){return e.compFactory.register(t,i),this},registerMobxObserver:function(t){return e.compFactory.registerMobxObserver(t),this}}}.apply(t,n))||(e.exports=s)},258:function(e,t,i){var n,s;n=[i(0),i(180)],void 0===(s=function(e,t){"use strict";var i=["targetId","type","name","part","viewMode"];return{handleBehaviors:function(i,n,s,a){s=s||{},n=function(t,i){return e.filter(t,function(e){var t=!e.viewMode,n=e.viewMode===i;return t||n})}(n,i.getSiteData().getViewMode()),t.getHandler(a).handle(n,i,s)},behaviorUniqueIdentifier:function(n){var s=t.getHandler(n.type);return s.getUniqueIdentifier?s.getUniqueIdentifier(n):e(n).at(i).map(function(t){return e.isPlainObject(t)?e.values(t):t}).join()}}}.apply(t,n))||(e.exports=s)},27:function(e,t){e.exports=h},3:function(e,t){e.exports=i},30:function(e,t){e.exports=f},377:function(e,t,i){var n,s;n=[i(0),i(8),i(14)],void 0===(s=function(e,t,i){"use strict";function n(){this.blankFavicons=null}function s(e,t){return(t=e.getCurrentUrlPageId()||t)&&"masterPage"!==t||(t=e.getMainPageId()),t}return n.prototype={getFavicons:function(t){return t.isPremiumUser&&t.isPremiumUser()&&function(t){return e.includes(t.rendererModel.premiumFeatures,"AdsFree")}(t)?this._getPremiumUserFavicon(t):this._getDefaultWixFavicon()},createBlankFavicons:function(){return null===this.blankFavicons&&(this.blankFavicons=this._createEmptyFaviconElements()),this.blankFavicons},getPageMetaData:function(t,i){var n=s(t,i),a=t.isDynamicPage(n)?function(t,i){var n=t.getDynamicPageSEOMetaData(i),s={metaTags:{},openGraphMetaTags:{}};return e.forEach(n,function(t,i){e.startsWith(i,"og:")?s.openGraphMetaTags[i]=t:s.metaTags[i]=t}),s}(t,n):this._getMetaDataForPage(t,n);if(t.isInSeo()){var r=this._getTpaMetaData(t);e.assign(a.metaTags,r.metaTags),e.assign(a.openGraphMetaTags,r.openGraphMetaTags),a.linkTags=a.linkTags||{},e.assign(a.linkTags,r.linkTags),r.title&&(a.title=r.title)}return a},getPageMetaTags:function(t,i){var n=s(t,i);return t.isDynamicPage(n)?function(t,i){var n=t.getDynamicPageSEOMetaData(i),s=[];return e.forEach(n,function(t,i){e.startsWith(i,"og:")?s.push('<meta property="'+i+'" content="'+t+'">'):s.push('<meta name="'+i+'" content="'+t+'">')}),s}(t,n):this._getMetaTagsForPage(t,n)},getPageJsonldTag:function(t,i){var n=s(t,i),a=t.getPageJsonld(n);return 0===e.size(a)?"":['<script type="application/ld+json" data-pageid="'+i+'">',JSON.stringify(a),"<\/script>"].join("")},getPageLinkTag:function(t,i){var n=s(t,i),a=t.getPageLinkTag(n);return 0===e.size(a)?"":'<link rel="amphtml" href="'+a+'">'},getTpaLinkTag:function(t,n,a){var r=s(t,n),o=t.getPageSEOLinkHref(r,a);return e.isNil(o)||""===o?"":'<link rel="'+a+'" href="'+o+'" data-id="'+i.constants.TPA_LINK_TAGS.DATA_ID+'">'},_getPremiumUserFavicon:function(e){var t=e.getFavicon();if(t){var i=this._getFaviconMimeType(t);return t=e.getMediaFullStaticUrl(t),this._createFaviconLinkElements(t,i)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var e="http://www.wix.com/favicon.ico",t=this._getFaviconMimeType(e);return this._createFaviconLinkElements(e,t)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(e,t){var i=[];return e&&t&&(i.push({rel:"shortcut icon",href:e,type:t}),i.push({rel:"apple-touch-icon",href:e,type:t})),i},_getStaticMediaUrl:function(e){return e.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(e){var t=null;return e&&(this._isExtension(e,"png")?t="image/png":this._isExtension(e,"gif")?t="image/gif":this._isExtension(e,"ico")||this._isExtension(e,"icon")?t="image/x-icon":this._isExtension(e,"jpg")&&(t="image/jpg")),t},_isExtension:function(e,t){return this._getExtension(e).toLowerCase()===t},_getExtension:function(e){if(e){var t=e.lastIndexOf(".");if(t>=0)return e.substr(t+1)}return""},_getTpaMetaData:function(t){var i=t.getTpaSEOMetaData(),n={metaTags:{},openGraphMetaTags:{},linkTags:{}},s={canonical:"canonical",prevLink:"prev",nextLink:"next"};return e.forEach(i,function(t,i){s[i]?n.linkTags[s[i]]=t:e.startsWith(i,"og")?n.openGraphMetaTags["og:"+i.substring(2).toLowerCase()]=t:"title"===i?n.title=t:n.metaTags[i]=t}),n},_getMetaDataForPage:function(i,n){var s=i.getPageSEOMetaData(n),a={metaTags:{},openGraphMetaTags:this._getOgMetaData(s)};return e.assign(a.metaTags,this._getDescriptionSEOMetaData(s),this._getKeywordsSEOMetaData(s)),e.get(i,"publicModel.indexable")&&e.assign(a.metaTags,this._getRobotsIndexMetaData(s)),t.isOpen("sv_twitterMetaTags",i)&&e.assign(a.metaTags,this._getTwitterMetaData(s)),a},_getMetaTagsForPage:function(i,n){var s=i.getPageSEOMetaData(n),a=[this._getDescriptionSEOMetaTag,this._getKeywordsSEOMetaTag,this._getOgMetaTag];return e.get(i,"publicModel.indexable")&&a.push(this._getRobotsIndexMetaTag),t.isOpen("sv_twitterMetaTags",i)&&a.push(this._getTwitterMetaTags),e.flatMap(a,function(e){return e(s)})},_getRobotsIndexMetaData:function(e){if(e&&e.robotIndex)return{robots:e.robotIndex}},_getRobotsIndexMetaTag:function(e){if(e&&e.robotIndex)return'<meta name="robots" content="'+e.robotIndex+'">'},_getDescriptionSEOMetaData:function(e){if(e&&e.description)return{description:e.description}},_getDescriptionSEOMetaTag:function(e){if(e&&e.description)return['<meta name="description" content="'+e.description+'">']},getGoogleTagManagerScript:function(){return"<script async>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');<\/script>"},_getKeywordsSEOMetaData:function(e){if(e&&e.keywords)return{keywords:e.keywords}},_getKeywordsSEOMetaTag:function(e){if(e&&e.keywords)return['<meta name="keywords" content="'+e.keywords+'">']},_getOgMetaData:function(t){return e.chain(t).get("ogTags").keyBy("property").mapValues("content").value()},_getOgMetaTag:function(t){return e.map(e.get(t,"ogTags"),function(e){return'<meta property="'+e.property+'" content="'+e.content+'">'})},_getTwitterMetaData:function(t){return e.chain(t).get("twitterTags").keyBy("name").mapValues("content").value()},_getTwitterMetaTags:function(t){return e.map(e.get(t,"twitterTags"),function(e){return'<meta name="'+e.name+'" content="'+e.content+'">'})}},new n}.apply(t,n))||(e.exports=s)},378:function(e,t,i){var n,s;n=[i(19),i(0),i(11),i(14),i(4),i(1),i(379),i(377),i(387),i(108),i(391),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p,l){"use strict";var d=a.urlUtils,g=e.createFactory(r),h={PAGE_LOADED_FIRST_RENDER:"page_loaded_first_render",PAGE_LOADED:"page_loaded"},f={},m={pageId:a.errorPages.IDS.INTERNAL_ERROR},v=0;function y(e,i,n){var s=t(n).keys().pull("masterPage").value();return t.mapValues(n,function(t,n){return i&&window.pagesData&&window.pagesData[n]?t:a.dataFixer.fix(t,s.slice(),e.requestModel,e.currentUrl,e.urlFormatModel,"site"===e.viewMode,e.rendererModel)})}function S(e,i,n){var r={};s.urlUtils.isQueryParamOn(i.currentUrl,"isSantaEditor")&&(r=t.assign(r,{componentViewMode:"editor"})),i.rendererModel.previewMode&&(r=t.assign(r,{isSocialInteractionAllowed:!1,isPlayingAllowed:!1})),i.renderFlags=t.assign({},i.renderFlags,r);var o=new a.FullSiteData(i);o.updateScreenSize();var c=p.createSiteDataAPIAndDal(o,e,n),u=c.siteData,l=c.siteDataAPI;return{fullSiteData:o,displayedSiteData:u,siteDataWrapper:c,viewerPrivateServices:{pointers:c.pointers,displayedDAL:c.displayedDal,siteDataAPI:l},isServerSideRender:u.isClientAfterSSR(),siteModel:i,siteDataAPI:l}}function A(e){var i=e.siteDataWrapper.fullPagesData.pagesData;if(i&&(y(e.siteModel,e.isServerSideRender,i),i.masterPage)){e.siteDataAPI.createDisplayedPage("masterPage");var n=e.siteModel.landingPageNavigationInfo||a.wixUrlParser.parseUrl(e.displayedSiteData,e.displayedSiteData.currentUrl.full);e.displayedSiteData.setRootNavigationInfo(n),t.forEach(i,function(t,i){e.siteDataAPI.createDisplayedPage(i)})}return e}function P(e,i,n,s){if(!!e.documentServicesModel)I(e,i,n,s);else{var r=i.redirectUrl;d.isExternalUrl(r)?window.location=r:d.isRelativeUrl(r)&&v<4?(v++,function(e,i,n){var s=d.joinURL(e.getExternalBaseUrl(),i),r=a.wixUrlParser.parseUrl(e,s);r.routerDefinition?D(e,r,function(e){n(t.assign(r,e))}):(r.isStaticPageRedirect=!0,n(r))}(e,r,s)):s(m)}}function I(e,i,n,s){e.addDynamicPageData(i.pageId,i.pageData,n),e.addDynamicPageHeadData(i.pageId,i.pageHeadData),s({pageId:i.pageId,title:t.get(i.pageHeadData,"title",""),errorInfo:i.errorInfo,tpaInnerRoute:i.tpaInnerRoute,routerPublicData:i.publicData})}function D(e,i,n,r){var o=i.routerDefinition,c=a.routersBackEndRequests.makeParamObjFromSiteData(e,o,i);a.routersBackEndRequests.getPage(c,function(t){if(e.isInSSR()){var i=t.redirectUrl,s=t.sendStatus,a=t.status,c=t.message,u=d.isRelativeUrl(i)?d.joinURL(e.getExternalBaseUrl(),i):i;if(s||i)return e.wixCodeSeo?n(m):r({redirectUrl:u,status:a,message:c})}t.redirectUrl?P(e,t,o,n):I(e,t,o,n)},function(i,a,r){!!e.documentServicesModel||(e.isInSSR()?e.onPageRequestFailed(t.get(c,"publicBaseUrl"),500,r):I(e,{pageId:s.errorPages.IDS.INTERNAL_ERROR},o,n))},e)}function _(e,i,n){if("undefined"!=typeof window&&t.get(window,"history.replaceState")&&n)try{window.history.replaceState(null,i,e)}catch(e){}}function C(e,i){t.forEach(f[e],function(e){e.apply(null,i)})}function E(e,t){var i=e.getPrimaryPageId()===t.pageId;return e.isPopupOpened()&&i}function T(e){if(!e.isInSSR()&&!window.isMockWindow&&window.performance&&performance.getEntriesByType)try{var i=/(skins|require)\.min\.js$/,n=t(performance.getEntriesByType("resource")).toArray().filter(function(e){return i.test(e.name)}).map(function(e){var t=e.name.match(i),n=e.responseEnd-(e.responseStart||e.startTime),s={Name:t[1],DnsTime:Math.round(e.domainLookupEnd-e.domainLookupStart),ConnectTime:Math.round(e.connectEnd-e.connectStart),Ttfb:Math.round(e.duration-n),ResponseTime:Math.round(n)},a=e.transferSize||e.encodedBodySize;return a&&e.duration&&(s.Kbps=Math.round(a/e.duration)),s}).map(function(e){var i=t.includes(e.Name,"require")?"small":"large";return t.mapKeys(e,function(e,t){return i+t})}).reduce(function(e,i){return t.assign(e,i)},{});a.logger.reportBI(e,u.CDN_PERFORMANCE,n)}catch(e){}}function b(e,i,n,r,o,c,u){s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE);var p=e.props.siteData,l=e.siteAPI;(p.getCurrentUrlPageId()!==r.pageId&&l.reportBeatStart(r.pageId),p.getPrimaryPageId()!==r.pageId&&r.anchorData||r.anchorData&&p.getCurrentUrlPageId()===r.pageId&&r.routerDefinition)&&l.getSiteAspect("actionsAspect").registerNextAnchorScroll(r.anchorData);var g=!0,f=p.currentUrl.full,m=function(){if(C(h.PAGE_LOADED,[l,r]),g){g=!1,0===n.indexOf("#")?p.currentUrl.hash=n:p.currentUrl=d.parseUrl(n),function(e,t,i,n){var s=e.isPopupPage(n.pageId),r=e.isUsingUrlFormat(a.siteConstants.URL_FORMATS.SLASH),o=E(e,n);return!s&&i!==t&&r&&!o}(p,f,n,r)&&l.reportCurrentPageEvent(n,r.pageId);var i=function(e,t){var i=e.isPopupPage(t.pageId),n=E(e,t);return!i&&!n}(p,r);p.setRootNavigationInfo(r,!c),e.siteAPI.getSiteAspect("WidgetAspect").pageNavigationInfoChanged(r.pageId),p.isViewerMode()&&(u?_(n,r.title,u):function(e,i,n){if("undefined"!=typeof window&&t.get(window,"history.pushState")&&n)try{window.history.pushState(null,i,e)}catch(e){}}(n,r.title,o)),i&&O(p,r.pageId)}s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.NAVIGATE_TO_PAGE)};return e.siteAPI.getSiteAspect("WidgetAspect").setContextIdToIgnore(r.pageId),function(e,t){var i=e.pageId===t.getFocusedRootId()&&e.imageZoom,n=!!t.hasPage(e.pageId),s=e.pageId===t.getPrimaryPageId(),a=e.pageAdditionalData===t.getExistingRootNavigationInfo().pageAdditionalData;return e.isLanguageChange||!(i||n&&s&&a)}(r,p)?(i.loadPage(r,function(){l.getActionQueue().runImmediately(m)}),!0):(l.getActionQueue().runImmediately(m),!0)}function w(e,i,n){var s="wixSiteProperties";return l.isOpen("mobileNonOptimizedOverflow",e)&&(s+=" mobile-non-optimized-overflow"),g(t.assign({},n,{className:"WixSite"===e.rendererModel.siteInfo.documentType?s:"noop",siteData:e,viewerPrivateServices:i,rootId:"masterPage",navigateMethod:b,updateUrlIfNeededMethod:B,getDynamicPageRealPage:D,updateHeadMethod:x,getSiteContainer:R}))}function R(){return window}a.sessionFreezer.freeze(f);var M={"ld+json":k},x=function(e,i,n){n?t.forEach(n,function(t){M[t](e,i,L(e))}):function(e,t){if(O(e,t),"WixSite"===e.rendererModel.siteInfo.documentType){var i=L(e);N(i,{name:"googleTagManagerScript",markup:o.getGoogleTagManagerScript()},!1)}}(e,i)};function O(e,s){if(!e.isInSeo()||e.isInSSR()){!function(e){if(e.isInSSR())return e.ssr.headTags={},void e.resetCurrDynamicPageMetaTags();var s=["[name=description]","[name=keywords]",'[property="og:title"]','[property="og:description"]','[property="og:url"]','[property="og:image"]','[rel="amphtml"]'];t.forEach(n.constants.TPA_LINK_TAGS.SUPPORTED_RELS,function(e){s.push('[data-id="'+n.constants.TPA_LINK_TAGS.DATA_ID+'"][rel="'+e+'"]')}),t.get(e,"publicModel.indexable")&&s.push("[name=robots]");var a=e.getCurrDynamicPageMetaTags();t.forEach(a,function(e,i){t.startsWith(i,"og:")?s.push('[property="'+i+'"]'):s.push('[name="'+i+'"]')}),e.resetCurrDynamicPageMetaTags(),l.isOpen("sv_twitterMetaTags",e)&&(s=s.concat(['[name="twitter:card"]','[name="twitter:title"]','[name="twitter:description"]','[name="twitter:image"]']));s.forEach(function(e){i(e,window.document.head).remove()})}(e);var a=L(e);!function(e){e.isInSSR()||window.isMockWindow||(window.document.title=e.getCurrentUrlPageTitle())}(e),function(e,i,n){if(e.isInSSR())return void t.assign(n,o.getPageMetaData(e,i));var s=o.getPageMetaTags(e,i);t.forEach(s,function(e){N(n,{markup:e})})}(e,s,a),k(e,s,a),function(e,i,n){if(t.get(e,"publicModel.hasBlogAmp")){var s=o.getPageLinkTag(e,i);s&&N(n,{name:"amphtml",markup:s})}}(e,s,a),t.forEach(n.constants.TPA_LINK_TAGS.SUPPORTED_RELS,function(t){!function(e,t,n,s){var a=o.getTpaLinkTag(e,t,s);if(""!==a){var r=i('link[rel$="'+s+'"]',n).length;r||N(n,{name:s,markup:a},!1)}}(e,s,a,t)})}}function k(e,t,n){!function(e,t){e.remove&&i(t,e).remove()}(n,'script[type="application/ld+json"][data-pageid]');var s=o.getPageJsonldTag(e,t);s&&N(n,{name:"jsonld",markup:s})}function L(e){return e.isInSSR()||window.isMockWindow?(e.ssr.headTags=e.ssr.headTags||{},e.ssr.headTags):window.document.head}function N(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?a.xss.filterHtmlString(t.markup,{allowHeadTags:!0,allowOneSelfClosingMetaTag:!0}):t.markup;e.append?i(e).append(n):e[t.name]=n}function B(e,t){if(!a.errorPages.isErrorPage(t.pageId)){var i=a.wixUrlParser.getUrl(e,t);!t.routerDefinition&&e.isViewerMode()&&i!==e.currentUrl.full&&function(e,t,i){_(e,t,!0),i.currentUrl=d.parseUrl(e)}(i,t.title,e)}}return{isProtectedPage:function(e,i){if(i=i||e.getPrimaryPageId(),s.errorPages.isErrorPage(i))return!1;var n=t.get(e,"publicModel.pageList.pages"),a=t.find(n,{pageId:i});return a&&!a.pageJsonFileName},createSitePrivates:S,extendPrivates:A,createSitePrivatesEx:function(){return A(S.apply(this,arguments))},fixPages:y,prepareSiteForRender:function(e,i,n){return new Promise(function(r){function o(o){e.setRootNavigationInfo(o),a.logger.reportBeatEvent(e,6,o.pageId),T(e),c.init(e),i.siteDataAPI.loadPage(o,function(){o.isStaticPageRedirect||t.assign(o,a.wixUrlParser.parseUrl(e,e.currentUrl.full)),s.errorPages.isErrorPage(o.pageId)&&(s.errorPages.setIsFixingDisplayedMasterPage(),s.errorPages.updateErrorPageMasterData("masterPage",e.pagesData.masterPage)),e.setRootNavigationInfo(o),a.mobileViewportFixer.fixViewportTag(e),B(e,o),C(h.PAGE_LOADED_FIRST_RENDER,[e,n.wixCodeAppApi,!!o.isStaticPageRedirect]),r({siteData:e,viewerPrivateServices:i})})}var u=e.landingPageNavigationInfo||a.wixUrlParser.parseUrl(e,e.currentUrl.full);u&&u.routerDefinition?(v=0,e.landingPageNavigationInfo?o(u):D(e,u,o)):o(u)})},doRenderSite:function(e,t,i){e.then(function(e){function n(){s.loggingUtils.performance.finish(s.loggingUtils.performanceMetrics.RENDER_PREPARE,{category:s.loggingUtils.performance.VERBOSE}),i(w(e.siteData,e.viewerPrivateServices,t))}e.siteData.isViewerMode()&&l.isOpen("importScriptsOpt",e.siteData)&&t.wixCodeAppApi&&t.wixCodeAppApi.isAppInitiated()?setTimeout(n,10):n()})},renderSite:function(e,i,n,r,o){function u(o){e.setRootNavigationInfo(o),a.logger.reportBeatEvent(e,6,o.pageId),T(e),c.init(e),i.siteDataAPI.loadPage(o,function(){o.isStaticPageRedirect||t.assign(o,a.wixUrlParser.parseUrl(e,e.currentUrl.full)),s.errorPages.isErrorPage(o.pageId)&&function(e,t){var i=s.errorPages.getErrorPageMasterData(t),n=e.pointers.page.getPageData("masterPage"),a=e.pointers.getInnerPointer(n,[t]),r=e.pointers.general.getAllStylesInPage(t);e.displayedDAL.set(a,i.masterPageData),e.displayedDAL.merge(r,i.themeData)}(i,o.pageId),e.setRootNavigationInfo(o),e.isClientAfterSSR()||a.mobileViewportFixer.fixViewportTag(e),B(e,o),C(h.PAGE_LOADED_FIRST_RENDER,[e,n.wixCodeAppApi,!!o.isStaticPageRedirect]),r(w(e,i,n))})}var p=a.wixUrlParser.parseUrl(e,e.currentUrl.full);return p.routerDefinition?(v=0,void D(e,p,u,o)):(u(p),e)},WixSiteReact:r,hooks:{types:h,registerHook:function(e,t){f[e]=f[e]||[],f[e].push(t)}}}}.apply(t,n))||(e.exports=s)},379:function(e,t,i){var n,s;n=[i(6),i(74),i(11),i(0),i(19),i(5),i(18),i(12),i(27),i(3),i(4),i(822),i(826),i(827),i(381),i(828),i(829),i(30),i(1),i(256),i(831),i(832),i(838),i(386),i(380),i(387),i(839),i(840),i(841),i(842),i(177),i(108),i(13),i(14),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p,l,d,g,h,f,m,v,y,S,A,P,I,D,_,C,E,T,b,w,R,M,x,O,k){"use strict";var L=7,N=8,B=14,U=u.componentPropsBuilder,F=500,q=32,W=s.createFactory(l),V=s.createFactory(h),G=s.createFactory(E),H=s.createFactory(P),K=s.createFactory(I),j=s.createFactory(D);function z(e,t){var i=n.get(e,["compRefs",t]),s=n.get(e,["refs",t]);return i||s}var Q=function(e,t,i,n,s,a,r){return(e=(e=(e=(e=(e=(e=e&&t?z(e,t):e)&&i?z(e,i):e)&&n?z(e,n):e)&&s?z(e,s):e)&&a?z(e,a):e)&&r?z(e,r):e)&&o.findDOMNode(e)};function J(e,t){setTimeout(function(){requirejs(["mousetrap"],function(i){i.bind(e,t)},n.noop)},F)}function Y(e){e.componentDidLayout&&e.componentDidLayout.call(e),e.componentDidLayoutAnimations&&e.componentDidLayoutAnimations.call(e),n.forOwn(e.refs,Y),n.forOwn(e.compRefs,Y)}function Z(){var e=this.props.siteData,t=e.getCurrentUrlPageId(),i=Q.bind(null,this.getPageById(t)),n=Q.bind(null,this.getMasterPage()),s=Q.bind(null,this),a={inner:p.structuresDescription.getInner(e,i),outer:p.structuresDescription.getOuter(e,n),siteBackground:p.structuresDescription.getSiteBackground(e,s)},r=e.getCurrentPopupId();return r&&(a[r]=p.structuresDescription.getRootDescriptor(e,r,Q.bind(null,this.getPageById(r)))),a}function X(e){var t=this.getAspectsComponentStructures(),i=this.props.siteData,s=p.structuresDescription.getRootDescriptor,a=function(e){return function(){var t=n.toArray(arguments);return Q.apply(null,[e].concat(t))||Q.apply(null,[e.refs.aspectPortal].concat(t))}}(this.refs.siteAspectsContainer),r=n.transform(t,function(e,t){e[t.id]={structure:t,getDomNodeFunc:a}},{}),o=this.siteAPI.getSiteAspect("siteMembers").getCustomSignupPageId(),c=i.getExistingRootNavigationInfo(i.getCurrentUrlPageId()),u=this.siteAPI.getSiteAspect("siteMembers").shouldRenderCustomSignupPage(c),l=i.getCurrentPopupId();return!(n.isNull(o)||n.isNull(l))&&u&&o===l&&(r[o]=s(i,o,Q.bind(null,this.getPageById(o)))),e?(n.assign(r,Z.call(this)),i.shouldShowWixAds()&&(r.wixAds=p.structuresDescription.getWixAds(i)),r):r}var $=c.action(function(e,t){var i=e.getSiteData(),n=!t.routerDefinition,s=i.getFocusedRootId()===e.getCurrentPopupId(),a=s&&t.pageId===i.getPrimaryPageId(),r=i.getFocusedRootId()!==t.pageId,o=t.isLanguageChange;if(n&&r&&!a)e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);else{if(t.routerDefinition){var c=!r,u=t.innerRoute!==i.getRootNavigationInfo().innerRoute;if(c&&u)return e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(r&&!s)return void e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]);if(s)t.pageId===i.getPrimaryPageId()?u&&(e.resetRuntimeOverrides(t.pageId,!0),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])):e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t])}o&&(e.getAllRenderedRootIds().forEach(function(t){e.resetRuntimeOverrides(t,!0)}),e.getSiteAspect("WidgetAspect").stopApps([t.pageId]),e.getSiteAspect("WidgetAspect").loadApps([t.pageId],[t]))}});function ee(e){var t=e.getSiteData(),i=R.requested(t);i.length&&e.reportBI(M.PAGE_COMP_TYPES_LIST,{firstPage:1===t.biData.getPageNumber(),compList:JSON.stringify(n.take(i,q))})}function te(e,t){return W({siteData:t,styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,ref:"theme",key:"wixThemeReactFactory",shouldRenderPage:e,siteAPI:this.siteAPI,requestRelayout:this.requestRelayout})}function ie(){return f.getWixBgComponent(this.mobxObserverWrapperProps)}function ne(){return t(_(this.siteAPI),{key:"wixAdsRenderer"})}function se(){var t=this.getRootStyle();return t.minWidth=this.props.siteData.getSiteWidth()+"px",e.utils.createReactElement("div",{className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:t,"aria-hidden":this.state.isAriaHidden},V(function(e,t){var i=this.deletedMeasureMap||this.props.siteData.measureMap,s=U.getRootProps(h,this.props.rootId,e,this.props.viewerPrivateServices,i);return s.structure=n.merge({},s.structure,{id:"masterPage",layout:{position:this.props.siteRootPosition},componentType:"mobile.core.components.MasterPage"}),s.ref=this.props.rootId,s.refInParent=s.ref,s.className="SITE_ROOT",s.firstPage=!0,s.style={width:"100%"},s.key=(e.getSiteData().isMobileView()?"mobile_":"desktop_")+"siteRoot",s.mobxObserverWrapperProps=t,s}.call(this,this.siteAPI,this.mobxObserverWrapperProps)))}function ae(e){return G({currentPopupId:this.props.siteData.getCurrentPopupId(),viewerPrivateServices:this.props.viewerPrivateServices,siteAPI:this.siteAPI,siteData:e,ref:"popupRoot",key:"popupRoot",siteRootStyle:this.getRootStyle(),blockingPopupLayer:this.siteAPI.getRenderFlag("blockingPopupLayer"),measureMap:this.deletedMeasureMap,mobxObserverWrapperProps:this.mobxObserverWrapperProps})}function re(){return H({ref:"siteAspectsContainer",key:"siteAspectsContainer",siteWidth:this.props.siteData.getSiteWidth(),isMobileView:this.props.siteData.isMobileView(),getAspectComponentDescriptions:this.getAspectComponentDescriptions,siteAPI:this.siteAPI,requestRelayout:this.requestRelayout})}function oe(e){return t(w,{ref:"selectionSharer",key:"selectionSharer",siteBasePath:e.santaBase,siteAPI:this.siteAPI})}function ce(){return K({key:"extraSiteHeight",siteAPI:this.siteAPI})}function ue(){return j({siteAPI:this.siteAPI,key:"blockingLayer",layerName:"blockingLayer"})}function pe(){var t=this;return k.isOpen("sv_removeTestNode",this.props.siteData)?null:e.utils.createReactElement(g,{className:"TEST_STYLE_NODE",key:"TEST_STYLE_NODE",siteData:this.siteAPI.getSiteData(),styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,afterStylesReadyCallback:this.reLayout,ref:function(e){t.testNode=e}})}return r({displayName:"WixSite",mixins:[A,y.renderDoneMixin,T,b],propTypes:{getDynamicPageRealPage:a.func,navigateMethod:a.func,updateHeadMethod:a.func,updateUrlIfNeededMethod:a.func,extraEventsHandlers:a.object,className:a.string,onAfterLayout:a.func,getSiteContainer:a.func,viewerPrivateServices:a.shape({pointers:a.object.isRequired,displayedDAL:a.object.isRequired,siteDataAPI:a.object.isRequired}).isRequired,siteData:a.object.isRequired,siteRootPosition:a.oneOf(["static","relative"]),scopedRoot:a.string,rootId:a.string,wixCodeAppApi:a.shape({init:a.func.isRequired,sendMessage:a.func.isRequired,registerMessageHandler:a.func.isRequired,registerMessageModifier:a.func.isRequired}),DOMAccessorOverride:a.func},getDefaultProps:function(){return{onAfterLayout:n.noop,siteRootPosition:"static",scopedRoot:null,rootId:"masterPage",wixCodeAppApi:{init:n.noop,sendMessage:n.noop,registerMessageHandler:n.noop,registerMessageModifier:n.noop}}},getPrimaryPage:function(){var e=this.getMasterPage();if("masterPage"===this.props.rootId&&e){var t=this.props.siteData.getPrimaryPageId();e=this.getPageComponent(e,t)}return e},getCurrentPopup:function(){var e=this.props.siteData.getCurrentPopupId();return e?y.reactComponentUtils.getRef(this,"popupRoot",e):null},getMasterPage:function(){return this.refs[this.props.rootId]},getPageById:function(e){var t=this.getMasterPage();return e===this.props.rootId?t:t&&this.getPageComponent(t,e)?this.getPageComponent(t,e):y.reactComponentUtils.getRef(this,"popupRoot",e)},getPageComponent:function(e,t){return n.get(this.getPageRefs(e),t)},getPageOfComp:function(e){var t=this,i=n.find(this.siteAPI.getAllRenderedRootIds(),function(i){var n=t.getComponentsByPageId(i);return!!n&&!!n[e]});return this.getPageById(i)},scrollTo:function(e,t,i){i=i||this.props.getSiteContainer();var n=this.props.siteData.isMobileView(),s=p.scrollUtils.calcScrollDuration(function(e){return{x:e.pageXOffset||e.scrollX||0,y:e.pageYOffset||e.scrollY||0}}(i).y,e.y,n),a=n?"Quint.easeOut":"Sine.easeInOut";this.props.siteData.animations.animate("BaseScroll",i,s,0,{y:e.y,ease:a,callbacks:t})},scrollToAnchor:function(e,t){this.scrollTo(e,{onUpdate:t})},scrollToTop:function(){this.scrollTo({y:0})},getInitialState:function(){var e=this;return this.onAfterLayout=n.once(this.props.onAfterLayout),this.reLayoutPending=!1,this.requestRelayout=function(){return k.isOpen("sv_removeTestNode",e.props.siteData)?e.reLayout():e.testNode&&e.testNode.doWaitForStylesReadyRoutine()},this.pendingReLayoutCompsMap={},this.siteAPI=new S(this),this.isBusy=!0,this.isChangingUrlPage=!1,this.siteIsReady=!1,this.siteIsFullyRendered=!1,this.siteAPI.reportBeatEvent(L,this.props.siteData.getPrimaryPageId()),this.compRefs={},{}},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillMount:function(){var e=this.props.siteData,t=e.getCurrentUrlPageId(),i=e.getExistingRootNavigationInfo(t);this.mobxObserverWrapperProps=function(e,t,i,n,s){return{viewerPrivateServices:e,siteAPI:t,addComponentRef:i,styleRoot:n?"#"+n:null,requestRelayout:s}}.call(this,this.props.viewerPrivateServices,this.siteAPI,this.addComponentRef,this.props.scopedRoot,this.requestRelayout),function(e){var t=this;this.pendingRenderCounter=c.computed(function(){return n(this.props.siteData.renderingCompsMap.values()).reject().size()+(this.props.siteData.relayoutBlockedByQueue?1:0)},{context:this,name:"pendingRenderCounter"}),c.observe(this.pendingRenderCounter,c.action(function(i){if(0===i.newValue&&t.props.siteData.renderingCompsMap.size>0){var s=t.props.siteData.renderingCompsMap.toJS();t.pendingReLayoutCompsMap=n.assign(t.pendingReLayoutCompsMap||{},s),t.reLayoutPending=!0,t.props.siteData.renderingCompsMap.clear(),e()}}),!0)}.call(this,this.reLayoutIfPending),this.updateSiteHeadTag();var s=this.siteAPI.isPageAllowed(i)?t:null;this.siteAPI.setComponentRenderStart("WixSiteReact_"+this.props.rootId),this.setState({currentUrlPageId:s,currentPopupId:null})},componentWillUpdate:function(){p.loggingUtils.performance.start(p.loggingUtils.performanceMetrics.RE_RENDER),this.isBusy=!0,this.siteAPI.setComponentRenderStart("WixSiteReact_"+this.props.rootId)},getSiteChildren:function(i,s){var a=this.props.siteData,r=void 0;if(r=k.isOpen("sv_ssr_santa_renderer",a)&&a.isInSSR()?function(t){var i=this.siteAPI,s=this.siteAspects;return n.compact([te.call(this,t,i.getSiteData()),t&&e.utils.createReactElement(d,{siteAPI:i,siteAspects:s}),re.call(this),ce.call(this),pe.call(this)])}.call(this,i):function(e){return!e.getSiteData().isMobileView()}(this.siteAPI)?function(e,t,i){var s=[te.call(this,e,i),e?ie.call(this):null,e?se.call(this):null,ne.call(this),t||e?ae.call(this,i):null,re.call(this),oe.call(this,i),ce.call(this),ue.call(this),pe.call(this)];return n.compact(s)}.call(this,i,s,a):function(e,t,i){var s=[te.call(this,e,i),ne.call(this),e?ie.call(this):null,e?se.call(this):null,t||e?ae.call(this,i):null,re.call(this),oe.call(this,i),ce.call(this),ue.call(this),pe.call(this)];return n.compact(s)}.call(this,i,s,a),this.props.siteData.getMasterPageLayoutSettings().mechanism===y.constants.LAYOUT_MECHANISMS.MESH){var o=m.createMeshEligibilityBeatScriptString(a);r.unshift(t("script",{id:"meshEligibilityBeat",key:"meshEligibilityBeat",dangerouslySetInnerHTML:{__html:o}}))}if(this.siteAPI.getLayoutMechanism()===y.constants.LAYOUT_MECHANISMS.MESH){var c=m.createPartiallyVisibleBeatScriptString(a);r.push(t("script",{id:"partiallyVisibleBeat",key:"partiallyVisibleBeat",dangerouslySetInnerHTML:{__html:c}}))}return r},render:function(){var t=this.props.siteData,i=t.getExistingRootNavigationInfo(t.getCurrentUrlPageId()),s=this.siteAPI.isPageAllowed(i),a=this.siteAPI.getSiteAspect("siteMembers").shouldRenderCustomSignupPage(i);s||this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(i),t.isInSSR()&&(s?t.ssr.aspectsComponentStructures=n.transform(this.getAspectsComponentStructures(),function(e,t){e[t.id]={structure:t}},{}):t.ssr.shouldRenderPage=!1);var r=this.props.className;return t.isVisualFocusEnabled()&&(r+=" visual-focus-on"),e.utils.createReactElement("div",n.assign({className:r,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:this.getSiteChildren(s,a)},this.props.extraEventsHandlers))},getRootStyle:function(){var e={width:"100%"};return e.top=this.props.siteData.getPageTopMargin(),e.paddingBottom=this.props.siteData.getPageBottomMargin(),this.state.siteRootHidden&&(e.height=0,e.overflowY="hidden"),e},onPopState:function(){var e=window.location.href,t=y.wixUrlParser.parseUrl(this.props.siteData,e);n.get(t,"queryParams.language")&&p.multilingual.setCurrentLanguage(t.queryParams.language),t&&this.tryToNavigate(t,!0)},onHashChange:function(){var e=y.wixUrlParser.parseUrl(this.props.siteData,window.location.href);e&&this.props.siteData.isUsingUrlFormat("slash")&&this.tryToNavigate(e)},isPageExists:function(e){return n.includes(this.props.siteData.getAllPageIds(),e)||y.errorPages.isErrorPage(e)},updateUrlIfNeeded:function(e){var t=this.siteAPI.getSiteData();this.props.updateUrlIfNeededMethod(t,e)},navigateIfPossible:function(e,t,i,s){var a=n.get(this.props,"viewerPrivateServices.siteDataAPI"),r=this.siteAPI.getSiteData();if(this.isPageExists(e.pageId))if(this.siteAPI.isPageAllowed(e)){var o=r.getDataByQuery(e.pageId);if(!o)return;o.isPopup||this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog();var c=n.clone(e);c.title=e.title||o.pageUriSEO;var u=function(e,t){var i=[];return k.isOpen("removeQueryParams",e)||t.hasAppSectionParams||i.push("appSectionParams"),y.wixUrlParser.getUrl(e,t,!1,!1,void 0,void 0,i)}(r,c),p=r.isPopupPage(e.pageId)||t;this.siteAPI.startingPageTransition(c),this.props.navigateMethod(this,a,u,c,!p,i,s)}else this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(e),this.forceUpdate()},tryToNavigate:function(e,t,i,s){var a=this,r=this.siteAPI.getSiteData(),o=this.siteAPI.getSiteAspect("actionsAspect");if(this.currNav=e,function(e,t){if(t.routerDefinition){var i=e.getSiteAspect("tpaComponentsDomAspect"),s=e.getTPAComponentsOnPage(t.pageId);n.forEach(s,function(e){i.clearComponentIsAlive(e)})}}(this.siteAPI,r.getRootNavigationInfo()),e.routerDefinition&&(!e.pageId||e.isRefetchingPageAfterLogin))return this.siteAPI.startingPageTransition(e),void this.props.getDynamicPageRealPage(r,e,function(n){y.errorPages.isErrorPage(n.pageId)?(y.errorPages.setIsFixingDisplayedMasterPage(),y.errorPages.updateErrorPageMasterData("masterPage",r.pagesData.masterPage),a.props.viewerPrivateServices.siteDataAPI.loadPage(n,function(){a.dynamicPageTryToNavigate(e,o,n,r,a.siteAPI,t,i,s)})):a.dynamicPageTryToNavigate(e,o,n,r,a.siteAPI,t,i,s)});$(this.siteAPI,e),this.navigateIfPossible(e,t,i,s)},dynamicPageTryToNavigate:function(e,t,i,s,a,r,o,c){if(i.errorInfo){var u=a.getRenderRealtimeConfigItem("errorPagesPopUp");u&&u(i.errorInfo)}if(n.isEqual(this.currNav,e)){if(i.isStaticPageRedirect?e=i:n.assign(e,i),$(this.siteAPI,e),function(e,t){return e.getFocusedRootId()===t.pageId&&!t.isRefetchingPageAfterLogin}(s,e)){var p=e.innerRoute!==s.getRootNavigationInfo().innerRoute;if(this.handleSamePageAnchorNavigation(e),!p&&e.imageZoom===s.getRootNavigationInfo().imageZoom)return void t.handlePagePageNavigationCanceled()}delete e.isRefetchingPageAfterLogin,this.navigateIfPossible(e,r,o,c)}else t.handlePagePageNavigationCanceled()},handleSamePageAnchorNavigation:function(e){var t=this.siteAPI,i=this.props.siteData;if(e.anchorData){t.scrollToAnchor(e.anchorData,function(n){1===n.ratio&&t.getSiteAspect("anchorChangeEvent").setSelectedAnchorAsync(i,e.anchorData,e.pageId,y.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)})}else i.isImageZoom(e)||e.routerDefinition||this.scrollToTop()},handleNavigation:function(e,t,i,s){var a=this.props.siteData;if(e.pageId===a.getPrimaryPageId()){if("#"!==t){var r=n.get(this.props,"viewerPrivateServices.siteDataAPI");this.props.navigateMethod(this,r,t,e,i,s)}this.handleSamePageAnchorNavigation(e)}else this.tryToNavigate(e,!i)},enforceAndPatchLayout:c.action("enforceAndPatchLayout",function(){var e=Z.call(this),t=v.enforceAndPatch(e,this.siteAPI);return n.assign(this.props.siteData.reLayoutedCompsMap,t),!n.isEmpty(t)}),reLayout:c.action("reLayout",function(){var e=this;if(this.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()){var t=this.props.siteData,i=t.getCurrentUrlPageId(),s=t.getExistingRootNavigationInfo(i),a=this.getPrimaryPage(),r=!(!a||!Q(a,i))&&this.siteAPI.isPageAllowedAndLoaded(s);t.isAddPanelView||v.updateBodyNodeStyle(t),this.props.siteData.updateScreenSize();var o=X.call(this,r),u=this.forceFullReLayout?null:function(e,t,i,s){if(!e.measureMap||n.isEmpty(i)&&n.isEmpty(s))return null;var a=n.transform(t,function(e,t,i){n.includes(["inner","outer","siteBackground","wixAds"],i)||(e[i]=!0)},{});return n.assign({},s,i,a)}(t,o,this.compsToRelayoutMap,this.pendingReLayoutCompsMap);this.forceFullReLayout=!1;var p=this.siteAPI,l=c.untracked(function(){return v.reLayout(o,p,p.getNoEnforceAnchors(),e.lockedCompMap,u,e.props.DOMAccessorOverride)});if(t.measureMap=l.measureMap,n.assign(t.reLayoutedCompsMap,l.reLayoutedCompsMap),delete this.tempMeasureMap,function(e){var t=e.getSiteAspect("actionsAspect"),i=e.getSiteAspect("behaviorsAspect"),s=e.getCompBehaviours();n.forOwn(s,function(e,s){n.forOwn(e,function(e,n){t.registerBehaviors(n,s,e),i.setBehaviorsForActions(i.convertBehaviors(e,n),s,n)})})}(this.siteAPI),r){this.pendingReLayoutCompsMap={},this.reLayoutPending=!1,this.isBusy=!1;var d=[this.getMasterPage(),a,this.refs.siteAspectsContainer],g=this.getCurrentPopup();g&&d.push(g);var h=this._aspectsSiteAPI.getComponentById("SITE_BACKGROUND");d.push(h),function(e){n.forEach(e,Y)}(d,l.reLayoutedCompsMap)}this.isBusy=!1,this.notifyAspects(this.supportedEvents.didLayout,[]),this.siteIsReady||(this.siteIsReady=!0,this.siteAPI&&this.siteAPI.setBiMarker&&this.siteAPI.setBiMarker("lastTimeStamp"),this.notifyAspects(this.supportedEvents.siteReady))}}),registerReLayoutPending:function(e){this.pendingReLayoutCompsMap[e]=!0,this.reLayoutPending=!0},cancelReLayoutPending:function(e){delete this.pendingReLayoutCompsMap[e],n.isEmpty(this.pendingReLayoutCompsMap)&&(this.reLayoutPending=!1),!1===this.props.siteData.renderingCompsMap.get(e)&&this.props.siteData.renderingCompsMap.delete(e)},reLayoutIfPending:c.action(function(){this.reLayoutPending&&0===this.pendingRenderCounter.get()&&(this.reLayoutPending=!1,this.requestRelayout())}),componentDidMount:function(){var e=this,t=this.props.siteData;t._isFirstRenderAfterSSR=!1,this.onAfterLayout(),t.isUsingUrlFormat(y.siteConstants.URL_FORMATS.SLASH)?this.siteAPI.reportCurrentPageEvent():this.siteAPI.reportPageEvent(t.currentUrl.full,t.getCurrentUrlPageId()),this.siteAPI.initFacebookRemarketing(),this.siteAPI.initGoogleRemarketing(),this.siteAPI.initYandexMetrika(),this.siteAPI.setBiMarker("renderEnd"),y.dataCapsule.init(this._aspectsSiteAPI),c.reaction(function(){var e=this.props.siteData.getFocusedRootId(),t=this.props.siteData.getExistingRootNavigationInfo(e);return{mobileView:this.props.siteData.isMobileView(),currentLang:this.props.siteData.getCurrentLanguageCode(),siteWidth:this.props.siteData.getSiteWidth(),screenWidth:this.props.siteData.getScreenWidth(),pageAllowedAndLoaded:this.siteAPI.isPageAllowedAndLoaded(t),pageMargins:this.props.siteData.getPageMargins(),viewMode:this.siteAPI.getRenderFlag("componentViewMode")}},function(){this.forceUpdate()},{context:this,compareStructural:!0}),c.reaction(function(){return this.props.siteData.isMobileView()},function(){this.forceFullReLayout=!0},{context:this}),c.reaction(function(){return this.props.siteData.getScreenWidth()},function(){this.props.viewerPrivateServices.siteDataAPI.updateDisplayedNodesLayoutAndUpdateAnchors()},{context:this,name:"screenWidthChangeAction"});var s=c.computed(function(){var e=this.props.siteData.getPrimaryPageId(),t=this.props.siteData.getExistingRootNavigationInfo(e);return{primaryRootId:e,popupId:this.props.siteData.getCurrentPopupId(),routersRendererIndex:t.routersRendererIndex}},{context:this,compareStructural:!0});c.observe(s,function(t){e.siteAPI.getDisplayedDAL().removeByPath(["pageStubComponents",t.newValue.primaryRootId]);var i=t.oldValue.primaryRootId!==t.newValue.primaryRootId,n=t.oldValue.routersRendererIndex!==t.newValue.routersRendererIndex;(i||n)&&(e.isChangingUrlPage=!0),e.forceUpdate()}),this.registerAspectToEvent(this.supportedEvents.siteReady,function(){e.siteAPI.reportBeatFinish(e.props.siteData.getCurrentUrlPageId()),C.send(e.siteAPI.getSiteData()),function(e){var t=i(".hiddenTillReady");e.isMobileDevice()?(i(".wix-menu-enabled").removeClass("wix-menu-enabled"),t.css({display:"none"})):t.removeClass("hiddenTillReady")}(e.props.siteData),function(){var e=this.props.siteData,t=e.baseVersion||"could not retrieve version!";e.isMobileDevice()||e.isTabletDevice()?n.find(e.currentUrl.query,function(e,t){return"alertversion"===t.toLowerCase()})&&window.alert("You are running React!\nVersion: "+t):e.isViewerMode()&&!e.isAddPanelView&&J("ctrl+alt+shift+v",function(){window.alert("You are running React!\nVersion: "+t)})}.call(e),function(){if(window.rendererModel){var e=this.props.siteData;!e.isViewerMode()||e.isAddPanelView||e.isMobileDevice()||e.isTabletDevice()||J("ctrl+alt+shift+e",function(){var e=n(window.rendererModel.runningExperiments).pickBy(function(e){return"new"===e}).keys().value();window.alert("Active Experiments:\n"+e.join("\n"))})}}.call(e)}),this.registerAspectToEvent(this.supportedEvents.renderedRootsChanged,function(){O.maxScrollHandler.unregister()}),this.registerAspectToEvent(this.supportedEvents.onRendered,function(){x.progressiveReveal.onRendered(e.siteAPI)}),this.registerAspectToEvent(this.supportedEvents.fullyRendered,function(){e.siteIsFullyRendered||(e.siteIsFullyRendered=!0,e.siteAPI.reportBeatEvent(B,e.props.siteData.getPrimaryPageId()))}),this.registerAspectToEvent(this.supportedEvents.resize,function(){var e=this;return n.throttle(function(){!e.dead&&e.getMasterPage()&&(e.siteAPI.resetSiteReacted(),e.siteAPI.getActionQueue().runImmediately(e.props.siteData.updateScreenSize),e.siteAPI.didReact()||(e.registerReLayoutPending("WixSiteReact"),e.reLayout()))},500,{leading:!1,trailing:!0})}.call(this)),this.siteAPI.reportBeatEvent(N,this.props.siteData.getPrimaryPageId()),this.siteAPI.setComponentRenderEnd("WixSiteReact_"+this.props.rootId),ee(this.siteAPI)},componentDidUpdate:function(){if(this.tempMeasureMap&&!this.props.siteData.measureMap&&(this.props.siteData.measureMap=this.tempMeasureMap,delete this.deletedMeasureMap,delete this.tempMeasureMap),this.isChangingUrlPage){this.siteAPI.setBiMarker("renderEnd");var e=this.props.siteData.getCurrentUrlPageId();this.siteAPI.reportBeatFinish(e),this.props.siteData.isUsingUrlFormat(y.siteConstants.URL_FORMATS.SLASH)||this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full,e),this.siteAPI.fireGoogleRemarketing(),this.siteAPI.reportYandexPageHit(this.props.siteData.currentUrl.full),this.isChangingUrlPage=!1,this.notifyAspects(this.supportedEvents.urlPageChange),ee(this.siteAPI)}this.siteAPI.setComponentRenderEnd("WixSiteReact_"+this.props.rootId),p.loggingUtils.performance.finish(p.loggingUtils.performanceMetrics.RE_RENDER)},updateSiteHeadTag:function(e){this.props.updateHeadMethod&&this.props.updateHeadMethod(this.props.siteData,this.props.rootId,e)},componentWillUnmount:function(){this.dead=!0,this.siteAPI.onSiteUnmount()}})}.apply(t,n))||(e.exports=s)},380:function(e,t,i){var n,s;n=[i(0),i(18),i(27),i(47),i(4),i(6),i(13),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o){"use strict";var c=a.utils.createReactElement;return e.memoize(function(e){return n.observer(t({displayName:"wixAdsRenderer",componentWillMount:function(){var t=e.getSiteData();e.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS),this.disposeReaction=i.reaction(function(){return{isHeaderFixedPosition:s.siteDataUtils.isHeaderFixedPosition(t),isPortrait:t.isPortrait,isWixAdsAllowed:s.siteDataUtils.isWixAdsAllowed(t),screenSize:t.getScreenSize()}},function(){e.registerReLayoutPending(s.constants.COMP_IDS.WIX_ADS),e.reLayoutIfPending()},{context:this,name:"WixADS_measure_change"})},componentWillUnmount:function(){this.disposeReaction()},componentDidMount:function(){e.setComponentRenderEnd(s.constants.COMP_IDS.WIX_ADS)},componentWillReact:function(){e.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS)},componentWillUpdate:function(){e.setComponentRenderStart(s.constants.COMP_IDS.WIX_ADS)},componentDidUpdate:function(){e.setComponentRenderEnd(s.constants.COMP_IDS.WIX_ADS)},render:function(){var t=e.getSiteData(),i=t.isMobileView(),n="preview"===t.viewMode,a=s.constants.COMP_IDS.WIX_ADS,u=s.siteDataUtils.isWixAdsAllowed(t),p=s.siteDataUtils.isHeaderFixedPosition(t),l=s.wixUserApi.getLanguageFromSiteData(t),d=t.getMetaSiteId();if(!t.shouldShowWixAds())return null;var g=o.isOpen("displayWixAdsNewVersion",t)?"wysiwyg.viewer.components.WixFreemiumBanner2":"wysiwyg.viewer.components.WixFreemiumBanner",h=r.compFactory.getCompReactClass(g,t.compFactoryRuntimeState);return c(h,{wixAdsId:a,isMobileView:i,isPreview:n,isWixAdsAllowed:u,language:l,metaSiteId:d,isHeaderFixedPosition:p})}}))})}.apply(t,n))||(e.exports=s)},381:function(e,t,i){var n,s;n=[i(74),i(0),i(5),i(18),i(12),i(27),i(1),i(13),i(6)],void 0===(s=function(e,t,i,n,s,a,r,o,c){"use strict";function u(e,t){var i=e.getRootIdsWhichShouldBeRendered();return!r.componentUtils.shouldBeRendered(i,t)}function p(){var e=this.props.compBehaviors;if(e){var t=this.props.rootId,i=this.props.siteAPI.getSiteAspect("actionsAspect"),n=this.props.siteAPI.getSiteAspect("behaviorsAspect");i.registerBehaviors(t,t,e),n.setBehaviorsForActions(n.convertBehaviors(e,t),t,t)}}var l=n({displayName:"WixPageReact",propTypes:{siteAPI:i.shape({resetRuntimeOverrides:i.func.isRequired,setComponentRenderEnd:i.func.isRequired,getSiteAspect:i.func.isRequired,getSiteData:i.func.isRequired,setComponentRenderStart:i.func.isRequired}),componentType:i.string.isRequired,mobxObserverWrapperProps:i.object.isRequired,structure:i.object,rootId:i.string,onRendered:i.func},getDefaultProps:function(){return{onRendered:t.noop}},mixins:[c.mixins.baseCompMixin,c.mixins.animationsMixin],getInitialState:function(){return{allContextsReady:this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()}},componentWillMount:function(){this.childrenAnimations={},this.transitioningChildrenPrevLayout={},this.compRefs={},this.mobxObserverWrapperProps=t.assign({},this.props.mobxObserverWrapperProps,{propsForSitePages:{pageClass:l},addComponentRef:this.addComponentRef}),this.disposeReaction=a.reaction(function(){return this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()},function(e){this.state.allContextsReady!==e&&this.setState({allContextsReady:e})},{context:this}),p.call(this);var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},addComponentRef:function(e,t){e?this.compRefs[t]=e:delete this.compRefs[t]},componentWillUnmount:function(){this.props.siteAPI.resetRuntimeOverrides(this.props.rootId),this.disposeReaction()},componentWillUpdate:function(){u(this.props.siteAPI,this.props.rootId)&&this.props.siteAPI.resetRuntimeOverrides(this.props.rootId),p.call(this);var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderStart("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},componentDidUpdate:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},componentDidMount:function(){var e=this.props.siteAPI.getSiteData();this.props.siteAPI.setComponentRenderEnd("WixPageReact_"+this.props.rootId+"_"+e.getViewMode())},render:function(){var t=this;if(!this.state.allContextsReady)return this.renderedPage||e("div");var i={id:this.props.rootId,key:this.props.rootId,"data-ref":this.props.rootId,rootId:this.props.rootId,mobxObserverWrapperProps:this.mobxObserverWrapperProps,compRef:function(e){t._comp=e}},n=function(e,t){return e&&o.compFactory.getCompClass(e,!1,t)||c.utils.createReactElement.bind(null,"div")}(this.props.componentType,this.props.siteAPI.getSiteData().compFactoryRuntimeState);return this.renderedPage=n(i),this.renderedPage},updateVisibility:function(){var e=this.props.siteAPI,t=this.props.rootId;e.getSiteAspect("WidgetAspect").isContextReady(t)&&!u(e,t)&&(s.findDOMNode(this._comp).style.visibility="",this.props.onRendered())},hide:function(){s.findDOMNode(this._comp).style.visibility="hidden"},componentDidLayout:function(){this.updateVisibility()}});return l}.apply(t,n))||(e.exports=s)},382:function(e,t,i){var n,s;n=[i(0),i(1),i(3),i(25),i(256)],void 0===(s=function(e,t,i,n,s){"use strict";function a(t){s.call(this,t,"Site Aspect"),e.bindAll(this,["getComponentById","getRootOfComponentId","getCurrentPage","getCurrentPopup","getAllRenderedRoots","getMasterPage","getPageById","getPageComponents","registerToMessage","registerToSiteReady","registerToScroll","registerToResize","registerToOrientationChange","registerToModeChange","registerToSlideChange","registerToComponentDidMount","registerToSiteWillMount","registerToSiteWillUpdate","registerToDidLayout","unRegisterFromDidLayout","registerToWillUnmount","registerToUrlPageChange","registerToOnRendered","registerToSSSRSuccess","registerToRenderedRootsChange","registerToAddedRenderedRootsDidLayout","registerToKeyDown","registerToWindowTouchEvent","registerToFocusEvents","registerToVisibilityChange","registerToDocumentClick","registerToSvSessionChange","registerToSiteMetadataChange","getSiteAPI","getSiteContainer","scrollSiteBy","scrollSiteTo","getWindowSize","getDocumentSize","getSiteScroll","getCurrentPopupScroll","getBrowserFlags","getVisibilityState","setSiteRootHiddenState","notifyAspects","registerToFakeModeChange"])}return a.prototype=e.create(s.prototype,{constructor:a}),a.prototype.getComponentById=function(e,t){var i=null,n=t||this.getRootOfComponentId(e);return n&&(i=this._site.getComponentByPageAndCompId(n,e)),i||(i=this._site.getAspectsContainer().refs[e]||this._site.getAspectsContainer().refs.aspectPortal.refs[e]),i||"SITE_BACKGROUND"!==e&&"WIX_ADS"!==e||(i=this._site.compRefs[e]),i||null},a.prototype.getRootOfComponentId=function(t){var i=this._site.getPageOfComp(t),n=i&&i.props.rootId;if(n)return n;var s=this._site.getMasterPage();return e.forEach(this._site.getPageRefs(s),function(e,i){if(this._site.getComponentByPageAndCompId(i,t))return n=i,!1}.bind(this)),n||null},a.prototype.getParentComponentType=function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers(),s=n.components,a=this.getSiteData().getViewMode(),r=s.getPage(t,a),o=s.getComponent(e,r),c=s.getParent(o),u=n.getInnerPointer(c,"componentType");return i.get(u)},a.prototype.getCurrentPage=function(){return this._site.getPrimaryPage()},a.prototype.getCurrentPopup=function(){return this._site.getCurrentPopup()},a.prototype.getAllRenderedRoots=function(){return e.map(this.getAllRenderedRootIds,this.getPageById.bind(this))},a.prototype.getMasterPage=function(){return this._site.getMasterPage()},a.prototype.getPageById=function(e){return this._site.getPageById(e)},a.prototype.getPageComponents=function(e){return this._site.getComponentsByPageId(e)},a.prototype.getComponentByPageAndCompId=function(e,t){return this._site.getComponentByPageAndCompId(e,t)},a.prototype.registerToMessage=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.message,e)},a.prototype.registerToSiteReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,e)},a.prototype.registerToScroll=function(e){var t=this.getSiteAPI().getSiteData();this._site.registerAspectToEvent(this._site.supportedEvents.scroll,function(){var i=window.document.body.scrollHeight>window.innerHeight,n={x:window.pageXOffset||(t.isMobileView()?window.document.scrollLeft:window.document.body.scrollLeft),y:window.pageYOffset||(t.isMobileView()?window.document.scrollTop:window.document.body.scrollTop),progressY:i?window.scrollY/(window.document.body.scrollHeight-window.innerHeight-1):0};e(n)})},a.prototype.registerToResize=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.resize,e)},a.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},a.prototype.registerToModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,e)},a.prototype.registerToSlideChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.slideChange,e)},a.prototype.registerToComponentDidMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.mount,e)},a.prototype.registerToSiteWillMount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willMount,e)},a.prototype.registerToSiteWillUpdate=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.willUpdate,e)},a.prototype.registerToDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,e)},a.prototype.unRegisterFromDidLayout=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,e)},a.prototype.registerToWillUnmount=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,e)},a.prototype.registerToUrlPageChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.urlPageChange,e)},a.prototype.registerToOnRendered=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.onRendered,e)},a.prototype.registerToOnFullyRendered=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.fullyRendered,e)},a.prototype.registerToSSSRSuccess=function(t){var i=this;this.registerToMessage(function(n){if(e.get(n,"data")===i._site.supportedEvents.sssrSuccess)return t()})},a.prototype.registerToRenderedRootsChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.renderedRootsChanged,e)},a.prototype.registerToAddedRenderedRootsDidLayout=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.addedRenderedRootsDidLayout,e)},a.prototype.registerToKeyDown=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,e)},a.prototype.registerToKeyUp=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.keyup,e)},a.prototype.registerToWindowTouchEvent=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e.toLowerCase()],t)},a.prototype.registerToFocusEvents=function(e,t){this._site.registerAspectToEvent(this._site.supportedEvents[e],t)},a.prototype.registerToVisibilityChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,e)},a.prototype.registerToDocumentClick=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.click,e)},a.prototype.registerToOrientationChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,e)},a.prototype.registerToFakeModeChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.fakeModeChange,e)},a.prototype.registerToSvSessionChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.svSessionChange,e)},a.prototype.registerToSiteMetadataChange=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.siteMetadataChange,e)},a.prototype.registerToAspectsReady=function(e){this._site.registerAspectToEvent(this._site.supportedEvents.aspectsReady,e)},a.prototype.unregisterFromAspectsReady=function(e){this._site.unregisterAspectFromEvent(this._site.supportedEvents.aspectsReady,e)},a.prototype.getSiteAPI=function(){return this._site.siteAPI},a.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()},a.prototype.scrollSiteBy=function(i,n,s){this.getSiteContainer().scrollBy(i,n),e.isFunction(s)&&t.animationFrame.request(s)},a.prototype.scrollSiteTo=function(e,t){this.getSiteContainer().scrollTo(e,t)},a.prototype.getWindowSize=function(){var e=this.getSiteContainer();return{height:e.innerHeight,width:e.innerWidth}},a.prototype.getDocumentSize=function(){return{height:window.document.documentElement.clientHeight||window.document.body.clientHeight,width:window.document.documentElement.clientWidth||window.document.body.clientWidth}},a.prototype.getSiteScroll=function(){var e=this.getSiteContainer()||{};return{x:e.pageXOffset||e.scrollX||0,y:e.pageYOffset||e.scrollY||0}},a.prototype.getCurrentPopupScroll=function(){var t=window.document.getElementById("POPUPS_ROOT");return{x:e.get(t,"scrollLeft",0),y:e.get(t,"scrollTop",0)}},a.prototype.getBrowserFlags=function(){return this.getSiteAPI().getSiteData().browserFlags()},a.prototype.getVisibilityState=function(){return{hidden:"undefined"!=typeof document&&window.document.hidden}},a.prototype.setSiteRootHiddenState=function(e,t){this._site.setState({siteRootHidden:e},t)},a.prototype.notifyAspects=function(e){for(var t,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];(t=this._site).notifyAspects.apply(t,[e].concat(n))},a.prototype.updateAspectGlobalData=function(t,i){var n=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectGlobalData(t),a=n.get(s)||{};n.set(s,e.assign(a,i))},a.prototype.setAspectGlobalData=function(e,t){var i=this.getDisplayedDAL(),n=this.getPointers().siteAspects.getAspectGlobalData(e);i.set(n,t)},a.prototype.removeAspectGlobalData=function(e){var t=this.getDisplayedDAL(),i=this.getPointers().siteAspects.getAspectGlobalData(e);t.isExist(i)&&t.remove(i)},a.prototype.updateAspectComponentData=function(t,i,n){var s=this.getDisplayedDAL(),a=this.getPointers().siteAspects.getAspectComponentData(t,i),r=s.get(a)||{},o=e.assign({},r,n);e.isEqual(r,o)||s.set(a,o)},a.prototype.setAspectComponentData=function(e,t,i){var n=this.getDisplayedDAL(),s=this.getPointers().siteAspects.getAspectComponentData(e,t);n.set(s,i)},a.prototype.initHostLibsAspect=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=n.getHostLibsAspectConstructor(e),r=i.aspectPropsConnector.connect(a,t,this.getSiteData().isDebugMode());return new(Function.prototype.bind.apply(r,[null].concat([this],function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(s))))},a.prototype.setSiteRootAriaHiddenState=function(e){this._site.setState({isAriaHidden:e})},a}.apply(t,n))||(e.exports=s)},383:function(e,t,i){var n,s;n=[i(0),i(1),i(51),i(13),i(4),i(384)],void 0===(s=function(e,t,i,n,s,a){"use strict";return function(r){var o=r.getSiteData(),c=r.getHostLibsAspectConstructor("WidgetAspect"),u=r.getSiteDataAPI();return{isMobileView:o.isMobileView(),currentUrlPageId:o.getCurrentUrlPageId(),isExperimentOpen:r.isExperimentOpen,initWixCode:!!r.getRenderFlag("initWixCode"),isViewerMode:o.isViewerMode(),handleProcessedBehavior:function(e,t){return r.getSiteAspect("behaviorsAspect").handleProcessedBehavior(e,t)},refreshRenderedContextsData:u.refreshRenderedRootsData.bind(u),shouldUpdateRuntimeModels:function(){return o.isFirstRenderAfterSSR()&&!!o.runtimeModels},componentsFetcher:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return a.apply(void 0,[u].concat(t))},RMIDataAPI:c.modelBuilderDataHelper.getApi(o),getRuntimeModels:function(){return o.runtimeModels},resolveWidgetData:function(e,t){return c.widgetDataResolvers.resolve(e,r,t)},routers:o.getRouters(),setWarmupDataForController:function(e,t){o.userWarmup=o.userWarmup||{},o.userWarmup[e]=t},isFirstRenderAfterSSR:function(){return o.isFirstRenderAfterSSR()},getNavigationDataForRgi:function(){return o.getNavigationDataForRgi()},getSMbySiteExtensionInstanceForRgi:function(){return o.getSMbySiteExtensionInstanceForRgi()},getAppsDataForRgi:function(){return o.getAppsDataForRgi()},getDataByQuery:function(e){return o.getDataByQuery(e)},getAllRenderedContextIds:function(){return r.getAllRenderedRootIds()},getApplicationsForContexts:function(e){return i.appsUtils.getApplications(o.getClientSpecMap(),e,o)},filterContextsToSync:function(i){return e.without(i,t.siteConstants.MASTER_PAGE_ID)},filterValidContextsForLoad:function(i){return e(i).without(t.siteConstants.MASTER_PAGE_ID).filter(o.getPageTitle.bind(o)).value()},filterContextsToActivate:function(t){return e.reject(t,function(e){return!s.siteDataUtils.isPageLoaded(o,e)})},getContextInitData:function(e){return i.appsUtils.getContextInitData(o,e,t.styleUtils)},getContextIdsWhichShouldBeRendered:function(){return e.without(r.getRootIdsWhichShouldBeRendered(),t.siteConstants.MASTER_PAGE_ID)},getCompReactClass:n.compFactory.getCompReactClass,performanceLogger:s.loggingUtils.performance,deferWixCodeMessagesRegistration:!0,getAllPossiblyRenderedContexts:function(){return o.getAllPossiblyRenderedRoots()},getGhostStructure:function(){return o.getGhostStructureData()}}}}.apply(t,n))||(e.exports=s)},384:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.siteConstants,n=i.SITE_STRUCTURE_ID,s=i.PAGES_CONTAINER_ID,a=i.SITE_PAGES_ID,r=i.HEADER_ID,o=i.FOOTER_ID;return function(t,i,c){var u=t.document.getFullAndDisplayedOnlyCompsUnderRoot(i,c),p=[n,s,a];return t.siteData.isApplicationStudio()&&(p=p.concat([r,o,i])),e.omit(u,p)}}.apply(t,n))||(e.exports=s)},385:function(e,t,i){var n;void 0===(n=function(){"use strict";return function(e){var t=e.getSiteData();function i(i,n){var s=function(i){var n=t.getCurrentUrlPageId(),s=t.getViewMode(),a=e.getPointers().components.getPage(n,s);return e.getPointers().components.getComponent(i,a)}(i);n(s,function(t){var i=e.getDisplayedDAL(),n=e.getPointers().componentStructure.getModesDefinitions(t);return i.get(n)}(s)[0].modeId)}return{deactivateMode:function(t){i(t,e.deactivateMode)},activateMode:function(t){i(t,e.activateMode)},getComponentByPageAndCompId:function(t){var i=e.getRootOfComponentId(t);return e.getComponentByPageAndCompId(i,t)},getScrollPosition:function(){return e.getSiteAspect("windowScrollEvent").getScrollPosition()},transaction:function(t){e.getActionQueue().runImmediately(t)},getTargetPortal:function(){return e.getPopoversLayer()},registerToDocumentClickEvent:function(t){e.getSiteAspect("windowClickEventAspect").registerToDocumentClickEvent(t)},unRegisterToDocumentClickEvent:function(t){e.getSiteAspect("windowClickEventAspect").unRegisterToDocumentClickEvent(t)},isPopoverAllowed:"preview"===e.getRenderFlag("componentViewMode"),isMobileView:t.isMobileView()}}}.apply(t,[]))||(e.exports=n)},386:function(e,t,i){var n,s;n=[i(6),i(0),i(5),i(18),i(47)],void 0===(s=function(e,t,i,n,s){"use strict";var a=Math.pow(2,31)-2;return s.observer(n({displayName:"blockingLayer",propTypes:{siteAPI:i.object.isRequired,layerName:i.string.isRequired},getStyle:function(){var e=this.props.siteAPI.getRenderFlag(this.props.layerName);return t.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:a},e)},render:function(){return this.props.siteAPI.getRenderFlag(this.props.layerName)?e.utils.createReactElement("div",{style:this.getStyle()}):null}}))}.apply(t,n))||(e.exports=s)},387:function(e,t,i){var n,s;n=[i(0),i(11),i(1),i(108)],void 0===(s=function(e,t,i,n){"use strict";var s=i.logger,a=["useHttps"],r=25,o=9216,c=5,u=2,p=44,l=11;if("undefined"==typeof window)return{init:e.noop,send:e.noop};var d=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited"),g=[5,15,30],h=3,f=10,m=window.performance||{},v=m.timing;v=e.pick(v,["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"]);var y=void 0,S=e.now();function A(t,i){if(!(y<i)){"lastTimeStamp"in t.wixBiSession&&(y=i);var r=t.isPremiumDomain(),o="WixSite"===t.rendererModel.siteInfo.documentType,c=e.assign({},v,{initialTimestamp:t.wixBiSession.initialTimestamp});c=e.mapValues(c,A.bind(null,c.navigationStart||c.initialTimestamp));var u=e.omitBy(t.wixBiSession,function(e,t){return"number"!=typeof e||"et"===t});if(m.getEntries){var p=m.getEntries().filter(function(e){return-1!==e.name.search(/.min.js$/)});if(p.length){var l=v.navigationStart||0,d=e.find(p,function(t){return e.includes(t.name,"skins")});d&&(u.skinsStart=Math.round(l+d.startTime),u.skinsEnd=Math.round(u.skinsStart+d.duration)),u.packagesEnd=0,p.forEach(function(e){u.packagesEnd=Math.max(u.packagesEnd,e.startTime+e.duration)}),u.packagesEnd=Math.round(l+u.packagesEnd)}}u=e.mapValues(u,A.bind(null,u.initialTimestamp||0));var g=t.santaBase.match(/([\d\.]+)\/?$/);g=g&&g[1]||"unknown";var h={isPremium:r?1:0,isWixSite:o?1:0,preClient:JSON.stringify(c),client:JSON.stringify(u),santaVersion:g,timeoutSeconds:i,experiment:function(t){var i=t.rendererModel||t.editorModel||{};return e.reduce(i.runningExperiments,function(e,t,i){var n=a.indexOf(i);return-1===n?e:e+Math.pow(2,n)},0)}(t),pageId:t.getCurrentUrlPageId()},f=c.domainLookupEnd-c.domainLookupStart;isNaN(f)||(h.dnsTime=f);var S=c.responseEnd-c.connectStart;isNaN(S)||(h.responseTime=S),t.wixBiSession.viewerSessionId&&s.reportBI(t,n.PAGE_PERFORMANCE_DATA,h)}function A(e,t){return"number"!=typeof t?t:t?t-e:void 0}}function P(t){var i=[100,200,300,400,500,1e3,2e3,3e3];function a(e){return"_"+e+"k"}var r="_over"+e.last(i)+"k";function o(t){var n=i.map(a).concat([r]);return e.zipObject(n,e.times(n.length,t))}var c=e(window.document.getElementsByTagName("img")).filter(function(t){return e.startsWith(t.src,window.serviceTopology.staticMediaUrl)}).reduce(function(t,n){if(n.complete){var s=function(t,i){var n={url:t.src,hadError:!1,width:t.width,height:t.height,size:t.width*t.height},s=i?i.startTime:0,a=i?i.duration:0;return e.defaults(n,{hadError:!i,start:Math.round(s),end:Math.round(s+a),speed:Math.round(n.size/(a+.01)*100)/100}),n}(n,m.getEntriesByName(n.src)[0]);if(s.hadError)t.errors++;else{var o=function(t){var n=e.findLastIndex(i,function(e){return 1e3*e<t.size})+1;return n<i.length?a(i[n]):r}(s);t.imagesBySize[o]++,t.imagesSamples[o].length<h&&t.imagesSamples[o].push(s)}}else t.loading++;return t},{loading:0,imagesBySize:o(e.constant(0)),imagesSamples:o(function(){return[]}),errors:0});s.reportBI(t,n.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(c)})}function I(t){var a=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing";function u(t){var i=function(e){var t=e.name.replace(a,""),i=t.match(/\.([^/]+).+w_(\d+),h_(\d+),/);if(i){var n=Number(i[2]),s=Number(i[3]);return{url:t,format:i[1],width:n,height:s,size:n*s}}return{}}(t),n={start:Math.round(t.startTime),end:Math.round(t.startTime+t.duration),ttfb:Math.round(t.responseStart-t.requestStart),dns:Math.round(t.domainLookupEnd-t.domainLookupStart),ssl:t.secureConnectionStart?Math.round(t.connectEnd-t.secureConnectionStart):0,speed:t.duration>0?Math.round(i.size/t.duration):0,fileSize:t.fileSize,kbps:t.duration>0?Math.round(1e3*t.fileSize/t.duration):0};return e.assign({},i,n)}var p=e(m.getEntriesByType("resource")).toArray().filter(function(t){return t.duration>r&&e.startsWith(t.name,a)}).value().map(function(t){return new Promise(function(n){function s(i){n(e.assign(t,{fileSize:Math.round(i/1024)}))}var a=t.transferSize||t.encodedBodySize;a?s(a):i.ajaxLibrary.ajax({type:"HEAD",url:t.name,success:function(e,t,i){s(i.getResponseHeader("Content-Length")||0)},error:function(){s(0)}})})});Promise.all(p).then(function(i){var a=e(i).filter(function(e){return e.fileSize>c}).sortBy("fileSize").takeRight(f).map(u).filter(function(e){return e.kbps<=o}).value();if(a.length){var r=e.reduce(a,function(e,t){return{size:e.size+t.fileSize,duration:e.duration+t.end-t.start,ttfb:e.ttfb+t.ttfb}},{size:0,duration:0,ttfb:0});s.reportBI(t,n.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(a),kbps:Math.round(1e3*r.size/r.duration),ttfb:Math.round(r.ttfb/a.length)})}},e.noop)}function D(t,i){if(t.getEntriesByType){var a=e(t.getEntriesByType("resource")).filter({initiatorType:"css"}).map(function(e){var t=e.name;return/\/([^/.]*)\.(woff2|woff|ttf|svg|eot)(?:\??#[\w\-\d]*)?$/.exec(t)}).compact().map(function(e){return{name:e[1],format:e[2]}}).value(),r=a.filter(function(e){return"file"===e.name}).length,o=a.length-r;s.reportBI(i,n.FONTS_DOWNLOADED,{wixFonts:o,userFonts:r})}}return{init:function(i){d||(s.shouldSendReport(i,n.USER_INTERACTION)&&setTimeout(function(){!function(i){if(t){var a=function(r){t(window).off(".bi"),a=e.noop,s.reportBI(i,n.USER_INTERACTION,{type:r})},r=0,o=0,c=0;t(window).on({"keydown.bi":function(){++r>u&&a("key")},"mousemove.bi":function(){++o>p&&a("mouse")},"scroll.bi":function(){++c>l&&a("scroll")}})}}(i)},300),s.shouldSendReport(i)&&(y=1/0,S=e.now(),e.forEach(g,function(e){setTimeout(A.bind(null,i,e),1e3*e)}),m.getEntriesByName&&setTimeout(function(){P(i),I(i),D(m,i)},10500)))},send:function(t){d||s.shouldSendReport(t,n.PAGE_PERFORMANCE_DATA)&&setTimeout(function(){A(t,Math.round((e.now()-S)/1e3))},300)},reportFontsLoaded:D}}.apply(t,n))||(e.exports=s)},388:function(e){e.exports={SITE_MEMBER_LOGIN_SUCCESS:{eventId:520,adapter:"hed",params:{c1:"userName"}},PAGE_PERFORMANCE_DATA:{eventId:350,adapter:"ugc-viewer",params:{c1:"preClient",c2:"client",c3:"santaVersion",i1:"timeoutSeconds",is_premium:"isPremium",is_wixsite:"isWixSite",dns_time:"dnsTime",response_time:"responseTime",experiment:"experiment",page_id:"pageId"},sampleRatio:1},LOAD_IMAGES_DATA:{eventId:341,adapter:"mlt",params:{c1:"imagePerf"}},LP_BUTTON_CLICK:{eventId:352,adapter:"ugc-viewer",params:{postSignUp:"postSignUp",postLogin:"postLogin",target_url:"targetUrl",button_name:"buttonName",active_fold:"activeFold",total_folds:"totalFolds",text:"text",component_id:"componentId",loginCompName:"loginCompName"},wixSiteSampleRatio:0},IMAGES_DOWNLOAD:{eventId:353,adapter:"ugc-viewer",params:{imagePerf:"imagePerf",kbps:"kbps",ttfb:"ttfb"}},MONOTYPE_FONTS_USED_ON_SITE:{eventId:355,adapter:"ugc-viewer",params:{}},USER_INTERACTION:{eventId:368,adapter:"ugc-viewer",params:{type:"type",time:"time"}},UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}},CLICK_TO_ACTION:{eventId:372,adapter:"ugc-viewer",params:{data:"data",field_type:"field_type",input_type:"input_type"}},SITE_MEMBER_OPEN_LOGIN_OR_SIGNUP_DIALOGS:{eventId:601,adapter:"site-members",src:5,params:{action:"action",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_EXIT_DIALOG:{eventId:602,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_SUBMIT_BUTTON:{eventId:603,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_CLICKED_FORGOT_PASSWORD:{eventId:604,adapter:"site-members",src:5,params:{visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_AUTH_DIALOG_OPENED:{eventId:607,adapter:"site-members",src:5,params:{context:"context",app_id:"app_id",initator:"initator",visitor_id:"visitor_id",has_social:"has_social"}},SITE_MEMBER_NOTIFICATION_OPEN:{eventId:608,adapter:"site-members",src:5,params:{notification_name:"notification_name",visitor_id:"visitor_id"},sampleRatio:1},SITE_MEMBER_CLICK_LINK:{eventId:609,adapter:"site-members",src:5,params:{context:"context",name:"name",visitor_id:"visitor_id"},sampleRatio:1},CDN_PERFORMANCE:{eventId:379,adapter:"ugc-viewer",params:{small_name:"smallName",small_dns_time:"smallDnsTime",small_connect_time:"smallConnectTime",small_ttfb:"smallTtfb",small_response_time:"smallResponseTime",small_kbps:"smallKbps",large_name:"largeName",large_dns_time:"largeDnsTime",large_connect_time:"largeConnectTime",large_ttfb:"largeTtfb",large_response_time:"largeResponseTime",large_kbps:"largeKbps"}},VECTOR_ART_VIEWER_FIXER:{eventId:322,adapter:"ugc-viewer",params:{}},PAGE_COMP_TYPES_LIST:{eventId:390,adapter:"ugc-viewer",params:{first_page:"firstPage",comp_list:"compList"}},DATA_FIXED_PAGE_REQUEST:{eventId:349,adapter:"ugc-viewer",sampleRatio:1,params:{stage:"stage",pn:"pageNumber",master_page:"masterPage",loading_time:"duration",cdn:"cdn",cdn_hit:"cdnHit"}},FONTS_DOWNLOADED:{eventId:417,adapter:"ugc-viewer",params:{wix_fonts:"wixFonts",user_fonts:"userFonts"}}}},389:function(e,t,i){var n,s;n=[i(0),i(4),i(843),i(390),i(257),i(25)],void 0===(s=function(e,t,i,n,s,a){"use strict";n.register(i);var r=t.getPackagesForComponent,o=t.allPackages,c=t.packagesToCallbacks,u={},p="PENDING",l="LOADED",d=function(e){u[e]||(u[e]={status:p})},g=function(e){return u[e]&&u[e].status===l},h=function(e){u[e].status=l},f=function(e,t){var i=e.santaComponent,n=e.componentType,a=e.component,r=i||a;r&&s.register(n,r),r&&r.getComponentSkins&&t.addBatch(r.getComponentSkins())},m=function(){return requirejs.toUrl("wix-ui-santa")+"/"};return{isComponentLoaded:function(e){return g(e)},exists:function(e,t){return r(e,t).length>0||n.exists(e)},prefetchComponents:function(i,s){t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.PREFETCH_START);var a=i.filter(n.exists),o=i.filter(function(t){return!e.includes(a,t)});a.forEach(function(e){return n.load(e,m())});var c=e(o).flatMap(function(e){return r(e,s)}).uniq().value();c.length>0&&requirejs(c,e.noop),t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.PREFETCH_END)},loadAndRegisterAll:function(){return t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.LOAD_AND_REGISTER_All_START),new Promise(function(e){return requirejs(["skins"],e)}).then(function(e){return Promise.all([function(e,t){return n.loadAll(t).then(function(t){return t.forEach(function(t){return t.forEach(function(t){return f(t.default,e)})})})}(e.skinsMap,m()),function(e){var t=o(),i=c(t);return new Promise(function(n){return requirejs(t,function(){for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];t.forEach(function(t,n){return i[t](o[n],s.register,a.registerHostLibsAspect,e.addBatch)}),n()})})}(e.skinsMap)])}).then(function(){return t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.LOAD_AND_REGISTER_All_END)})},loadAndRegister:function(e,i){return t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.LOAD_AND_REGISTER_START),d(e),new Promise(function(e){return requirejs(["skins"],e)}).then(function(t){return n.exists(e)?function(e,t,i){return n.load(e,i).then(function(e){return e.forEach(function(e){return f(e.default,t)})})}(e,t.skinsMap,m()):function(e,t){var i=c(e);return new Promise(function(n){return requirejs(e,function(){for(var r=arguments.length,o=Array(r),c=0;c<r;c++)o[c]=arguments[c];e.forEach(function(e,n){return i[e](o[n],s.register,a.registerHostLibsAspect,t.addBatch)}),n()})})}(r(e,i),t.skinsMap)}).then(function(){h(e),t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.VIEWER_COMPS_SERVICE.LOAD_AND_REGISTER_END)})}}}.apply(t,n))||(e.exports=s)},390:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t=[];return{register:function(e){e&&t.push(e)},reset:function(){t.length=0},exists:function(i){return e.some(t,function(e){return!0===e.exists(i)})},load:function(i,n){var s=e.find(t,function(e){return!0===e.exists(i)});if(s)return s.load(i,n)},loadAll:function(i){return Promise.all(e.invokeMap(t,"loadAll",i)).then(function(t){return e.flatten(t)})}}}.apply(t,n))||(e.exports=s)},391:function(e,t,i){var n,s;n=[i(1),i(4),i(0),i(393),i(395),i(854),i(392),i(396),i(855),i(856),i(857),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p,l){"use strict";var d=new e.SiteDataPrivates,g=i.keyBy(["wixapps","externalStyles","ghostStructureData"]);function h(e,t,s,a,r,o,c,u,p){function d(){e.runImmediately(function(){if(i.size(s.failedRequests)&&s.isInSSR())c(u);else{p&&c(u);var l=n.getNeededRequests(s,a,r),d=i.filter(l,function(e){return"pagesData"===i.head(e.destination)&&2===e.destination.length});u=(u||[]).concat(i.map(d,"destination[1]")),0!==l.length||p?t.loadBatch(l,h.bind(null,e,t,s,a,r,o,c,u)):c(u)}})}s.isViewerMode()&&l.isOpen("importScriptsOpt",s)&&o&&o.isAppInitiated()?setTimeout(d,10):d()}function f(e,t,n,s){(function(e,t,n,s){if(m(n)){i.set(t,n,s);var a=n[1];(function(e,t){"masterPage"===e||t.siteData.getMasterPageData()?"masterPage"===e?(this.updateDisplayedJsonAfterPageLoaded(e),i.forEach(this.pagesPendingForMasterPage,this.updateDisplayedJsonAfterPageLoaded.bind(this)),this.pagesPendingForMasterPage=[]):this.updateDisplayedJsonAfterPageLoaded(e):this.pagesPendingForMasterPage.push(e)}).call(this,a,e)}else v(n)?i.set(e.siteData,n,s):e.displayedDal.setByPath(n,s)}).call(this,e,t,n,s),"pagesData"!==i.head(n)&&e.dataLoadedCallback&&e.dataLoadedCallback(n,s)}function m(e){return"pagesData"===i.head(e)&&i.size(e)>1}function v(e){var t=e[0];return!!g[t]}function y(t,n){if(n){var s=t.fullPagesData.pagesData[n],a=t.siteData.isMobileView(),r=t.pointers.activeModes.getPageActiveModes(n),o=t.displayedDal.get(r),c=e.modes.resolveCompActiveModesRecursive(s.structure,o,a,s.data.component_properties);return t.displayedDal.set(r,c),!i.isEqual(o,c)}}function S(t,n,l){t.displayedJsonUpdater=function(e,t){var i=e.fullPagesData,n=e.cache,a=e.displayedDal,r=e.pointers,o=n.getBoundCacheInstance(!0);return new s(i,a,o,r,t)}(t,this.updateDisplayedNodesLayout.bind(this)),t.dataLoadedCallback=null,this.siteData=t.siteData,this.eventsManager=l,this.store=new e.Store(function(e){var t=e.fullPagesData,n=e.displayedDal,s=e.siteData;return function(e){return m(e)?i.get(t,e):v(e)?i.get(s,e):n.getByPath(e)}}(t),n),this.store.registerDataLoadedCallback(i.bind(f,this,t,t.fullPagesData)),this.siteData.setStore(this.store),this._displayedJsonUpdateCallbacks=[],this.pagesPendingForMasterPage=[],this.actionQueue=new u(this.siteData.hasDebugQueryParam()||this.siteData.isQaMode()),this.document=a(t);var d=r.createRuntimeDal(t.siteData,this,t.displayedDal,t.pointers,this.eventsManager);t.runtimeToDisplayed=d.runtimeToDisplayed,t.resetRuntimeData=d.resetRuntime,t.resetRuntimeNonDisplayedPages=d.resetNonDisplayedPages,t.resetPage=d.resetPage,t.getRuntimeCompsData=d.getAllCompsData,this.runtime=d.runtimeDal,this.anchors=new o(this.siteData,t.pointers,t.displayedDal),this.originalValues=new c(this.siteData),this.modes=new p(this.siteData,this.createDisplayedPage.bind(this),this.createDisplayedNode.bind(this),t.pointers,t.displayedDal,this.actionQueue)}return S.prototype={registerDataLoadedCallback:function(e){d.get(this.siteData).dataLoadedCallback=e},refreshRenderedRootsData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.noop,t=d.get(this.siteData),n=this.siteData.getFocusedRootId(),s=this.siteData.getExistingRootNavigationInfo(n);h(this.actionQueue,this.store,t.siteData,t.fullPagesData,s,t.wixCodeAppApi,e)},registerDisplayedJsonUpdateCallback:function(e){this._displayedJsonUpdateCallbacks.push(e)},loadPage:function(e,t){var n=this,s=d.get(this.siteData);h(this.actionQueue,this.store,s.siteData,s.fullPagesData,e,s.wixCodeAppApi,function(a){e.pageId&&!i.includes(a,e.pageId)&&n.updateDisplayedJsonAfterPageLoaded(e.pageId,e.isLanguageChange),i.forEach(a,function(e){if(s.dataLoadedCallback){var t=s.fullPagesData.pagesData[e];s.dataLoadedCallback(["pagesData",e],t)}}.bind(n)),t()},[])},resetRuntimeOverrides:function(e,t){var i=d.get(this.siteData);return t?i.resetPage(e):i.resetRuntimeNonDisplayedPages()},removeResolvedDataMapForPage:function(e){this.siteData.resolvedDataMaps&&this.siteData.resolvedDataMaps.delete(e)},updateActiveSOSPModes:function(e){e=e||this.siteData.getCurrentUrlPageId();var n=d.get(this.siteData),s=function(e){var n=d.get(e),s=n.pointers.components.getMasterPage(e.getViewMode()),a=n.pointers.componentStructure.getModes(s);if(!a)return[];if(a){var r=i.get(n.displayedDal.get(a),"definitions",[]);return i.filter(r,{type:t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}}(this.siteData);if(s){var a=n.pointers.components.getMasterPage(this.siteData.getViewMode()),r=this.modes.getPageActiveModes(t.siteConstants.MASTER_PAGE_ID),o=void 0,c=void 0;i.forEach(s,function(t){var n=function(e,t){var i=d.get(e),n=t.settings.pagesGroupId.replace("#",""),s=i.pointers.data.getDataItem(n,"masterPage");return i.displayedDal.get(s).pages}(this.siteData,t);i.includes(n,"#"+e)?r[t.modeId]||(o=t.modeId):r[t.modeId]&&(c=t.modeId)}.bind(this)),o&&c?this.modes.switchModes(a,c,o):o?this.modes.activateMode(a,o):c&&this.modes.deactivateMode(a,c)}},updateDisplayedJsonAfterPageLoaded:function(e,t){var i=d.get(this.siteData),n=i.pointers.activeModes.getPageActiveModes(e);i.displayedDal.set(n,{}),t?this.createDisplayedPages():this.createDisplayedPage(e),e===this.siteData.getCurrentUrlPageId()&&this.updateActiveSOSPModes(e)},createDisplayedPage:function(e){var t=d.get(this.siteData),i=t.fullPagesData.pagesData[e];if(!i){var n=t.pointers.page.getPagePointer(e);return n&&t.displayedDal.isExist(n)&&t.displayedDal.remove(n),!1}var s=t.pointers.activeModes.getAllActiveModes();return this.actionQueue.runImmediately(function(){y(t,e);var n=t.displayedDal.get(s);t.displayedJsonUpdater.updateDisplayedRoot(n,i,e,{rendererModel:t.siteData.rendererModel}),this.anchors.createPageAnchors(i.structure.id),t.runtimeToDisplayed.updateAll(t.getRuntimeCompsData())}.bind(this)),!0},updateDisplayedNodesLayout:function(n){var s=this;if(t.layoutUtils.getLayoutMechanism(this.siteData)!==e.constants.LAYOUT_MECHANISMS.MESH){var a=d.get(this.siteData),r=this.siteData.getViewMode(),o=n?[n]:i(this.siteData.getAllPossiblyRenderedRoots()).map(function(e){return a.pointers.components.getPage(e,r)}).compact().value();i.forEach(o,function(t){var n=a.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(t,c.bind(null,a));i.forEach(n,function(t){var i=c(a,t),n=s.siteData.getScreenSize(),r=s.siteData.getSiteWidth(),o=a.pointers.getInnerPointer(t,["layout"]),u=a.displayedDal.get(o),p=e.positionAndSize.getPositionAndSize(u,n,n,r);i.setLayout(a.pointers,a.displayedDal,t,null,p)})})}function c(e,i){var n=e.pointers.getInnerPointer(i,["componentType"]),s=e.displayedDal.get(n);return t.jsonUpdaterRegistrar.getCompLayouter(s)}},updateDisplayedNodesLayoutAndUpdateAnchors:function(){this.updateDisplayedNodesLayout();var e=this.siteData.getAllPossiblyRenderedRoots();i.forEach(e,i.bind(function(e){this.anchors.createPageAnchors(e)},this))},createDisplayedNode:function(e){this.actionQueue.runImmediately(function(){var t=d.get(this.siteData),n=t.pointers.components.getPageOfComponent(e);y(t,n.id);var s=t.pointers.activeModes.getAllActiveModes(),a=t.displayedDal.get(s);t.displayedJsonUpdater.updateDisplayedJsonByPointer(e,a),this.anchors.createPageAnchors(n.id),t.cache.resetValidations();var r=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e),o=i.pick(t.getRuntimeCompsData(),i.map(r,"id"));t.runtimeToDisplayed.updateAll(o),function(e){var t=d.get(this.siteData).pointers.full.components.getPageOfComponent(e);i.forEach(this._displayedJsonUpdateCallbacks,function(i){i(t.id,e.id)}),this.eventsManager&&this.eventsManager.emit("displayedJsonUpdated",t.id,e.id)}.call(this,e)}.bind(this))},createDisplayedPages:function(){var e=this.siteData.getAllPossiblyRenderedRoots();i.forEach(e,this.createDisplayedPage.bind(this)),this.siteData.observableUpdateIndex++},resetRuntimeData:function(){d.get(this.siteData).resetRuntimeData(),this.createDisplayedPages()},getActionQueue:function(){return this.actionQueue},setRenderRealtimeConfigItem:function(e,t){var i=d.get(this.siteData),n=i.pointers.general.getRenderRealtimeConfigItem(e);return i.displayedDal.set(n,t)}},{createSiteDataAPIAndDal:function(e,n,s){var a=t.DALFactory.getFullPagesData(e,i.pick(e,"pagesData")),r=t.DALFactory.getCacheInstance(e,a),o=function(e,t,n,s,a,r){var o={};return o.fileChangeCallback=i.noop,o.displayedDal=t.dal,o.pointers=t.pointers,o.cache=n,o.fullPagesData=s,o.siteData=e,o.displayedDal.setByPath(["pagesData"],{}),o.siteDataAPI=new S(o,a,r&&r.eventsManager),o.wixCodeAppApi=r&&r.wixCodeAppApi,o}(e,function(e,i){return{dal:t.DALFactory.getInstance(e),pointers:new t.pointers.DataAccessPointers(i)}}(e,r),r,a,n,s);return d.set(e,o),i.forEach(e.getAllPossiblyRenderedRoots(),function(e){o.siteDataAPI.createDisplayedPage(e)}),i.clone(o)}}}.apply(t,n))||(e.exports=s)},392:function(e,t,i){var n,s;n=[i(0),i(1),i(844),i(845)],void 0===(s=function(e,t,i,n){"use strict";var s=["height","width"],a=t.constants.DATA_TYPES,r=t.constants.PAGE_DATA_DATA_TYPES,o={data:"dataChange",props:"propsChange",design:"designChange"},c=["runtime","components"];function u(e){return c.concat([e])}function p(e){return u(e).concat("state")}function l(e){return u(e).concat("overrides")}function d(e){return l(e).concat("props")}function g(e){return l(e).concat("data")}function h(e,t){var i=l(e).concat("style");return t?i.concat(t):i}function f(e){return l(e).concat("design")}function m(e){return l(e).concat("layout")}function v(e){return l(e).concat("actionsBehaviors")}function y(e){return["runtime","popups",e]}function S(e){return y(e).concat("opened")}function A(e){return y(e).concat("context")}function P(t,i){return e.isEqual(i,e.pick(t,e.keys(i)))}function I(t,s,a,r,o){this._siteData=t,this._siteDataApi=s,this._pointers=r,this._displayedDal=a,this._changeListeners=[],this._isFirstSetToRuntime=!0,this.snapshotId=0,this._roots=[],this._pointersCache=new i(r,a,s.document),this._runtimeToDisplayed=new n(t,a,r,this._pointersCache,s.document),this._eventsManager=o,this._siteDataApi&&this._siteDataApi.registerDisplayedJsonUpdateCallback(this._pointersCache.reset.bind(this._pointersCache)),this._displayedDal&&!this._displayedDal.isPathExist(c)&&D.call(this),e.bindAll(this,["registerChangeListener","getCompStructure","setCompState","removeCompState","getCompState","getCompType","getCompLayout","updateCompLayout","getCompDesign","setCompDesign","getCompData","setCompData","updateCompStyle","getCompStyle","getCompConnections","getCompProps","setCompProps","getActionsAndBehaviors","addActionsAndBehaviors","removeActionsAndBehaviors","getCompName","getBoundingClientRect","getPageId","getParentId","isDisplayed","hasBeenPopupOpened","markPopupAsBeenOpened","getDynamicPageData","setPopupContext","getPopupContext","getDisplayedOnlyCompsForFullComp","getChildrenIds","getAncestorOfType","clearCompRuntimeOverrides"])}function D(){var t=e.reduce(e.get(this._siteData,c),function(t,i,n){if(!e.has(i,"state"))return t;var s=e.pick(i,"state");return e.set(t,[n],s)},{});this._siteData.runtime={},e.set(this._siteData,c,t),this._pointersCache.reset()}function _(t,i){return e.get(t,e.head(i))}function C(t){return e.drop(t)}function E(t,i,n){var s=_(t,i),a=C(i);return e.get(s,a,n)}function T(t,i,n){this._isFirstSetToRuntime&&!t.isFirstRenderAfterSSR()&&t.ssr.runtime&&(this._isFirstSetToRuntime=!1,this._siteDataApi.resetRuntimeData());var s=_(t,i),a=C(i);e.set(s,a,n)}function b(i,n,s,a){var c=this;return this._siteDataApi.getActionQueue().runImmediately(function(){var u=O.call(c,n),p=E(c._siteData,s,{}),l=e.assign({},p,i);if(T.call(c,c._siteData,s,l),!u)return null;var d=function(i){var n=!1;if(!t.displayedOnlyStructureUtil.isDisplayedComponent(i.id)){var s=this._pointers.components.getAllDisplayedOnlyComponents(i);n=!(1===s.length&&e.isEqual(s[0],i))}return n}.call(c,u),g=x.call(c,u),h=void 0;if(d){var f=c._pointersCache.getCompDataItemPointer(u,a,!0);h=f?"#"+f.id:null}else h=c._pointersCache.getCompDataId(u,a);var m=c._siteData.getDataByQuery(h,g,r[a]);if(c._runtimeToDisplayed.updateDataItem(u,a,l,d),!P(m,i)){var v={type:o[a],value:i};w.call(c,n,v,m)}}),++this.snapshotId}function w(t,i,n){e.forEach(this._changeListeners,function(e){e(t,i,n)}),this._eventsManager&&this._eventsManager.emit("runtimeCompChange",t,i,n)}function R(e,t,i){var n=O.call(this,e);return n?this._pointersCache.getCompDataItemPointer(n,t,i):null}function M(e,t){var i=this._pointers.data.getPageIdOfData(e);return this._siteData.getDataByQuery(e.id,i,r[t])}function x(e){return this._pointers.full.components.getPageOfComponent(e).id}function O(e){return this._pointersCache.getCompPointer(e,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots())}return e.assign(I.prototype,{registerChangeListener:function(e){this._changeListeners.push(e)},getCompStructure:function(e){var t=O.call(this,e);return t&&this._displayedDal.get(t)},setCompState:function(t,i){var n=this.getCompState(t),s=p(t),a=_(this._siteData,s),r=C(s);if(e.set(a,r,e.assign({},n,i)),!P(n,i)){var o={type:"stateChange",value:this.getCompState(t)};w.call(this,t,o,n)}return++this.snapshotId},removeCompState:function(t){var i=p(t),n=e.get(this._siteData,e.initial(i)),s=e.last(i);e.get(n,s)&&delete n[s]},getCompState:function(e){return E(this._siteData,p(e))},getCompType:function(e){var t=O.call(this,e);if(this._displayedDal.isExist(t)){var i=this._pointers.getInnerPointer(t,"componentType");return this._displayedDal.get(i)}return this._siteDataApi.document.getFullStructureProperty(t,"componentType")},getCompLayout:function(e){E(this._siteData,m(e));var t=O.call(this,e);if(t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.get(i)}},updateCompLayout:function(t,i){var n=this.getCompLayout(t),s=m(t),a=E(this._siteData,s,{}),r=e.assign({},a,i);if(T.call(this,this._siteData,s,r),this._runtimeToDisplayed.updateCompLayout(t,r),!P(n,i)){var o={type:"layoutChange",value:i};w.call(this,t,o,n)}return++this.snapshotId},getCompStyle:function(e){E(this._siteData,h(e));var t=R.call(this,e,a.theme);return t&&M.call(this,t,a.theme)},updateCompStyle:function(t,i){var n=h(t,i.id),s=E(this._siteData,n,{}),a=e.assign({},s,i);T.call(this,this._siteData,n,a),this._runtimeToDisplayed.updateCompStyle(t,a)},getCompDesign:function(e,t){E(this._siteData,f(e));var i=R.call(this,e,a.design,t);return i&&M.call(this,i,a.design)},setCompDesign:function(e,t){return b.call(this,t,e,f(e),a.design)},getCompData:function(e,t){E(this._siteData,g(e));var i=R.call(this,e,a.data,t);return i&&M.call(this,i,a.data)},setCompData:function(e,t){return b.call(this,t,e,g(e),a.data)},registerComponentEvent:function(e,t){var i={action:{type:"comp",name:t.eventType,sourceId:e},behavior:{type:"widget",targetId:t.contextId,params:{callbackId:t.callbackId,compId:e},name:"runCode"}};this.addActionsAndBehaviors(e,i)},getCompConnections:function(e){return function(e){var t=O.call(this,e);if(!t)return null;var i=this._siteDataApi.document.getFullStructureProperty(t,"connectionQuery");if(!i)return null;var n=a.connections,s=x.call(this,t),o=this._pointers.data.getItem(n,i.replace("#",""),s),c=this._displayedDal.get(o);return this._siteData.resolveData(c,s,r[n]).items}.call(this,e)||[]},getCompProps:function(e,t){E(this._siteData,d(e));var i=R.call(this,e,a.prop,t);return i&&M.call(this,i,a.prop)},setCompProps:function(e,t){return b.call(this,t,e,d(e),a.prop)},getActionsAndBehaviors:function(e){E(this._siteData,v(e));var t=R.call(this,e,a.behaviors),i=t&&M.call(this,t,a.behaviors);return i&&i.items||[]},addActionsAndBehaviors:function(e,t){var i=v(e),n=E(this._siteData,i,[]).concat(t);return T.call(this,this._siteData,i,n),this._runtimeToDisplayed.updateActionsAndBehaviorsItems(e,n),++this.snapshotId},removeActionsAndBehaviors:function(t,i){var n=v(t),s=E(this._siteData,n,[]);return e.remove(s,i),T.call(this,this._siteData,n,s),this._runtimeToDisplayed.updateActionsAndBehaviorsItems(t,s),++this.snapshotId},getCompName:function(t){var i=this.getCompConnections(t),n="WixCodeConnectionItem"===e.get(i,[0,"type"])&&i[0];return n?n.role:t},getCompPointer:O,getBoundingClientRect:function(t){var i=this._siteData.measureMap;return i?e.transform(s,function(e,n){e[n]=i[n][t]},{}):e.pick(this.getCompLayout(t),s)},getPageId:function(e){var t=O.call(this,e);return t?x.call(this,t):null},getParentId:function(e){var i=O.call(this,e),n=t.displayedOnlyStructureUtil.isDisplayedComponent(e)?this._pointers:this._pointers.full,s=i&&n.components.getParent(i);return s&&s.id},isDisplayed:function(e){var t=O.call(this,e);return!!t&&this._displayedDal.isExist(t)},hasBeenPopupOpened:function(e){return E(this._siteData,S(e),!1)},markPopupAsBeenOpened:function(e){var t=S(e);T.call(this,this._siteData,t,!0)},getDynamicPageData:function(){return this._siteData.getDynamicPageData()},getCompDataOverrides:function(e){return E(this._siteData,g(e))},getCompDesignOverrides:function(e){return E(this._siteData,f(e))},getCompBehaviorsOverrides:function(e){return E(this._siteData,v(e))},getCompPropsOverrides:function(e){return E(this._siteData,d(e))},setPopupContext:function(e,t){var i=A(e);T.call(this,this._siteData,i,t)},getPopupContext:function(e){return E(this._siteData,A(e))},getDisplayedOnlyCompsForFullComp:function(i,n){var s=this._displayedDal,a=this._pointers.full.components.getPage(n,this._siteData.getViewMode()),r=this._pointers.full.components.getComponent(i,a),o=this._pointers.components.getAllDisplayedOnlyComponents(r);return e.reduce(o,function(e,i){return t.displayedOnlyStructureUtil.isDisplayedComponent(i.id)&&e.push(s.get(i)),e},[])},getChildrenIds:function(i){var n=t.displayedOnlyStructureUtil.isDisplayedComponent(i)?this._pointers:this._pointers.full,s=O.call(this,i);return e.map(n.components.getChildren(s),"id")},getAncestorOfType:function(e,t){var i=this,n=this._pointers.full,s=O.call(this,e);return n.components.getAncestorByPredicate(s,function(e){return i.getCompType(e.id)===t})},clearCompRuntimeOverrides:function(t){!function(t,i){var n=_(t,i),s=C(i);e.unset(n,s)}(this._siteData,u(t))}}),{createRuntimeDal:function(t,i,n,s,a){var r=new I(t,i,n,s,a);return{runtimeDal:r,resetRuntime:D.bind(r),runtimeToDisplayed:r._runtimeToDisplayed,getAllCompsData:function(){return E(r._siteData,c,{})},resetNonDisplayedPages:function(){var t=this._siteData.getAllPossiblyRenderedRoots(),i=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),t),n=!1;if(!e.isEqual(t,this._roots)){var s=e.get(this._siteData,c),a=e.difference(e.keys(s),i),r=e.get(this._siteData,c);e.isEmpty(a)||(n=!0,e.forEach(a,function(e){delete r[e]}))}return this._roots=t,n}.bind(r),resetPage:function(t){var i=this._siteData.getAllPossiblyRenderedRoots(),n=!1,s=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),[t]),a=e.get(this._siteData,c);return a&&!e.isEmpty(s)&&(e.forEach(s,function(e){delete a[e]}),n=!0),this._roots=i,n}.bind(r)}}}}.apply(t,n))||(e.exports=s)},393:function(e,t,i){var n,s;n=[i(1),i(0),i(4),i(846),i(850),i(177),i(394),i(853),i(8)],void 0===(s=function(e,t,i,n,s,a,r,o,c){"use strict";var u=e.dataUtils,p="masterPage",l={},d={},g={},h=[];e.sessionFreezer.freeze(l),e.sessionFreezer.freeze(d),e.sessionFreezer.freeze(g),e.sessionFreezer.freeze(h);var f=function(e,t){l[e]=t};function m(e,i,n){var s=n.styleId&&e.getDataByQuery(n.styleId,i,e.dataTypes.THEME),a=[s?s.skin:n.skin];return n.modes?a.concat(t(n.modes.overrides).flatMap(t.partial(m,e,i)).compact().value()):a}function v(e,t,i){return{design:i.designQuery?e.getDataByQuery(i.designQuery,t,e.dataTypes.DESIGN):null,data:i.dataQuery?e.getDataByQuery(i.dataQuery,t):null,properties:i.propertyQuery?e.getDataByQuery(i.propertyQuery,t,e.dataTypes.PROPERTIES):null,style:i.styleId?e.getDataByQuery(i.styleId,t,e.dataTypes.THEME):null,skins:m(e,t,i),layout:i.layout,type:i.type,id:i.id,pageId:t}}function y(e,i,n){var s=t.get(i.pagesData[p],["data","document_data",n]),r=s&&s.pageSecurity;return r&&(r.requireLogin||r.passwordDigest)&&a.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog")||[]}function S(i,s,a){if(c.isOpen("sv_loadGhostStructure",i)&&function(e){return t.includes(["platform.components.AppController","platform.components.AppWidget"],e)}(s)){var r=a.data||{},o=r.applicationId,u=r.settings,p=r.controllerType,l=u||{},d=l.devCenterWidgetId,g=l.type;if(t.get(i,["ghostStructureData",o,g]))return;var h=i.getClientSpecMapEntryByAppDefinitionId(o),f=t.get(h,["widgets",d,"componentFields","appStudioFields","pageJsonFilename"]);return f?n.getRequestForGhostStructure(i,f,o,g):void e.integrations.ravenUtils.captureError("missing page structure info on appWidget",{tags:{"load-ghost-structure":!0},extra:{info:{applicationId:o,widgetId:g,devCenterWidgetId:d,controllerType:p}}})}}function A(e,n,s,r,o,c){var p=v(e,s,r),g=i.jsonUpdaterRegistrar.getCompPlugin(r.componentType);if(g){r=g(r,function(t){var i=t.id===r.id?p:v(e,s,t);return{dataItem:i.data,propertiesItem:i.properties}},{},e)}t.has(d,r.componentType)&&(o[r.componentType]=o[r.componentType]||[],o[r.componentType].push(p)),t.forEach(c,function(e){e.registerCompInfo(p)});var h=l[r.componentType],f=h?h(e,p,n):[],m=a.get(e,r.componentType);m&&f.push(m);var y=S(e,r.componentType,p);y&&f.push(y);var P=u.getChildrenData(r,e.isMobileView());return t.reduce(P,function(t,i){return t.concat(A(e,n,s,i,o,c))},f)}function P(e,i,n){var s=t.isArray(n)?n:[n],r={},o=[];t.forEach(h,function(t){var i=t(e);i&&o.push(i)});var c=i.pagesData,u=A(e,s[0],p,c[p].structure,r,o);return u=t.reduce(s,function(n,s){return n.concat(A(e,s,s.pageId,c[s.pageId].structure,r,o),function(e,t,i){if(!i.pageItemId)return[];var n=t.pagesData[p],s=n.data.document_data[i.pageItemId];if(!s||"PermaLink"!==s.type)return[];var a=n.data.document_data[s.dataItemRef.replace(/^#/,"")];if(!a)return[];var r=n.data.component_properties[s.dataItemRef.replace(/^#/,"")],o=l["Zoom:"+a.type];return o?o(e,{data:a,properties:r},i):[]}(e,i,s),function(e,i,n){return t.flatMap(n,function(t,n){return(0,d[n])(e,t,i)})}(e,s,r),function(e){return t(e).invokeMap("getRequests").flatten().value()}(o),function(e,i){return t(g).map(function(t,n){var s=e.getClientSpecMapEntryByAppDefinitionId(n);if(s)return t(e,s,i)}).compact().flatten().value()}(e,s),y(e,i,s.pageId))},u),t.get(e,"publicModel.pageList.pages")&&(u=t.reduce(e.publicModel.pageList.pages,function(t,n){return t.concat(y(e,i,n.pageId))},u)),u.concat(function(e){var t=[],i=e.getExistingRootNavigationInfo(e.getFocusedRootId());if(i.pageItemId){var n=e.getDataByQuery(i.pageItemId);if(n){var s=a.forDataItem(e,n.type);s&&t.push(s)}}return t}(e))}function I(e,n){var s=[n];return e.isPopupPage(n.pageId)&&s.push(e.getExistingRootNavigationInfo(e.getPrimaryPageId())),e.publicModel&&(s=t.filter(s,function(n){var s=t.find(e.publicModel.pageList.pages,{pageId:n.pageId});return t.has(s,"pageJsonFileName")||i.errorPages.isErrorPage(n.pageId)||function(e,i){return t.includes(e.rendererModel.passwordProtectedPages,i.pageId)}(e,n)})),s}return t.forOwn(o,function(e,t){return f(t,e)}),{getNeededRequests:function(e,o,c){e.santaBase=e.santaBase||e.serviceTopology.scriptsLocationMap.santa;var u=I(e,c),l=void 0;if(function(e,i,n){return!t.isEmpty(n.pagesData[e.MASTER_PAGE_ID])&&t.every(i,function(e){return!t.isEmpty(n.pagesData[e.pageId])})}(e,u,o))l=P(e,o,u);else if(l=n.getRequestsForPages(e,o,u),r.getInitialDialogToDisplay(e)){var d=a.get(e,"wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog");d&&l.push(d)}if("preview"===e.renderFlags.componentViewMode&&"Template"!==e.rendererModel.siteInfo.documentType){var g=i.siteDataUtils.getRequestModel(e),h=i.wixUserApi.getLanguage(g.cookie,e.currentUrl,g.language),f=i.siteDataUtils.getRendererModel(e).languageCode,m=t(t.get(e,["publicModel","pageList","pages"])).map(function(e){return t.get(o,["pagesData",p,"data","document_data",e.pageId,"pageSecurity","dialogLanguage"])}).compact().uniq().value(),v=[h,f].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(m),["en"]),y=i.translationsLoader.getRequest(e,v,{initiator:"models"});l.push(y)}else i.translationsLoader.setToUseOldTranslations();return function(e){return!e.isInSSR()&&!e.isClientAfterSSR()||t.every(s.getStylesIds(e),function(i){return t.has(e.externalStyles,i)})}(e)||l.push.apply(l,s.getRequests(e)),e.shouldShowWixAds()&&l.push(a.get(e,"wysiwyg.viewer.components.WixFreemiumBanner")),t.compact(l)},registerCheckerForCompType:f,registerCheckerForAllCompsOfType:function(e,t){d[e]=t},registerCheckerForAppDefId:function(e,t){g[e]=t},registerCheckerFactory:function(e){h.push(e)}}}.apply(t,n))||(e.exports=s)},394:function(e,t,i){var n,s;n=[i(0),i(4),i(25),i(851),i(177),i(108),i(1),i(67),i(8),i(852)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u){"use strict";var p=t.hashUtils,l=t.cookieUtils,d=new WeakMap,g=500,h={Login:"login",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword",EmailVerification:"emailVerification",SentConfirmationEmail:"sentConfirmationEmail",Welcome:"welcome",NoPermissionsToPage:"noPermissionsToPage"},f=[h.Login,h.SignUp],m={SiteOwner:"siteowner",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword"},v={Login:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinSocialMobile",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinMaterial",socialMobileThemeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinMaterial"},SignUp:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinSocialMobile",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinMaterial",socialMobileThemeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinMaterial"},ResetPasswordEmail:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinNew",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinMaterial"},ResetPasswordNewPassword:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinNew",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinMaterial"},Notification:{themeStyled:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinNew",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinMaterial"},PasswordProtected:{themeStyled:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinNew",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinMaterial"},EmailVerification:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinFixed",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.emailVerificationDialogSkinMaterial"},SentConfirmationEmail:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.sentConfirmationEmail",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.sentConfirmationEmailMaterial"},Welcome:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinFixed",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.welcomeDialogSkinMaterial"},NoPermissionsToPage:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.noPermissionsToPage",themeStyledMaterial:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.noPermissionsToPageMaterial"}},y={SV_SESSION:"svSession",SM_SESSION:"smSession",WIX_CLIENT:"wixClient",SM_EF:"sm_ef"},S="en",A={MEMBER_AREA:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",MEMBER_INFO:"14cffd81-5215-0a7f-22f8-074b0e2401fb"},P={MEMBER_INFO:"member_info"},I="_signedInUser_";function D(e,t){var i=this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").getWidgetHandler(),n="viewer_platform_public_api_"+t.appDefId+"_"+t.workerId,s=i&&i.getPostMessageTarget(t.workerId);return s?o.api.request(n,{target:s}):Promise.reject(new Error("Application API not found."))}function _(){var t=d.get(this);"undefined"==typeof window||t.compsDownloaded||(t.compsDownloaded=new Promise(function(t){setTimeout(function(){var i=s.all();requirejs(i,function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var o=e.zipObject(i,a);s.callAllRequiredPackagesCallbacks(o),t()})},g)}))}function C(e){var t=d.get(this);t.compsDownloaded?t.compsDownloaded.then(e):e()}function E(e,t,i){return{componentType:e,type:"Component",id:t,key:t,skin:i}}function T(e){return E("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog",b(v.PasswordProtected,e))}function b(e,t){return e[(w(t)&&t.isMobileView()&&e.socialMobileThemeStyled?"socialMobileThemeStyled":"themeStyled")+(c.isOpen("newLoginTheme",t)?"Material":"")]}function w(t){var i=e.get(t.getDataByQuery("masterPage"),["smSettings"],{});return!(!i.socialLoginGoogleEnabled&&!i.socialLoginFacebookEnabled)}function R(t,i){if(e.isBoolean(i))return i?h.Login:h.SignUp;var n=t.getDataByQuery("masterPage");return e.get(n,["smSettings","smFirstDialogLogin"],!1)?h.Login:h.SignUp}function M(e){e.onSubmitCallback=function(e,t){var i=l.getCookie(y.SV_SESSION);ce.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),n.login(e,function(e,t){ee.call(this,e,t,a.SITE_MEMBER_LOGIN_SUCCESS)}.bind(this,t),function(e){t.endLoader(),t.setErrorMessageByCode(e)},i,null),t.startLoader()}.bind(this);var t=this.aspectState.read("languageToDisplay");e.onTokenMessage=G.bind(this),e.onSwitchDialogLinkClick=function(){var e=this.getCustomSignupPageId();if(e){var i=this.aspectState.read("nextPageInfo")||{};this.aspectState.update({dialogToDisplay:null,navigatingOutPageId:i.pageId}),this.aspectSiteApi.navigateToPage({pageId:e})}else W.call(this,h.SignUp,void 0,t)}.bind(this),e.onForgetYourPasswordClick=function(){ce.call(this,a.SITE_MEMBER_CLICKED_FORGOT_PASSWORD),W.call(this,h.ResetPasswordEmail,void 0,t)}.bind(this),e.needLoginMessage=this.aspectState.read("showDialogMessage")}function x(t){t.onSubmitCallback=function(t,i){var s=this.siteData.getClientSpecMap(),r=e.find(s,{type:"sitemembers"}).collectionType,o=l.getCookie(y.SV_SESSION);"Open"===r?(n.register(t,function(e,t){ee.call(this,e,t)}.bind(this,i),function(e){i.endLoader(),i.setErrorMessageByCode(e)},o),i.startLoader()):"ApplyForMembership"===r&&n.apply(t,ne.bind(this,i.props.language),i.setErrorMessageByCode,o);ce.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id})}.bind(this);var i=this.aspectState.read("languageToDisplay");t.onTokenMessage=G.bind(this),t.onSwitchDialogLinkClick=W.bind(this,h.Login,void 0,i),t.needLoginMessage=this.aspectState.read("showDialogMessage"),t.hasSocialAppInstalled=function(){var e=this,t={appDefId:A.MEMBER_AREA,workerId:this.siteData.getPrimaryPageId()},i=this.aspectSiteApi.getSiteAPI();return new Promise(function(n,s){D.call(e,i,t).then(function(e){e.hasSocialPages(function(e){return n(e)},function(e){return s(e)})}).catch(function(){n(!1)})})}.bind(this)}function O(e){e.onSubmitCallback=function(e,t){var i=this.siteData.currentUrl.full;ce.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t.props.id}),n.sendForgotPasswordMail({email:e.email,homePageUrl:i,lang:t.props.language},function(){var e=this.aspectState.read("invokeResetPasswordDialogCb"),i=this.aspectState.read("dialogProcessSuccessCallback");e&&(i(),this.aspectState.update({dialogProcessSuccessCallback:null}),this.aspectState.delete("invokeResetPasswordDialogCb")),V.call(this,m.ResetPasswordEmail,t.props.language)}.bind(this),t.setErrorMessageByCode,h.ResetPasswordEmail)}.bind(this)}function k(e){e.biContext="confirm email to start",e.onResendLinkClick=function(e){H.call(this),oe.call(this,{context:e,name:"resend confirmation email"}),W.call(this,h.SentConfirmationEmail)}.bind(this,e.biContext),e.onDialogReady=function(){re.call(this,{notificationName:"confirm email to access"})}.bind(this)}function L(e){e.biContext="sent confirmation email",e.onResendLinkClick=function(e){H.call(this),oe.call(this,{context:e,name:"resend confirmation email"})}.bind(this,e.biContext),e.onDialogReady=function(){re.call(this,{notificationName:"sent confirmation email"})}.bind(this)}function N(){var t={},i=e.get(this.siteData.currentUrl.query,"lang",S);return t.language=i,t.onSubmitCallback=function(e,t,i){ce.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:i.props.id}),n.resetMemberPassword(t,function(e){delete this.siteData.currentUrl.query.forgotPasswordToken,V.call(this,m.ResetPasswordNewPassword,e)}.bind(this,e),i.setErrorMessageByCode)}.bind(this,i),t.notClosable=this.aspectState.read("notClosable"),t}function B(e){var t=e.language,i=this.siteData;switch(this.aspectState.read("notificationToDisplay")){case h.SignUp:var n=ae[i.siteId].siteMember.details.email;e.title="",e.description=ue(t,"SMApply_Success1")+" "+ue(t,"SMApply_Success2").replace("{0}",n),e.buttonText=ue(t,"SMContainer_OK");break;case h.ResetPasswordEmail:e.title=ue(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE"),e.description=ue(t,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT"),e.buttonText=ue(t,"SMContainer_OK");break;case h.ResetPasswordNewPassword:e.title=ue(t,"siteMembersTranslations_Reset_Password_Sucess_Title"),e.description="",e.buttonText=ue(t,"SMContainer_OK"),e.onButtonClick=function(e,t){ce.call(this,a.SITE_MEMBER_SUBMIT_BUTTON,{context:t}),W.call(this,e)}.bind(this,h.Login,"resetPasswordSuccessNotification");break;case"siteowner":e.title=ue(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE"),e.description=ue(t,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE"),e.buttonText=ue(t,"SMContainer_OK")}}function U(i){i.onSubmitCallback=function(i,n,s){var a=function(e){var t="SMForm_Error_General_Err";try{t=JSON.parse(e.responseText).errorCode}catch(e){}s.setErrorMessageByCode(t)};if(e.isEmpty(n.password))return s.setErrorMessage("PasswordLogin_Wrong_Password");if(K(this.siteData,i.pageId)){var r=this;(function(e,i,n,s){var a=this.siteData.serviceTopology.protectedPageResolverUrl,r={password:e,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:i.pageId};t.ajaxLibrary.ajax({type:"POST",url:a,data:r,dataType:"json",cache:!1,contentType:"application/json",success:n,error:s})}).call(this,n.password,i,function(e){i.jsonUrls=e.payload.urls,pe.call(r,s,i)},a)}else(function(e,t,i){(function(e){return p.SHA256.b64_sha256(e)})(e)===this.aspectState.read("passwordDigest")?t(this.aspectState.read("nextPageInfo")):i()}).call(this,n.password,pe.bind(this,s),a)}.bind(this,this.aspectState.read("nextPageInfo"))}function F(e){var t=this;e.onSubmitCallback=function(e,t){var i={appDefId:A.MEMBER_AREA,workerId:this.siteData.getPrimaryPageId()};t.closeDialog(!1),D.call(this,this.aspectSiteApi.getSiteAPI(),i).then(function(e){e.navigateToSection({appDefinitionId:A.MEMBER_INFO,sectionId:P.MEMBER_INFO,memberId:I})})}.bind(this);var i=l.getCookie(y.SM_EF),n=i&&i.split("|")[1];e.language=n&&n.trim()||S;var s=e.onCloseDialogCallback;e.onCloseDialogCallback=function(){s.apply(void 0,arguments);var e=t.siteData.getMainPagePath();l.deleteCookie(y.SM_EF,t.siteData.currentUrl.hostname,e),l.deleteCookie(y.SM_EF,t.siteData.currentUrl.hostname,"/")}}function q(e){var t=this;e.onSwitchAccountClick=function(){t.logout()}}function W(t,i,n,s,a){this.aspectState.update(e.merge({},{dialogToDisplay:t},n?{languageToDisplay:n}:{},e.isFunction(i)?{dialogProcessSuccessCallback:i}:{},e.isFunction(s)?{onCancelCallback:s}:{},e.isBoolean(a)?{checkCommunityCheckbox:a}:{},{logoutState:!1}))}function V(t,i){this.aspectState.update(e.merge({},{notificationToDisplay:t,dialogToDisplay:h.Notification},i?{languageToDisplay:i}:{}))}function G(e,t,i,s){var a=l.getCookie(y.SV_SESSION),r=function(e,t,i,n){var s=n.payload,a=s.siteMemberDto,r=s.smSession;n.httpOnlySession?ee.call(this,e,n):r?ee.call(this,e,{payload:r}):ne.call(this,e.props.language,{payload:a});X(t,i)}.bind(this,s,i,t),o=function(e,t,i,n){e.endLoader(),e.setOuathErrorMessageByCode(n),X(t,i)}.bind(this,s,i,t);n.handleOauthToken(r,o,{svSession:a,token:e,provider:t,visitorId:this.aspectSiteApi.getSiteAPI().getBiVisitorId(),mode:s.props.id,lang:s.props.language,privacyStatus:s.getJoinCommunityStatus()}),s.startLoader()}function H(){var t=this.aspectState.read("pendingMemberId");n.resendEmailVerification(t,e.noop,e.noop)}function K(t,i){return e.includes(t.rendererModel.passwordProtectedPages,i)}function j(t,i,n){return!function(t,i){return e.includes(ae[t.siteId].approvedPasswordPages,i)}(t,n)&&function(e,t,i){return t.passwordDigest||K(e,i)}(t,i,n)}function z(e,t,i){var n=t.requireLogin&&(!this.isLoggedIn()||!e.hasPageData(i));return!(j(e,t,i)||n)}function Q(t,i){return e.includes(t.getAllPageIds(),i)||r.errorPages.isErrorPage(i)}function J(t,i,n){if(e.has(t.currentUrl.query,"forgotPasswordToken"))return h.ResetPasswordNewPassword;if(j(t,i,n))return h.PasswordProtected;if(i.requireLogin){if(!this.isLoggedIn())return R.call(this,t);if(!t.hasPageData(n)){var s=this.getCustomNoPermissionsPageId();if(s&&n!==s){var a={restrictedPageId:n};return this.aspectSiteApi.navigateToPage({pageId:s,hasAppSectionParams:!0,queryParams:{appSectionParams:JSON.stringify(a)}}),null}return h.NoPermissionsToPage}}return null}function Y(e,t){var i=e.getDataByQuery(t);return i&&i.pageSecurity||{}}function Z(i,n,s,r){if(this.siteData.currentUrl.query.showSignUpDialog){delete this.siteData.currentUrl.query.showSignUpDialog;var o={pageId:{id:this.siteData.getMainPageId()},type:"PageLink",queryParams:this.siteData.currentUrl.query},c=t.linkRenderer.renderLink(o,this.siteData,this.siteData.getRootNavigationInfo());this.aspectSiteApi.getSiteAPI().href(c.href)}else{s&&ce.call(this,a.SITE_MEMBER_EXIT_DIALOG,{context:i.props.biContext||i.props.id});var u=ae[this.siteData.siteId].siteMember,p=this.aspectState.read("onCancelCallback");e.isFunction(p)&&!u.details&&p(),i.performCloseDialog(function(){this.aspectSiteApi.getActionQueue().runImmediately(function(){var t=r||this.aspectState.read("nextPageInfo");this.aspectState.update({dialogToDisplay:null,nextPageInfo:null,onCancelCallback:null,dialogProcessSuccessCallback:null,showDialogMessage:!1,smtoken:this.siteData.getSMToken()}),this.aspectState.delete("invokeResetPasswordDialogCb"),i.endLoader(),n?t&&(e.invokeMap(this.onLoginSuccessCallbacks,"callback"),t.routerDefinition&&(t.isRefetchingPageAfterLogin=!0,delete t.pageId),this.aspectSiteApi.navigateToPage(t)):t&&t.pageId===this.siteData.getCurrentUrlPageId()&&(this.aspectState.update({navigatingOutPageId:t.pageId}),this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()}))}.bind(this))}.bind(this))}}function X(e,t){e.postMessage({src:"wix-social-login",type:t,action:"revoke"},"*")}function $(e,t){t.pages&&this.siteData.setPagesJsonFileName(t.pages),this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").updateWixCodeModelDataAfterLogin(),e(t.raw)}function ee(t,i,n){C.call(this,function(){ie(i)?(this.aspectState.update({pendingMemberId:i.payload.siteMemberDto.id}),W.call(this,h.EmailVerification,void 0,t.props.language,function(){this.aspectState.update({pendingMemberId:null})}.bind(this))):(i.httpOnlySession||function(e,t){var i=e.cookieName||y.SM_SESSION,n=e.sessionToken,s=e.rememberMe?e.expirationDate:0;l.setCookie(i,n,s,t.currentUrl.hostname,t.getMainPagePath(),!1)}(i.payload,this.siteData),se.call(this,function(t,i,n){t.endLoader();var s=ae[this.siteData.siteId].siteMember;s.details=i.payload.siteMemberDto,this.aspectState.update({memberDetails:s.details});var a=this.aspectState.read("dialogProcessSuccessCallback");e.isFunction(a)&&(a(s.details),this.aspectState.update({dialogProcessSuccessCallback:null}));var o=void 0;if(i.payload.pages&&(this.siteData.setPagesJsonFileName(i.payload.pages),o=this.aspectState.read("nextPageInfo")),Z.call(this,t,!0,!0,o),n){var c=s.details.attribute&&s.details.attribute.name||s.details.email;this.aspectSiteApi.reportBI(n,{userName:r.logger.sanitizePIIForBi(c)})}}.bind(this,t,i,n)))}.bind(this))}function te(e,t,i){C.call(this,function(){if(ie(t))this.aspectState.update({pendingMemberId:t.payload.siteMemberDto.id}),W.call(this,h.EmailVerification,void 0,this.aspectState.read("languageToDisplay"),function(){this.aspectState.update({pendingMemberId:null})}.bind(this));else{var n=function(e,t){var i=this.aspectState.read("nextPageInfo");i&&this.aspectSiteApi.navigateToPage(i),e(t)}.bind(this,e);i||"ACTIVE"===t.payload.status?se.call(this,$.bind(this,n,t.payload)):$.call(this,n,t.payload)}}.bind(this))}function ie(e){return e.payload.hasOwnProperty("sessionToken")&&null===e.payload.sessionToken&&!e.payload.emailVerified}function ne(t,i){var n=ae[this.siteData.siteId].siteMember;n.details=i.payload;var s=this.aspectState.read("dialogProcessSuccessCallback");e.isFunction(s)&&(s(n.details),this.aspectState.update({dialogProcessSuccessCallback:null})),V.call(this,m.SignUp,t)}function se(e){this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap").reloadClientSpecMap(e)}var ae={};function re(e){ce.call(this,a.SITE_MEMBER_NOTIFICATION_OPEN,{notification_name:e.notificationName})}function oe(e){ce.call(this,a.SITE_MEMBER_CLICK_LINK,{context:e.context,name:e.name})}function ce(t,i){var n=this.aspectSiteApi.getSiteAPI().getBiVisitorId();n&&this.aspectSiteApi.reportBI(t,e.merge(i||{},{visitor_id:n}))}function ue(e,i){return t.translationsLoader.getTranslation("siteMembersTranslations",e,i)}function pe(e,t){Z.call(this,e,!0),function(e){ae[this.siteData.siteId].approvedPasswordPages.push(e)}.call(this,t.pageId),this.aspectSiteApi.navigateToPage(t),this.aspectState.update({passwordDigest:null})}function le(e){switch(this.aspectState.read("dialogToDisplay")){case h.Login:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog",b(v.Login,e))}(e);case h.SignUp:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog",b(v.SignUp,e))}(e);case h.ResetPasswordEmail:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog",b(v.ResetPasswordEmail,e))}(e);case h.ResetPasswordNewPassword:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog",b(v.ResetPasswordNewPassword,e))}(e);case h.Notification:return function(e){return E("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog",b(v.Notification,e))}(e);case h.PasswordProtected:return T(e);case h.EmailVerification:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.EmailVerificationDialog","emailVerificationDialog",b(v.EmailVerification,e))}(e);case h.SentConfirmationEmail:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SentConfirmationEmailDialog","sentConfirmationEmailDialog",b(v.SentConfirmationEmail,e))}(e);case h.Welcome:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.WelcomeDialog","welcomeDialog",b(v.Welcome,e))}(e);case h.NoPermissionsToPage:return function(e){return E("wysiwyg.viewer.components.dialogs.siteMemberDialogs.NoPermissionsToPageDialog","noPermissionsToPageDialog",b(v.NoPermissionsToPage,e))}(e);case h.AdminLogin:return T(e);default:return null}}function de(){_.call(this),this.aspectState.read("stopShowDialog");var t=void 0;switch(this.aspectState.read("dialogToDisplay")){case h.Login:t=M;break;case h.SignUp:t=x;break;case h.ResetPasswordEmail:t=O;break;case h.ResetPasswordNewPassword:return N.call(this);case h.Notification:t=B.bind(this);break;case h.Credits:t=e.noop;break;case h.PasswordProtected:t=U;break;case h.EmailVerification:t=k;break;case h.SentConfirmationEmail:t=L;break;case h.Welcome:t=F;break;case h.NoPermissionsToPage:t=q;break;default:return{}}return function(){return e.includes(f,this.aspectState.read("dialogToDisplay"))}.call(this)&&function(){var t=e.merge({context:this.aspectState.read("dialogToDisplay"),has_social:!!w(this.siteData)},{initator:"unknown"});ce.call(this,a.SITE_MEMBER_AUTH_DIALOG_OPENED,t)}.call(this),function(t){var i={};return i.language=this.aspectState.read("languageToDisplay"),i.onCloseDialogCallback=Z.bind(this),i.notClosable=this.aspectState.read("notClosable"),i.checkCommunityCheckbox=this.aspectState.read("checkCommunityCheckbox"),i.smCollectionExposure=e.get(this.siteData.getClientSpecMapEntriesByType("sitemembers"),"[0].collectionExposure"),t.call(this,i),i}.call(this,t)}function ge(e){if(this._santaSiteAuthAspect)this._santaSiteAuthAspect("showAuthenticationDialog",e);else if(this.aspectState.update({initiatorAppId:e.appId}),this.shouldRenderCustomSignupPage())this.aspectSiteApi.navigateToPage({pageId:this.getCustomSignupPageId()});else{var t=R.call(this,this.siteData,e.showLoginDialog);W.call(this,t,e.successCallback,e.language,e.cancelCallback,e.checkCommunityCheckbox)}}function he(i){var s=this;d.set(this,{compsDownloaded:null}),this.onLoginSuccessCallbacks=[],this._memberDetailsChangeRegisteredComps={},this.aspectSiteApi=i,this.siteData=i.getSiteData(),this.aspectState=function(t){return{read:function(i){var n=t.getAspectGlobalData("siteMembers");return i?e.get(n,i):n},update:function(e){t.updateAspectGlobalData("siteMembers",e)},delete:function(i){var n=e.set(t.getAspectGlobalData("siteMembers"),i,void 0);t.updateAspectGlobalData("siteMembers",n)}}}(this.aspectSiteApi);var l=fe(this.siteData);this.aspectState.update({navigatingOutPageId:null,dialogProcessSuccessCallback:null,onCancelCallback:null,showDialogMessage:!1,passwordDigest:null,nextPageInfo:null,dialogToDisplay:l,notificationToDisplay:null,languageToDisplay:S,notClosable:!1,smtoken:this.siteData.getSMToken(),memberDetails:null}),this.siteData.isFirstRenderAfterSSR()&&(this.aspectState.update({isFirstRenderAfterSSR:!0}),this.aspectSiteApi.registerToDidLayout(e.once(function(){s.aspectState.update({isFirstRenderAfterSSR:!1})}))),function(e){ae[e.siteId]={approvedPasswordPages:[],siteMember:{details:null}}}(this.siteData),n.initializeData(this.siteData),e.bindAll(this,e.functionsIn(this)),this.aspectSiteApi.registerClientSpecMapUpdateCallback(function(){this.aspectState.update({smtoken:this.siteData.getSMToken()})}.bind(this)),this.aspectSiteApi.registerToUrlPageChange(function(){s.aspectState.update({nextPageInfo:null});var e=s.aspectState.read("navigatingOutPageId");e&&(s.siteData.getCurrentUrlPageId()!==e&&s.aspectState.update({navigatingOutPageId:null}))}),c.isOpen("sv_SantaSiteAuthPhase1",this.siteData)&&(this._santaSiteAuthAspect=function(){var i=this.aspectSiteApi.getSiteAPI().getSiteAspect("siteAuthAspect")||u,n=r.errorPages,s=r.urlUtils,l=r.ajaxLibrary,d=i.createAspect({type:"SITE_MEMBERS",runtimeData:{aspectSiteAPI:this.aspectSiteApi,experiment:c,privateMembers:ae,onLoginSuccessCallbacks:this.onLoginSuccessCallbacks,downloadCompsUtils:{downloadAllComps:_.bind(this),waitForCompsDownload:C.bind(this)}},externals:{errorPages:n,pmrpc:o,coreUtils:t,urlUtils:s,ajaxLibrary:l,hashUtils:p},constants:{biEvents:a}});return function(t){for(var i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.invoke.apply(e,[d,t].concat(n))}}.call(this))}function fe(t){return e.has(t.currentUrl.query,"forgotPasswordToken")?h.ResetPasswordNewPassword:e.has(t.currentUrl.query,"showSignUpDialog")?h.SignUp:l.getCookie(y.SM_EF)?function(e){if(function(e){return!!e.getClientSpecMapEntryByAppDefinitionId(A.MEMBER_AREA)}(e))return h.Welcome;return l.deleteCookie(y.SM_EF,e.currentUrl.hostname,e.getMainPagePath()),l.deleteCookie(y.SM_EF,e.currentUrl.hostname,"/"),null}(t):null}return he.prototype={getComponentsToRender:function(e){return this.siteData.isInSSR()||this.aspectState.read("isFirstRenderAfterSSR")||this.shouldRenderCustomSignupPage()||!this.aspectState.read("dialogToDisplay")?null:[{structure:le.call(this,e.getSiteData()),props:de.call(this)}]},isLoggedIn:function(){return!!this.aspectState.read("smtoken")},getCustomSignupPageId:function(){var t=e.get(this.siteData.getDataByQuery("masterPage"),["smSettings","customSignUpPageId"],null);return t&&Q(this.siteData,t)?t:null},getCustomNoPermissionsPageId:function(){var t=e.get(this.siteData.getDataByQuery("masterPage"),["smSettings","customNoPermissionsPageId"],null);return Q(this.siteData,t)?t:null},authorizeMemberPages:function(e,t){var i=this;return n.getAuthorizedPages(function(t){var n=t.payload.raw.authorizedPages;i.siteData.setPagesJsonFileName(n);var s=Object.keys(n);e(s)},t)},shouldRenderCustomSignupPage:function(e){var t=this;return this.getCustomSignupPageId()&&function(){if(e){var i=e.pageId,n=Y(t.siteData,i);return J.call(t,t.siteData,n,i)}return R(t.siteData)}()===h.SignUp},showAuthenticationDialog:function(e){requirejs.defined("dialogs")?ge.call(this,e):requirejs(["dialogs"],ge.bind(this,e))},getMemberDetailsInternal:function(t,i,s,a){i=e.isFunction(i)?i:e.noop;var r=ae[this.siteData.siteId].siteMember;return!this.isLoggedIn()&&!a||r.details&&!s?(t&&t(r.details),r.details):(n.getMemberDetails(this.aspectState.read("smtoken"),function(i){r.details=i.payload,this.aspectState.update({smtoken:this.siteData.getSMToken(),memberDetails:r.details}),s&&function(){var t=this.aspectState.read("memberDetails");e.forEach(this._memberDetailsChangeRegisteredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"MEMBER_DETAILS_UPDATED",params:t})})}.call(this),t&&t(r.details)}.bind(this),i,a),null)},getMemberDetails:function(e,t,i){return this.getMemberDetailsInternal(e,t,i)},getMemberDetailsInPreview:function(e,t,i){return n.initializeData(this.siteData),this.getMemberDetailsInternal(e,t,i,!0)},isPageAllowed:function(e){if(this.aspectSiteApi.getRenderFlag("isPageProtectionEnabled")){var t=e.pageId;return z.call(this,this.siteData,Y(this.siteData,t),t)}return!0},showDialogOnNextRender:function(e){(function(){!1!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!1})}).call(this);var t=this.aspectState.read("logoutState");!1!==t&&this.aspectState.update({logoutState:!1});var i=e.pageId,n=Y(this.siteData,i),s=z.call(this,this.siteData,n,i),a=this.aspectState.read("navigatingOutPageId");if(!this.aspectState.read("dialogToDisplay")&&!s&&a!==i)if(this.shouldRenderCustomSignupPage(e))this.aspectSiteApi.navigateToPage({pageId:this.getCustomSignupPageId()}),this.aspectState.update({nextPageInfo:e});else if(function(e,t,i){return!0===e&&t&&t.pageId===i.getCurrentUrlPageId()}(t,e,this.siteData))this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()});else{var r=J.call(this,this.siteData,n,i),o=function(e,t,i){return{showDialogMessage:!0,nextPageInfo:e,dialogToDisplay:t,languageToDisplay:i&&i.dialogLanguage||S,passwordDigest:i&&i.passwordDigest||void 0,notClosable:e.pageId===this.siteData.getCurrentUrlPageId()&&e.pageId===this.siteData.getMainPageId()}}.call(this,e,r,n);this.aspectState.update(o)}},logout:function(t,i,s,a){var r=this;i=e.isFunction(i)?i:e.noop,s=e.isFunction(s)?s:e.noop,a=e.isObject(a)?a:{};var o=ae[this.siteData.siteId].siteMember;if(l.getCookie(y.WIX_CLIENT)&&o.details&&o.details.owner)V.call(this,m.SiteOwner,t),s("Current member is the site owner, which can not be logout");else{this.aspectState.update({logoutState:!0}),l.deleteCookie(y.SV_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath());var c={siteMember:o};if(l.getCookie(y.SM_SESSION))l.deleteCookie(y.SM_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath()),function(e,t){se.call(this,function(){e.siteMember.details=null,this.aspectState.update({notificationToDisplay:null}),this.aspectSiteApi.getSiteAPI().getSiteAspect("WidgetAspect").updateWixCodeModelDataAfterLogin(),t()}.bind(this))}.call(this,e.merge(c,{isHttpOnlySession:!1}),i);else{n.logout(function(){return e.isFunction(a.navigateToPage)?a.navigateToPage():r.aspectSiteApi.getSiteAPI().reloadPage()},s)}}},showResetPasswordDialog:function(t,i,n){this._santaSiteAuthAspect?this._santaSiteAuthAspect("showResetPasswordDialog",{language:t,successCallback:i,cancelCallback:n}):(W.call(this,h.ResetPasswordEmail,i,t,n),e.isFunction(i)&&this.aspectState.update({invokeResetPasswordDialogCb:!0}))},forceCloseDialog:function(){this._santaSiteAuthAspect?this._santaSiteAuthAspect("forceCloseDialog"):function(){!0!==this.aspectState.read("stopShowDialog")&&this.aspectState.update({stopShowDialog:!0})}.call(this)},reportSiteMembersBi:function(e,t){ce.call(this,a[e],t)},registerToUserLogin:function(t){var i=e.uniqueId("callback");return this.onLoginSuccessCallbacks.push({id:i,callback:t}),i},unRegisterToUserLogin:function(t){var i=e.findIndex(this.onLoginSuccessCallbacks,{id:t});-1!==i&&e.pullAt(this.onLoginSuccessCallbacks,i)},registerToMemberDetailsChange:function(e){this._memberDetailsChangeRegisteredComps[e.props.id]=e},unRegisterMemberDetailsChange:function(e){delete this._memberDetailsChangeRegisteredComps[e.props.id]},registerUser:function(t,i,s,a){var r=this,o=e.find(this.siteData.getClientSpecMap(),{appDefinitionId:"675bbcef-18d8-41f5-800e-131ec9e08762"});n.customRegister({email:t,password:i,contactInfo:s,instance:o.instance},function(e){return te.call(r,a,e)},function(e){return a(null,e)})},loginUser:function(e,t,i){var s=this,a=l.getCookie(y.SV_SESSION),r={email:e,password:t};n.login(r,function(e){return te.call(s,function(){return i(e.payload.sessionToken)},e,!0)},function(e){return i(null,e)},a,null)},authenticateSession:function(e,t){var i=this;n.authByToken(e,function(e){return te.call(i,t,e,!0)},function(e){return t(null,e)})}},i.registerSiteAspect("siteMembers",he),{getInitialDialogToDisplay:fe}}.apply(t,n))||(e.exports=s)},395:function(e,t,i){var n,s;n=[i(0),i(4),i(1),i(396),i(397)],void 0===(s=function(e,t,i,n,s){"use strict";function a(e){return e&&e.length>0&&"pagesData"===e[0]}function r(t,i){var n=this.pointers.page.getAllPagesPointer();this.displayedJsonDAL.set(n,{}),t.masterPage&&o.call(this,i,"masterPage"),e(t).omit("masterPage").keys().forEach(o.bind(this,i))}function o(e,t){e[t]=e[t]||{};var i=this.pointers.page.getPagePointer(t)||this.pointers.page.getNewPagePointer(t);this.displayedJsonDAL.set(i,{}),u.call(this,i,e)}function c(t,n,a,r){var o=n.structure.id||a,c=s(this.pointers,this.fullJsonGetters,o),u=i.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(n,t,o,c,this.pointersMapApi,r),p=this.pointers.page.getPagePointer(o)||this.pointers.page.getNewPagePointer(o),g=this.fullCache.getPath(p),h=e.has(u.structure,"mobileComponents"),f=this.displayedJsonDAL,m=this.pointers,v=f.get(m.multilingual.currentLanguageCode())||null,y=m.multilingual.originalLanguage(),S=f.isExist(y)?f.get(y).languageCode:null;if(!e.isNull(v)&&!e.isNull(S)&&v!==S){var A=e.cloneDeep(e.get(n,"translations."+v+".data.document_data",{}));e.assign(u.data.document_data,A)}var P=e.defaults({structure:l(u.structure,{includeMobile:h,id:a})},u);return d.call(this,p,P,g),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(o,i.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(o,i.constants.VIEW_MODES.MOBILE)),u}function u(n,r){var o=this.fullCache.getPath(n);if(this.pointers.page.isPointerPageType(n)){var u=e.get(this.fullJson,o),p=c.call(this,r,u,n.id);return this.anchorsAPI.createPageAnchors(n.id),p}if(o){var g=e.take(o,2),h=e.last(g),f=this.fullCache.getPath(e.assign({},n,{multilingual:t.multilingual.PointerOperation.GET})),m=e.get(this.fullJson,f);if(a(o)&&!function(t){return t&&e.includes(i.constants.DATA_TYPES,t.type)}(n)){var v=m.structure?m.structure:m;r[h]=function(t,n,s){var a=i.modes.resolveCompActiveModesRecursive(t,n);e.assign(n,a);var r=this.pointers.general.getActiveModes(),o=this.pointers.getInnerPointer(r,s);return this.displayedJsonDAL.set(o,n),n}.call(this,v,r[h],h);var y=this.pointers.page.isPointerPageType(n)?s(this.pointers,this.fullJsonGetters,h):s(this.pointers,this.displayedJsonDAL,h),S=i.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(m,r,h,y,this.pointersMapApi),A=e.defaults({structure:l(S.structure,{viewMode:n.type})},S),P=this.pointers.components.getParent(n);P&&(A.structure[n.type][v.id].parent=P.id),d.call(this,n,A,g),this.pointers.page.isPointerPageType(n)||this.pointers.components.isPage(n)?(this.updateDisplayedLayoutFunc(this.pointers.components.getPage(h,i.constants.VIEW_MODES.DESKTOP)),this.updateDisplayedLayoutFunc(this.pointers.components.getPage(h,i.constants.VIEW_MODES.MOBILE)),this.anchorsAPI.createPageAnchors(h)):this.updateDisplayedLayoutFunc(n)}else this.displayedJsonDAL.set(n,i.objectUtils.cloneDeep(m))}}var p=t.componentUtils.convertNestedStructureToFlat;function l(t,n){var s=n.viewMode,a=void 0===s?"ALL":s,r=n.includeMobile,o=void 0===r||r,c=n.id,u=void 0===c?"masterPage":c;if(e.isEmpty(t))return{};t.id||(t=e.defaults({id:u},t));var l="MOBILE"!==a&&p(t,i.constants.VIEW_MODES.DESKTOP),d=o&&("DESKTOP"!==a||t.mobileComponents)&&p(t,i.constants.VIEW_MODES.MOBILE);return e.pickBy({DESKTOP:l,MOBILE:d})}function d(t,n,s){var a=this;if(this.pointers.full.components.isPage(t)){var r=this.pointers.getInnerPointer(this.pointers.page.getPagePointer(t.id),"structure");this.displayedJsonDAL.merge(r,n.structure)}else if(function(e){return"page"===this.pointers.getPointerType(e)}.call(this,t))e.get(this.displayedJsonDAL.jsonData,s)?e.isEqual(this.displayedJsonDAL.get(t),n)||this.displayedJsonDAL.merge(t,n):this.displayedJsonDAL.set(t,n);else{var o=this.pointers.full.components.getPageOfComponent(t).id,c=i.displayedOnlyStructureUtil,u=c.getItemId,p=c.getUniqueFlatStructureMap;e.forEach(this.pointers.components.getAllDisplayedOnlyComponents(t),function(i){var s=u(i.id);if(s){var r=a.displayedJsonDAL.get(a.pointers.getInnerPointer(i,"layout")),c=a.displayedJsonDAL.get(a.pointers.getInnerPointer(i,"parent")),l=p(n.structure[a.pointers.components.getViewMode(t)],s,a.pointers.components.registerDisplayedOnlyComponent);l[i.id]=e.defaults({layout:r,parent:c},l[i.id]);var d=a.pointers.page.getComponentsMapPointer(o,t.type);a.displayedJsonDAL.merge(d,l)}else e.forEach(n.structure,function(i,n){var s="DESKTOP"===n?a.pointers.components.getDesktopPointer(t):a.pointers.components.getMobilePointer(t),r=a.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(s);e(r).pickBy(function(e){var t=e.id;return!i[t]}).forEach(function(e){a.displayedJsonDAL.remove(e)});var c=a.pointers.page.getComponentsMapPointer(o,n);a.displayedJsonDAL.merge(c,i)})})}}function g(e,t,i){e.components.registerDisplayedOnlyComponent(t,i)}function h(e,t){e.components.clearDisplayedOnlyComponents(t)}function f(t,s,a,r,o){s&&(this.fullJson=t,this.displayedJsonDAL=s,this.fullCache=a,this.pointers=r,this.anchorsAPI=new n(s.jsonData,r,s),this.pointersMapApi=function(t){return{update:e.partial(g,t),clear:e.partial(h,t)}}(r),this.fullJsonGetters={get:function(n){var s=a.getPath(n);return i.objectUtils.cloneDeep(e.get(t,s))}},this.updateDisplayedLayoutFunc=o)}return f.prototype={updateDisplayedJsonByPointer:function(t,i){var n=this.fullCache.getPath(t);if(!n)throw new Error("pointer path does not exist");if(function(t){return e.isEqual(t,["pagesData"])}(n)){var s=e.get(this.fullJson,n);r.call(this,s,i)}else if(a(n))u.call(this,t,i);else{var o=e.get(this.fullJson,n);this.displayedJsonDAL.set(t,o)}},updateDisplayedJsonInPagesDataByPointer:u,updateDisplayedPagesData:r,updateDisplayedRoot:c},f}.apply(t,n))||(e.exports=s)},396:function(e,t,i){var n,s;n=[i(0),i(1),i(4)],void 0===(s=function(e,t,i){"use strict";var n=new t.SiteDataPrivates,s=i.layoutUtils;function a(t){var n=function(t){return i.DALFactory.getFullPagesData(t,e.pick(t,"pagesData")).pagesData.masterPage.structure}(t.siteData);return i.masterPageLayoutUtils.shouldApplyMobileTightLayout(n)}function r(i,n,s,r,o){var c=i.siteData,u=function(i,n,s,r){var o=i.siteData;if(r.forceMobileStructure&&a(i))return t.layoutAnchors.createMobileTightMasterPageAnchors(n,s,r);var c=e.get(o,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createPageAnchors(n,s,r,c)}(i,n,s,r),p={PAGES_CONTAINER:[{distance:0,locked:!0,originalValue:0,fromComp:"PAGES_CONTAINER",targetComponent:"masterPage",type:"BOTTOM_PARENT"}],SITE_PAGES:[{distance:0,locked:!0,originalValue:0,fromComp:"SITE_PAGES",targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]};e.set(c,["anchorsMap",n.id,o],u),e.set(c,["anchorsMap","defaultMasterPage",o],u),e.set(c,["anchorsMap","landingPageMasterPage",o],p)}function o(t,i){var n=t.getMasterPageLayoutSettings();return{headerPagesContainerLegacyGap:e.get(n,["headerToPagesGap"]),pagesContainerFooterLegacyGap:e.get(n,["pagesToFooterGap"]),useDesktopSectionsLayout:e.get(n,["useDesktopSectionsLayout"]),forceMobileStructure:e.get(i,"forceMobileStructure",t.isMobileView()),applyGroupingAnchors:e.get(i,"applyGroupingAnchors",t.isMobileView()&&t.isViewerMode())}}function c(e,t,i){this.privatesKey=e,n.set(e,{siteData:e,displayedDAL:i,pointers:t})}return c.prototype={createPageAnchors:function(a,c){var u=n.get(this.privatesKey),p=u.siteData;if(s.getLayoutMechanism(p)!==t.constants.LAYOUT_MECHANISMS.MESH){var l=o(p,c),d=l.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP,g=p.getPageData(a,["structure"],!0);if(g&&!e.isEmpty(g[d])){var h=p.getAllStylesFromPossiblyRenderedRoots(),f=i.flatStructureUtil.getDeepStructureForComp(p,a,null,d);if(f.id===t.siteConstants.MASTER_PAGE_ID)r(u,f,h,l,d);else{var m=e.get(p,["displayedOnlyComponents","componentTemplateId"]),v=t.layoutAnchors.createPageAnchors(f,h,l,m);e.set(p,["anchorsMap",f.id,d],v)}}}},removePageOriginalValues:function(i,s){var a=n.get(this.privatesKey).siteData,r=a.getPageData(i,["structure"]),o=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode();e.set(a,["originalValuesMap",r.id,o],{})},createChildrenAnchors:function(r,c,u){var p=n.get(this.privatesKey),l=p.siteData;if(s.getLayoutMechanism(l)!==t.constants.LAYOUT_MECHANISMS.MESH&&l.anchorsMap[c]){var d=o(l,u),g=c,h=d.forceMobileStructure?t.constants.VIEW_MODES.MOBILE:t.constants.VIEW_MODES.DESKTOP,f=function(i,n,s){var r=n.siteData;if(i.id===t.siteConstants.MASTER_PAGE_ID&&s.forceMobileStructure&&a(n))return t.layoutAnchors.createMobileTightSectionsAnchors(i);var o=r.getAllStylesFromPossiblyRenderedRoots(),c=e.get(r,["displayedOnlyComponents","componentTemplateId"]);return t.layoutAnchors.createChildrenAnchors(i,o,s,r,c)}(i.flatStructureUtil.getDeepStructureForComp(l,c,r.id,h),p,d);e.assign(l.anchorsMap[g][h],f)}}},c}.apply(t,n))||(e.exports=s)},397:function(e,t,i){var n;void 0===(n=function(){"use strict";return function(e,t,i){return function(n){var s={};if(n.dataQuery){var a=e.data.getDataItem(n.dataQuery.replace("#",""),i);s.dataItem=t.get(a)}if(n.propertyQuery){var r=e.data.getPropertyItem(n.propertyQuery.replace("#",""),i);s.propertiesItem=t.get(r)}return s}}}.apply(t,[]))||(e.exports=n)},398:function(e,t,i){var n,s;n=[i(0),i(3),i(13)],void 0===(s=function(e,t,i){"use strict";return{propTypes:{compFactoryRuntimeState:t.Types.compFactoryRuntimeState},createChildComponent:function(n,s,a,r){var o=i.compFactory.getCompReactClass(s,this.props.compFactoryRuntimeState);return o?i.compFactory.getCompClass(s,!0,this.props.compFactoryRuntimeState)(function(i,n,s,a,r){r=r||{};var o=this.getSkinExports(),c="string"==typeof a?{skin:o[a].skin,styleId:this.props.styleId+a}:a,u={compProp:e.omit(this.props.compProp,["isHidden","isCollapsed"]),compData:i,skin:c.skin,styleId:c.styleId};if(!i&&!r.id)throw new Error("Unable to set child comp id - no data item\\custom id were passed");if(u.id=r.id||this.props.id+i.id,!i&&!r.ref)throw new Error("Unable to set child comp ref - no data item\\custom ref were passed");u.ref=r.ref||i.id,u.structure={componentType:n,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:r.skinPart||u.ref};var p=t.santaTypesUtils.getSantaTypesForChildComponentClass(s),l=e.pick(this.props,e.keys(p));return e.assign(l,u,e.omit(r,"structure"))}.call(this,n,s,o,a,r)):null}}}.apply(t,n))||(e.exports=s)},399:function(e,t,i){var n,s;n=[i(0),i(5),i(18),i(6)],void 0===(s=function(e,t,i,n){"use strict";return i({displayName:"wixTransitionItem",mixins:[n.mixins.animatableMixin],propTypes:{onWillEnter:t.func.isRequired,onWillLeave:t.func.isRequired,refInParent:t.string,children:t.node},render:function(){return this.props.children},componentWillEnter:function(e){this.props.onWillEnter(this.props.refInParent,e)},componentWillLeave:function(e){this.props.onWillLeave(this.props.refInParent,e)}})}.apply(t,n))||(e.exports=s)},4:function(e,t){e.exports=n},400:function(e,t,i){var n,s;n=[i(1)],void 0===(s=function(e){"use strict";var t={Image:function(e,t,i){var n={id:"imageZoomComp",key:"imageZoomComp",dataQuery:"#"+e.id,skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};return t&&(n.propertyQuery=t),i.isMobileView()?(n.skin="wysiwyg.viewer.skins.TouchMediaZoom",n.componentType="wysiwyg.viewer.components.TouchMediaZoom"):(i.isMobileDevice()||i.isTabletDevice())&&(n.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"),n},PermaLink:function(e,t,i){var n={id:"appPartZoomComp_"+i.getRootNavigationInfo().pageAdditionalData.split("/")[0],key:"appPartZoomComp",dataQuery:"#"+e.id,skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};return t&&(n.propertyQuery=t),i.isMobileView()&&(n.skin="wysiwyg.skins.MobileAppPartZoomSkin"),n}};return{registerPageItem:function(i,n){t[i]?e.log.error("page item already registered "+i):t[i]=n},getCompStructure:function(e,i,n,s){return t[e]?t[e](i,n,s):null},clear:function(){t={}}}}.apply(t,n))||(e.exports=s)},401:function(e,t,i){var n,s;n=[i(0),i(1),i(25)],void 0===(s=function(e,t,i){"use strict";var n="AudioAspect",s=10,a=s;function r(i,s){return e.assign({url:function(e){var i=e.scriptsDomainUrl;t.stringUtils.endsWith(i,"/")||(i+="/");return i+"services/third-party/soundmanager2/V2.97a.20150601/"}(i.siteAPI.getSiteData().serviceTopology),flashVersion:9,preferFlash:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,html5PollingInterval:100,onready:function(){i.siteAPI.updateAspectGlobalData(n,{soundManagerReady:!0})}},s||{})}function o(){a=s}function c(e){var t=r(e,{preferFlash:!0,useHTML5Audio:!1,onready:function(){e.siteAPI.updateAspectGlobalData(n,{soundManagerOnResetup:!1,soundManagerReady:!0})}});e.soundManager.destruct(),e.soundManager.reset().setup(t),e.soundManager.beginDelayedInit()}var u=function(e){var t=r(e);e.soundManager.setup(t),setTimeout(function(){p(e)},a)},p=function e(i){null===i.soundManager?requirejs(["SoundManager"],function(t){i.soundManager=t.getInstance(),e(i)}):i.siteAPI.getAspectGlobalData(n).soundManagerReady?o():1e4>a?(u(i),a*=1.5):(o(),t.log.verbose("Failed to setup SoundManager."))};function l(t){this.siteAPI=t,this.soundManager=null,this.siteAPI.updateAspectGlobalData(n,{nowPlayingComp:"",soundManagerReady:!1,soundManagerOnResetup:!1}),e.bindAll(this,e.functionsIn(this))}return l.prototype={loadSoundManagerAPI:function(){this.siteAPI.getSiteData().isInSSR()||window.isMockWindow||p(this)},onHTML5ErrorTryToReloadWithFlash:function(){!function(e){u!==c&&(e.siteAPI.updateAspectGlobalData(n,{soundManagerOnResetup:!0,soundManagerReady:!1}),u=c,c(e))}(this)},createAudioObj:function(e){return this.siteAPI.getAspectGlobalData(n).soundManagerReady?(e.id&&this.soundManager.getSoundById(e.id)&&this.soundManager.destroySound(e.id),this.soundManager.createSound(e)):(this.loadSoundManagerAPI(),!1)},updatePlayingComp:function(e){this.siteAPI.getAspectGlobalData(n).soundManagerReady||this.loadSoundManagerAPI(),this.siteAPI.updateAspectGlobalData(n,{nowPlayingComp:e.props.id})},updatePausingComp:function(){this.siteAPI.updateAspectGlobalData(n,{nowPlayingComp:""})}},i.registerSiteAspect(n,l),l}.apply(t,n))||(e.exports=s)},47:function(e,t){e.exports=m},5:function(e,t){e.exports=s},51:function(e,t){e.exports=v},6:function(e,t){e.exports=a},67:function(e,t){e.exports=y},7:function(e,t){e.exports=r},74:function(e,t,i){var n,s;n=[i(6)],void 0===(s=function(e){"use strict";return e.utils.createReactElement}.apply(t,n))||(e.exports=s)},8:function(e,t){e.exports=o},821:function(e,t,i){var n,s;n=[i(0),i(1),i(4),i(7),i(6),i(378),i(257),i(858),i(393),i(25),i(177),i(398),i(859),i(860),i(861),i(391),i(256),i(392),i(862),i(863),i(864),i(865),i(866),i(867),i(377),i(868),i(873),i(382),i(108),i(874),i(399),i(180),i(258),i(379),i(876),i(139),i(877),i(383),i(385),i(397),i(395),i(384),i(389),i(878),i(879),i(401),i(922),i(925)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p,l,d,g,h,f,m,v,y,S,A,P,I,D,_,C,E,T,b,w,R,M,x,O,k,L,N,B,U,F,q,W,V,G){"use strict";return{SiteDataAPI:f,SiteAPI:m,RuntimeDal:v,MobileDeviceAnalyzer:t.MobileDeviceAnalyzer,renderer:a,WixSiteHeadRenderer:_,compRegistrar:r,styleCollector:o,dataRequirementsChecker:c,siteAspectsRegistry:u,requireCompCode:p,compMixins:{intervalsMixin:t.timersMixins.intervalsMixin,timeoutsMixin:t.timersMixins.timeoutsMixin,skinBasedComp:s.mixins.skinBasedComp(n.skinsMap),customSkinBasedComp:function(t){var i=t.customCssFunc,a=t.customFontsFunc,r=s.mixins.skinBasedComp(n.skinsMap);if(i){var o=r.statics.getCompCss;r.statics.getCompCss=function(t,s){var a=o(t,s),r=i(function(e){return n.skinsMap.get(e)},s);return e.assign(a,r)},r.statics.getCompCss.cssTypes=e.assign(i.cssTypes,r.statics.getCompCss.cssTypes)}if(a){var c=r.statics.getCompFonts;r.statics.getCompFonts=function(t,i){var n=c(t,i),s=a(i);return e.union(n,s)},r.statics.getCompFonts.fontsTypes=e.assign(a.fontsTypes,r.statics.getCompFonts.fontsTypes)}return r},createChildComponentMixin:l,cyclicTabbingMixin:d,inputFocusMixin:s.mixins.inputFocusMixin,validatableMixin:s.mixins.validatableMixin,validatableWithSyncMixin:s.mixins.validatableWithSyncMixin,runTimeCompData:s.mixins.runTimeCompData,skinInfo:h,mediaZoomWrapperMixin:A,galleryImageExpandedActionMixin:P,baseCompMixin:s.mixins.baseCompMixin,inlineContentMixin:s.mixins.inlineContentMixin,postMessageCompMixin:t.postMessageCompMixin,uniquePageIdMixin:D,blockOuterScrollMixin:g,compActionMixin:s.mixins.compActionMixin,compStateMixin:s.mixins.compStateMixin},componentUtils:{fullScreenOverlay:k,galleryPagingCalculations:y,matrixAnimationManipulation:I,boxSlideShowCommon:S},createReactElement:s.utils.createReactElement,activityTypes:C,activityService:E,SiteAspectsSiteAPI:T,behaviorHandlersFactory:M,behaviorsService:x,wixTransitionGroup:w,wixTransitionItem:R,biEvents:b,DataAccessPointers:i.pointers.DataAccessPointers,PointersCache:i.pointers.PointersCache,pointerGeneratorsRegistry:i.pointers.pointerGeneratorsRegistry,SimpleDisplayedJsonUpdater:q,aspects:{widgetAspectPropsFetcher:B,popoverAspectPropsFetcher:U},wixCode:{componentsFetcher:W},forTests:{WixSiteReact:O},errors:L,structureInfoGetter:F,animationsService:N,viewerCompsService:V,externalComponentsServicesRegistry:G}}.apply(t,n))||(e.exports=s)},822:function(e,t,i){var n,s;n=[i(6),i(0),i(18),i(27),i(47),i(1),i(823)],void 0===(s=function(e,t,i,n,s,a,r){"use strict";var o=a.fonts.fontUtils;function c(){var e=this.props.siteData,i=function(e,t){return e.getDataByQuery(t,e.MASTER_PAGE_ID,e.dataTypes.THEME)}(e,"THEME_DATA"),s=n.computed(function(){return o.getPageUsedFontsList(e)});i&&i.font&&function(e){var i=this,s=this.props.siteAPI.getSiteAspect("fontsLoaderAspect");if(s){var a=n.computed(function(){var i=e.get(),n=t(i).flattenDeep().uniq().value(),a=s.filterHandledFonts(n);return!t.isEmpty(a)&&a}),r=function(){var e=a.get();t.isEmpty(e)||s.loadFonts(e,i.props.requestRelayout)};this.disposeLoadFonts=n.observe(a,r),r()}}.call(this,s)}function u(e,t){var i=window.document.getElementById("font_"+t);return!i||(i.removeAttribute("media"),!1)}var p=i({displayName:"WixThemeReact",setTestStyleRef:function(e){this.testStyleComp=e},getInitialState:function(){return{}},render:function(){var i=this.props,n=i.siteData,s=i.styleRoot,a=i.shouldRenderPage,c=n.getDataByQuery("THEME_DATA",n.MASTER_PAGE_ID,n.dataTypes.THEME);if(c&&c.font){var p=n.getFontsMap(),l=n.getColorsMap(),d=a&&function(e){var i=e.rendererModel.siteInfo.documentType,n=o.getCssUrls(i,e.serviceTopology);return e.isInSSR()||e.isClientAfterSSR()?{externalFontsStyles:e.externalStyles}:{externalFontsUrls:n=t.pickBy(n,u)}}(n);return e.utils.createReactElement(r,t.assign({siteData:n,styleRoot:s,fonts:p,colors:l},d))}},componentWillMount:function(){c.call(this)},componentWillUnmount:function(){this.disposeLoadFonts&&this.disposeLoadFonts()}});return s.observer(p)}.apply(t,n))||(e.exports=s)},823:function(e,t,i){var n,s;n=[i(6),i(74),i(0),i(47),i(5),i(13),i(824),i(825)],void 0===(s=function(e,t,i,n,s,a,r,o){"use strict";var c=function(n){var s,c=i.compact(i.concat(function(e,i,n){return[i&&t(r,{styleRoot:e,key:"fontsStyleNode",fontsMap:i,colorsMap:n}),n&&t(o,{styleRoot:e,key:"colorsStyleNode",colorsMap:n})]}(n.styleRoot,n.fonts,n.colors),function(e){return i.map(e,function(e,t){return a.styleNodeUtils.generateStyleNode(t,e)})}(n.externalFontsStyles),function(t){return i.map(t,function(t,i){return e.utils.createReactElement("link",{rel:"stylesheet",type:"text/css",href:t,key:i})})}(n.externalFontsUrls)));return(s=e.utils).createReactElement.apply(s,["div",{key:"theme"}].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(c)))};return c.displayName="ThemeRenderer",c.propTypes={styleRoot:s.string,fonts:s.arrayOf(s.string),colors:s.arrayOf(s.string),externalFontsStyles:s.object,externalFontsUrls:s.object},n.observer(c)}.apply(t,n))||(e.exports=s)},824:function(e,t,i){var n,s;n=[i(0),i(5),i(18),i(47),i(1),i(13)],void 0===(s=function(e,t,i,n,s,a){"use strict";var r=s.fonts.fontCss,o=i({displayName:"WixFontsStyleNode",propTypes:{fontsMap:t.array.isRequired,colorsMap:t.array.isRequired,styleRoot:t.string},render:function(){var e=r.getThemeFontsCss(this.props.fontsMap,this.props.colorsMap);return a.styleNodeUtils.generateStyleNode("theme_fonts",e,this.props.styleRoot)}});return n.observer(o)}.apply(t,n))||(e.exports=s)},825:function(e,t,i){var n,s;n=[i(0),i(5),i(18),i(47),i(1),i(13)],void 0===(s=function(e,t,i,n,s,a){"use strict";var r=s.cssUtils,o=i({displayName:"WixColorsStyleNode",propTypes:{colorsMap:t.array.isRequired,styleRoot:t.string},render:function(){var e=r.getColorsCssString(this.props.colorsMap);return a.styleNodeUtils.generateStyleNode("theme_colors",e,this.props.styleRoot)}});return n.observer(o)}.apply(t,n))||(e.exports=s)},826:function(e,t,i){var n,s;n=[i(0),i(5),i(6),i(97),i(14),i(4),i(13),i(380)],void 0===(s=function(e,t,i,n,s,a,r,o){"use strict";var c=function(e){var t=e.children,n=e.id;return i.utils.createReactElement("div",{id:n,style:{width:"100%"}},t)};c.propTypes={id:i.santaTypesDefinitions.Component.id};var u={SITE_ROOT:"SITE_ROOT",SITE_BACKGROUND:"SITE_BACKGROUND",WIX_ADS:a.constants.COMP_IDS.WIX_ADS},p=function(e){return function(t){var n=t.children;return i.utils.createReactElement("div",{className:u.SITE_ROOT,key:u.SITE_ROOT,id:u.SITE_ROOT,style:e,"aria-hidden":void 0},n)}};var l="WixAds";var d=["behaviors_data","connections_data","document_data","design_data","mobile_hints","component_properties","theme_data"];function g(t){var i=t.getViewMode(),n=function(t,n){return e.mapValues(t.structure[i],function(t){return e.defaults({metaData:{rootId:n}},t)})},s=t.getPageData("masterPage",null,!0),a=t.getCurrentUrlPageId(),r=t.getPageData(a,null,!0),o=e.defaults({data:e.reduce(d,function(t,i){return e.set(t,i,e.assign({},s.data[i],r.data[i]))},{}),structure:e.assign({},n(s,"masterPage"),n(r,a))},r);return o.data.document_data=function(t){return e.mapValues(t,function(i){if("Page"!==i.type)return i;var n=i.pageBackgrounds,s=n.desktop,a=n.mobile,r={pageBackgrounds:{desktop:{ref:t[s.ref.replace("#","")]},mobile:{ref:t[a.ref.replace("#","")]}}};return e.defaultsDeep(r,i)})}(o.data.document_data),o.structure.SITE_PAGES.components=[a],e.assign(o.structure,e.keyBy([{id:u.SITE_BACKGROUND,skin:"wysiwyg.viewer.skins.siteBackgroundSkin",styleId:"siteBackground",layout:{},componentType:"wysiwyg.viewer.components.SiteBackground"},{id:u.SITE_ROOT,componentType:u.SITE_ROOT,type:"Container",components:["masterPage"]},{id:u.WIX_ADS,componentType:l}],"id")),o}function h(t){var i=t.siteAPI,d=t.siteAspects,h=i.getSiteData(),f=g(h),m=e.reduce(s.dataRefs,function(t,i){var n=e.mapValues(i,function(t){return e.mapValues(t,function(){return"ref"})});return e.defaults(n,t)},{});delete m.Page,delete m.AppPage;var v=a.eventsManager.create(),y=new n.utils.ComponentsModelAspect(f,v,m);return{aspects:e.defaults({componentsModelAspect:y},d),rootCompsIds:function(e){return e?[u.WIX_ADS,u.SITE_BACKGROUND,u.SITE_ROOT]:[u.SITE_BACKGROUND,u.SITE_ROOT,u.WIX_ADS]}(h.isMobileView()),getSantaFetcher:function(t){var n=y.getFetcher(t);return n&&"Component.style"!==t.id?n:function(n,s){var a=t.fetch||i.getSantaFetcher(t),r=e.defaults({siteData:h,siteAPI:i},n),o=y.displayedDAL.get(y.pointers.components.getComponent(s.id));return a(r,e.defaults({structure:o,rootId:e.get(o.metaData,"rootId")},s))}},getCompClass:function(e){switch(e){case l:return o(i);case u.SITE_ROOT:return p({width:"100%",top:h.getPageTopMargin(),paddingBottom:h.getPageBottomMargin()});case"wysiwyg.viewer.components.PageGroup":return c;default:return r.compFactory.getCompReactClass(e)}},eventsManager:v}}var f=function(e){return i.utils.createReactElement(n.Renderer,h(e))};return f.propTypes={siteAPI:t.shape({getSantaFetcher:t.func.isRequired,getSiteData:t.func.isRequired}).isRequired,siteAspects:t.object.isRequired,rootElementProps:t.object},f}.apply(t,n))||(e.exports=s)},827:function(e,t,i){var n,s,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();n=[i(0),i(5),i(47),i(11),i(19),i(12),i(6),i(1)],void 0===(s=function(e,t,i,n,s,r,o,c){"use strict";var u="testStyles",p=1e3,l=30,d=10*l;function g(){if(this._isMounted){this.waitingForStylesReady||(this.waitingForStylesReady=!0,this.waitingStartTime=e.now());var t=n(r.findDOMNode(this.testStyleComp));if(e.isFunction(this.props.afterStylesReadyCallback)&&t.css("z-index")==this.testNodeIndex){var i=e.now()-this.waitingStartTime>p;if(i||"visible"!==t.css("overflow-y"))return i&&c.log.info("waitForStylesReady waiting for testStyles",t.css("overflow-y")),this.waitingForStylesReady=!1,void this.props.afterStylesReadyCallback()}c.animationFrame.request(this.waitForStylesReady)}}var h=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.waitingForStylesReady=!1,t.waitingStartTime=0,t.testNodeIndex=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.Component),a(i,[{key:"render",value:function(){var e=this;return this.props.siteData.getAllStylesFromPossiblyRenderedRoots(),this.testNodeIndex++,o.utils.createReactElement("div",{},function(e,t,i){var n=(t?t+" ":"")+"."+u+" {position:absolute; display: none; z-index: "+e+"}";return[o.utils.createReactElement("style",{type:"text/css",key:"testStyle"},n),o.utils.createReactElement("div",{key:u+"_div",ref:i,className:u})]}(this.testNodeIndex,this.props.styleRoot,function(t){e.testStyleComp=t}))}},{key:"componentWillMount",value:function(){(function(){var t=this.props.siteData;this.waitForStylesReady=e.debounce(g.bind(this),t.browser.firefox||t.browser.safari||t.os.ios?d:l)}).call(this)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.waitingForStylesReady=!1}},{key:"doWaitForStylesReadyRoutine",value:function(){this.waitingForStylesReady||g.call(this)}},{key:"componentDidMount",value:function(){this._isMounted=!0}}]),i}();return h.propTypes={styleRoot:t.string,siteData:t.object.isRequired,afterStylesReadyCallback:t.func.isRequired},i.observer(h)}.apply(t,n))||(e.exports=s)},828:function(e,t,i){var n,s;n=[i(0),i(4),i(13)],void 0===(s=function(e,t,i){"use strict";var n=t.structuresDescription.getSiteBackgroundStructure();return Object.freeze(n),{getWixBgStructure:function(){return n},getWixBgComponent:function(e){var t={mobxObserverWrapperProps:e,structure:n,rootId:"masterPage",key:n.id,id:n.id};return i.compFactory.getCompClass("wysiwyg.viewer.components.SiteBackground",!1,e.siteAPI.getSiteData().compFactoryRuntimeState)(t)}}}.apply(t,n))||(e.exports=s)},829:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t=["No Site Type","WixSite","UGC","Template"];var i=function(i,n){var s=i.getServiceTopologyProperty("biServerUrl")||"https://frog.wix.com/",a=i.baseVersion||"unknown",r=i.getMetaSiteId(),o=i.isPremiumDomain()?1:0,c=function(i){var n=i.rendererModel.siteInfo.documentType,s=e.indexOf(t,n);return-1!==s?s:n}(i),u=12===n?"sentPartiallyVisibleBeat":"sentMeshEligibilityBeat";return"\n        try {\n            if (wixBiSession && !wixBiSession."+u+") {\n                wixBiSession."+u+" = true;\n                var tts = '';\n                if (performance) {\n                    if (performance.now) {\n                        tts = '&tts=' + Math.round(performance.now());\n                    }\n                    if (performance.mark) {\n                        performance.mark('"+(12===n?"partially visible":"meshable")+" (beat "+n+")');\n                    }\n                }\n                (new Image()).src = '"+s+"bt?src=29&evid=3&pn=1&et="+n+"&v="+a+"&msid="+r+"&vsi=' + wixBiSession.viewerSessionId +\n                    '&url=' + encodeURIComponent(location.href.replace(/^http(s)?:\\/\\/(www\\.)?/, '')) +\n                    '&isp="+o+"&st="+c+"&ts=' + (Date.now() - new Date(wixBiSession.initialTimestamp)) + tts + '&iss=1&c=' + Date.now();                \n            }\n        } catch (e) {}\n        "};return{createPartiallyVisibleBeatScriptString:function(e){return i(e,12)},createMeshEligibilityBeatScriptString:function(e){return i(e,13)}}}.apply(t,n))||(e.exports=s)},830:function(e){e.exports={NULL_SITE_ERROR:{errorName:"NULL_SITE_ERROR",errorCode:112e3,severity:"error",params:{p1:"errorMsg",p2:"modules"}},SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED:{errorCode:111020,severity:"warning",params:{p2:"pageId",p1:"hostname",p3:"url",p4:"responseStatusCode"}},ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED:{errorCode:111021,severity:"fatal",params:{p1:"pageId"}},NO_SEQUENCE_TO_RUN_ANIMATIONS_ON:{errorCode:111026,severity:"error",params:{p1:"sequenceId"}},INVALID_CODE_EMBED_SCRIPT:{errorCode:111031,severity:"error",params:{}},FIXED_PAGE_REQUEST_FAILED:{errorCode:111032,severity:"error",params:{p1:"errorName",p2:"failRequestUrl",p3:"status",p4:"responseText"}}}},831:function(e,t,i){var n,s;n=[i(0),i(11),i(25),i(382),i(383),i(385),i(97),i(1),i(4)],void 0===(s=function(e,t,i,n,s,a,r,o,c){"use strict";var u=[];function p(t,i,n){return c.renderUtils.mapInAlphabeticalOrder(t,function(t){var s=t[i];return e.isFunction(s)&&s.apply(t,n)||u})}var l={mount:"mount",unmount:"unmount",urlPageChange:"urlPageChange",renderedRootsChanged:"renderedRootsChanged",addedRenderedRootsDidLayout:"addedRenderedRootsDidLayout",modeChange:"modeChange",fakeModeChange:"fakeModeChange",slideChange:"slideChange",didLayout:"didLayout",siteReady:"siteReady",willMount:"willMount",willUpdate:"willUpdate",aspectsReady:"aspectsReady",viewportChange:"viewportChange",svSessionChange:"svSessionChange",siteMetadataChange:"siteMetadataChange",onRendered:"onRendered",fullyRendered:"fullyRendered",sssrSuccess:"sssrSuccess"},d={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",keyup:"keyup",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"},g={visibilitychange:"visibilitychange",click:"click"},h=e.assign(e.clone(l),d,g);function f(){var t=this.siteAPI.getRootIdsWhichShouldBeRendered();if(!e.isEqual(t,this._previoslyRenderedRoots)){var i=e.difference(this._previoslyRenderedRoots,t),n=e.difference(t,this._previoslyRenderedRoots);this._rootsAddedAndNotYetLayouted=e(this._rootsAddedAndNotYetLayouted).concat(n).difference(i).uniq().value(),this._previoslyRenderedRoots=e.clone(t),this.notifyAspects(l.renderedRootsChanged,n,i)}}function m(){var t=this.siteAPI.getSiteData().getRootNavigationInfo(),i=this._previoslyNavigationInfo;if(!e.isEqual(t,i)){if(c.dynamicPagesUtils.isSamePageNavigation(t,i))if(c.dynamicPagesUtils.isInnerRouteChanged(t,i))this.siteAPI.getSiteAspect("actionsAspect").handlePagePageNavigationCanceled(),this.notifyAspects(h.urlPageChange);this._previoslyNavigationInfo=t}}function v(){var t=this.siteAPI.getSiteData().isClientAfterSSR();e.forEach(i.getAllAspectConstructors(),function(i,n){this.siteAspects[n]||(this.props.viewerPrivateServices.displayedDAL.setByPath(["siteAspectsData",n],{globalData:void 0,dataByCompId:{}}),this.siteAspects[n]=new i(this._aspectsSiteAPI),t&&e.invoke(this.siteAspects[n],"applySsrChanges"))}.bind(this)),function(){var t=this,n={WidgetAspect:{constructorArgs:[r.utils.storageAPI.getStorage(),this.props.eventsManager,this._aspectsSiteAPI],mapStateToProps:s},popoverAspect:{constructorArgs:[r.utils.storageAPI.getStorage()],mapStateToProps:a}};e.forEach(n,function(e,n){if(!t.siteAspects[n]&&i.getHostLibsAspectConstructor(n)){var s=t._aspectsSiteAPI.initHostLibsAspect(n,e.mapStateToProps,e.constructorArgs);t.siteAspects[n]=s}})}.call(this),this.notifyAspects(this.supportedEvents.aspectsReady)}Object.freeze(h);var y={didLayout:function(){if(!e.isEmpty(this._rootsAddedAndNotYetLayouted)){var t=this._rootsAddedAndNotYetLayouted;this._rootsAddedAndNotYetLayouted=[],this.notifyAspects(l.addedRenderedRootsDidLayout,t)}}};return{supportedEvents:h,getAllSiteAspects:function(){return v.call(this),this.siteAspects},getInitialState:function(){return this._aspectsSiteAPI=new n(this),this.props.viewerPrivateServices.siteAspectsSiteAPI&&this.props.viewerPrivateServices.siteAspectsSiteAPI.setSite(this),this.siteAspects=this.props.viewerPrivateServices.siteAspects||{},this._listenersOnWindow=[],this._listenersOnDocument=[],this._previoslyRenderedRoots=[],this._previoslyNavigationInfo={},this._rootsAddedAndNotYetLayouted=[],{}},componentWillMount:function(){v.call(this),this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},componentWillUpdate:function(){v.call(this),this._aspectsSiteAPI.getSiteAspect("WidgetAspect").syncAppsState()},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectComponentDescriptions:function(){return e.flattenDeep(p(this.siteAspects,"getComponentsToRender",[this._aspectsSiteAPI]))},getAspectsComponentStructures:function(){var t=e.flattenDeep(p(this.siteAspects,"getComponentStructures")),i=e.map(this.getAspectComponentDescriptions(),"structure");return t.concat(i)},componentDidMount:function(){var i=t(window),n=t(window.document);e.forEach(d,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnWindow.push(t),i.on(e,t.listener)}.bind(this)),e.forEach(g,function(e){var t={eventName:e,listener:this.notifyAspects.bind(this,e)};this._listenersOnDocument.push(t),n.on(e,t.listener)}.bind(this));var s={eventName:d.orientationchange,listener:function(){this.notifyAspects("orientationchange"),this.timeout=window.setTimeout(this.notifyAspects.bind(this,d.resize),300)}.bind(this)};this._listenersOnWindow.push(s),i.on(s.eventName,s.listener),this.notifyAspects("mount"),f.call(this),m.call(this)},componentDidUpdate:function(){f.call(this),m.call(this)},componentWillUnmount:function(){var i=t(window),n=t(window.document);e.forEach(this._listenersOnWindow,function(e){i.off(e.eventName,e.listener)}),e.forEach(this._listenersOnDocument,function(e){n.off(e.eventName,e.listener)}),window.clearTimeout(this.timeout),this._aspectsSiteAPI.onSiteUnmount(),this.notifyAspects("unmount")},notifyAspects:function(e){for(var t,i=y[e],n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];i&&i.apply(this,s),(t=this.props.eventsManager).emit.apply(t,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(s)))},registerAspectToEvent:function(e,t){e===l.siteReady&&this.siteIsReady||e===l.fullyRendered&&this.siteIsFullyRendered?t():h[e]?this.props.eventsManager.on(e,t):o.log.error("this event isn't supported by site "+e)},unregisterAspectFromEvent:function(e,t){this.props.eventsManager.off(e,t)}}}.apply(t,n))||(e.exports=s)},832:function(e,t,i){var n,s;n=[i(6),i(74),i(0),i(19),i(12),i(5),i(18),i(27),i(47),i(833),i(834),i(836)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p,l){"use strict";var d=n.createFactory(u),g=c.observer(r({propTypes:{siteAPI:a.shape({getSiteAspect:a.func.isRequired}).isRequired},render:function(){var e=this.props.siteAPI.getSiteAspect("fontsLoaderAspect"),n=i.invoke(e,"getReactComponents");return t("div",null,n)}})),h=r({propTypes:{siteAPI:a.shape({setPopoversLayer:a.func.isRequired}).isRequired},render:function(){return t("div",{id:"popoverLayer"})},componentDidMount:function(){this.props.siteAPI.setPopoversLayer(s.findDOMNode(this))}});return c.observer(r({displayName:"siteAspectsDomContainer",propTypes:{siteAPI:a.shape({setComponentRenderStart:a.func.isRequired,setComponentRenderEnd:a.func.isRequired,cancelReLayoutPending:a.func.isRequired}).isRequired,isMobileView:e.santaTypesDefinitions.isMobileView,siteWidth:e.santaTypesDefinitions.siteWidth,requestRelayout:a.func,getAspectComponentDescriptions:a.func},componentWillMount:function(){this.computedAspectComponentsDesc=o.computed(function(){return this.props.getAspectComponentDescriptions()},{name:"computedAspectComponentsDesc",context:this}),this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentWillUpdate:function(){this.props.siteAPI.setComponentRenderStart(this.constructor.displayName)},componentDidMount:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentDidUpdate:function(){this.props.siteAPI.setComponentRenderEnd(this.constructor.displayName)},componentWillUnmount:function(){this.props.siteAPI.cancelReLayoutPending(this.constructor.displayName)},render:function(){var n={};this.props.isMobileView&&i.assign(n,{width:this.props.siteWidth});var s=[d({key:"aspectPortal",ref:"aspectPortal",siteAPI:this.props.siteAPI,requestRelayout:this.props.requestRelayout,compDescriptions:this.computedAspectComponentsDesc.get()}),t(p,{siteAPI:this.props.siteAPI,key:"externalScriptContainer"}),t(l,{siteAPI:this.props.siteAPI,key:"ecomCheckoutAspectContrainer"}),t(g,{key:"aspectContainer",siteAPI:this.props.siteAPI}),t(h,{key:"popoverLayerContainer",siteAPI:this.props.siteAPI})];return e.utils.createReactElement("div",{className:"siteAspectsContainer",style:n},s)}}))}.apply(t,n))||(e.exports=s)},833:function(e,t,i){var n,s;n=[i(6),i(0),i(5),i(18),i(47),i(3),i(13),i(1)],void 0===(s=function(e,t,i,n,s,a,r,o){"use strict";return s.observer(n({propTypes:{siteAPI:i.object,requestRelayout:i.func,compDescriptions:i.arrayOf(i.shape({structure:i.object,props:i.object}))},displayName:"AspectSantaCompsPortal",componentDidCatch:function(e,t){o.integrations.ravenUtils.captureError(e,{tags:{aspect:!0},extra:{info:t,compDescriptions:this.props.compDescriptions}})},render:function(){var i=t.map(this.props.compDescriptions,function(i){var n=this.props.siteAPI,s=n.getSiteData().compFactoryRuntimeState,o=r.compFactory.getCompReactClass(i.structure.componentType,s),c=r.compFactory.getCompClass(i.structure.componentType,!0,s),u=a.componentPropsBuilder.getCompProps(o,i.structure,n,i.pageId,null,i.props);t.assign(u,i.props,{key:u.key||i.structure.id,ref:i.structure.id});var p={compClass:o,key:u.key+"Style",siteAPI:n,structure:i.structure,requestRelayout:this.props.requestRelayout,invalidateCache:!0},l=r.styleNodeFactory(u.key,o);return[c(u),e.utils.createReactElement(l,p)]}.bind(this));return e.utils.createReactElement("div",{},t.flatten(i))}}))}.apply(t,n))||(e.exports=s)},834:function(e,t,i){var n,s;n=[i(6),i(74),i(0),i(5),i(18),i(47),i(835)],void 0===(s=function(e,t,i,n,s,a,r){"use strict";return a.observer(s({displayName:"externalScriptContainer",propTypes:{siteAPI:n.shape({getAspectGlobalData:n.func.isRequired}).isRequired},getScriptComponents:function(){var e=this.props.siteAPI.getAspectGlobalData("externalScriptLoader");return i.map(e,function(e,i){return t(r,{key:i,ref:i,scriptData:e})})},render:function(){return e.utils.createReactElement("div",null,this.getScriptComponents())}}))}.apply(t,n))||(e.exports=s)},835:function(e,t,i){var n,s;n=[i(6),i(5),i(18),i(12)],void 0===(s=function(e,t,i,n){"use strict";return i({displayName:"scriptClass",propTypes:{scriptData:t.shape({script:t.shape({NAME:t.string.isRequired,SRC:t.string.isRequired}).isRequired}).isRequired},loaded:!1,componentDidMount:function(){var e=this.props.scriptData,t=function(e){return window.loadedScripts&&window.loadedScripts[e.NAME]}(e.script),i=void 0,s=void 0,a=void 0;t&&!this.loaded?this.fireCallbacks(e,!0):(a=this,t=window.document.createElement("script"),i=function(){a.fireCallbacks(e,!1),a.loaded=!0,t.removeEventListener("load",i)},t.addEventListener("load",i),t.src=e.script.SRC,(s=n.findDOMNode(this)).replaceChild(t,s.children[0]))},fireCallbacks:function(e,t){e.callbacks.forEach(function(e){var i=e.context;i?e.callback.call(i,{fromCache:t}):e.callback({fromCache:t})}),e.callbacks.length=0},render:function(){var t=this.props.scriptData.script,i="script-"+t.NAME;return e.utils.createReactElement("div",null,e.utils.createReactElement("script",{id:i,src:t.SRC}),e.utils.createReactElement("script",{dangerouslySetInnerHTML:{__html:function(e){return'window.loadedScripts = window.loadedScripts || {}; window.loadedScripts["'+e.NAME+'"] = true;'}(t)}}))}})}.apply(t,n))||(e.exports=s)},836:function(e,t,i){var n,s;n=[i(0),i(5),i(18),i(47),i(837)],void 0===(s=function(e,t,i,n,s){"use strict";return n.observer(i({displayName:"ecomCheckoutAspectContrainer",propTypes:{siteAPI:t.shape({getAspectGlobalData:t.func.isRequired})},render:function(){var t=this.props.siteAPI.getAspectGlobalData("ecomCheckout");if(e.get(t,["modalOpened"])){var i=e.get(t,["src"]);return s(i)}return null}}))}.apply(t,n))||(e.exports=s)},837:function(e,t,i){var n,s;n=[i(6)],void 0===(s=function(e){"use strict";return function(t){var i=e.utils.createReactElement("iframe",{src:t,id:"checkoutPageIFrame",style:{width:"900px",height:"600px",top:"50%",left:"50%",marginLeft:"-450px",marginTop:"-300px",position:"absolute"}});return e.utils.createReactElement("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"}},i)}}.apply(t,n))||(e.exports=s)},838:function(e,t,i){var n,s;n=[i(6),i(5),i(18),i(47)],void 0===(s=function(e,t,i,n){"use strict";return n.observer(i({displayName:"extraSiteHeight",propTypes:{siteAPI:t.object.isRequired},render:function(){var t=this.props.siteAPI.getSiteData();return 0===this.props.siteAPI.getRenderFlag("extraSiteHeight")||t.isMobileView()?null:e.utils.createReactElement("div",{style:{height:this.props.siteAPI.getRenderFlag("extraSiteHeight"),position:"relative"}})}}))}.apply(t,n))||(e.exports=s)},839:function(e,t,i){var n,s;n=[i(6),i(0),i(19),i(5),i(18),i(12),i(3),i(381),i(386)],void 0===(s=function(e,t,i,n,s,a,r,o,c){"use strict";var u=i.createFactory(o),p=i.createFactory(c);return s({displayName:"WixPopupRoot",propTypes:{siteAPI:n.shape({getSiteAspect:n.func.isRequired,getRuntimeDal:n.func.isRequired,getRenderFlag:n.func.isRequired}).isRequired,viewerPrivateServices:n.shape({pointers:n.object.isRequired,displayedDAL:n.object.isRequired,siteDataAPI:n.object.isRequired}).isRequired,mobxObserverWrapperProps:n.object,siteData:n.object.isRequired,currentPopupId:n.string,measureMap:n.object},getInitialState:function(){return{activePopupId:this.props.currentPopupId,activePopupKey:1,animating:!1}},shouldComponentUpdate:function(e,i){if(!e.currentPopupId&&this.state.activePopupId&&!this.state.animating){var n=this.props.siteAPI.getSiteAspect("actionsAspect"),s=t.keys(this.refs[this.state.activePopupId].refs);this.setState({animating:!0});var a=!1;return n.registerComponentsExit(s,function(){e.currentPopupId||this.setState({activePopupId:null,animating:!1}),n.handleNavigationComplete(),a=!0}.bind(this)),a}return!(i.animating&&!e.currentPopupId)},componentWillReceiveProps:function(e){e.currentPopupId!==this.state.activePopupId&&this.setState({activePopupId:e.currentPopupId,activePopupKey:(this.state.activePopupKey||0)+1,animating:!1})},componentDidUpdate:function(){var e=this.state.activePopupId;e&&function(e){return"preview"===e.getRenderFlag("componentViewMode")}(this.props.siteAPI)&&this.props.siteAPI.getRuntimeDal().markPopupAsBeenOpened(e)},render:function(){var t=this.props.siteData,i=this.state.activePopupId,n=t.isMobileView();if(i){var s=r.componentPropsBuilder.getRootProps(o,this.props.currentPopupId,this.props.siteAPI,this.props.viewerPrivateServices,this.props.measureMap);s.mobxObserverWrapperProps=this.props.mobxObserverWrapperProps,s.key=this.state.activePopupKey+(n?"_mobile":"_desktop");var a=[u(s),p({key:"blockingPopupLayer",siteAPI:this.props.siteAPI,layerName:"blockingPopupLayer"})],c=t.getSiteWidth(),l=e.utils.createReactElement("div",{id:"POPUPS_WRAPPER",className:"POPUPS_WRAPPER",key:"POPUPS_WRAPPER",style:{minWidth:c,minHeight:t.getScreenHeight(),margin:"0 auto",width:n?c:"auto"},children:a});return e.utils.createReactElement("div",{id:"POPUPS_ROOT",className:n?"POPUPS_ROOT mobile":"POPUPS_ROOT",key:"POPUPS_ROOT",style:{overflow:this.props.siteAPI.getRenderFlag("allowSiteOverflow")?null:"hidden"},children:[l]})}return null},componentDidMount:function(){var e=a.findDOMNode(this);e&&e.focus()}})}.apply(t,n))||(e.exports=s)},840:function(e,t,i){var n,s;n=[i(0),i(4),i(388),i(1)],void 0===(s=function(e,t,i,n){"use strict";function s(e,i,s){var a=this.props.siteData,r=t.linkRenderer.isExternalLink(a,s),o=t.linkRenderer.isEmailLink(s),c="_self"===i.getAttribute("target"),u=this.siteAPI.getRenderRealtimeConfigItem("previewTooltipCallback");return!this.siteAPI.getRenderFlag("isExternalNavigationAllowed")&&u&&(r&&c||o)?(u(e.target.getBoundingClientRect(),"text_editor_inactive_link_on_preview"),!0):!!(this.siteAPI.getCustomClickOccurred()&&r&&c)||function(e){var t=this.siteAPI.getRenderRealtimeConfigItem("premiumNavigationHandler");if(t&&function(e){var t=this.props.siteData.serviceTopology,i=n.urlUtils.parseUrl(t.premiumServerUrl).hostname;return n.urlUtils.parseUrl(e).hostname===i}.call(this,e))return t();return!1}.call(this,s)}function a(i,n){var s=function(e,i,n){var s=e.getAttribute("data-no-physical-url")||i;return t.wixUrlParser.parseUrl(n,s)}(i,n,this.props.siteData);if(!s||"_blank"===i.getAttribute("target"))return!1;!function(t,i){e.assign(t,{pageItemAdditionalData:i.getAttribute("data-page-item-context"),anchorData:i.getAttribute("data-anchor")})}(s,i);var a=function(e){return!e.getAttribute("data-no-physical-url")}(i),r=function(e){return!!e.getAttribute("data-keep-roots")}(i),o=this.siteAPI.getSiteData().getPrimaryPageId();return!!(this.siteAPI.getCustomClickOccurred()&&s&&s.pageId&&s.pageId!==o)||(this.handleNavigation(s,n,a,r),!0)}function r(e){return function e(t,i){return t&&t.tagName?t.tagName.toLowerCase()===i?t:e(t.parentNode,i):null}(e.target,"a")}function o(e,r){var o=r.getAttribute("href");return function(e,t){t.getAttribute("data-type")&&e.reportBI(i.CLICK_TO_ACTION,{field_type:t.getAttribute("data-type"),data:n.logger.sanitizePIIForBi(t.getAttribute("data-content")),input_type:t.getAttribute("data-auto-recognition")?"auto_recognized":"user_input"})}(this.siteAPI,r),function(e,i){if(e.getAttribute("data-mobile")){var n=t.stringUtils.isTrue(e.getAttribute("data-mobile"));i.setMobileView(n),t.mobileViewportFixer.fixViewportTag(i.getSiteData())}}(r,this.siteAPI),s.call(this,e,r,o)||a.call(this,r,o)}return{clickHandler:function(e){var t=r(e),i=!!t&&o.call(this,e,t);return this.siteAPI.isSelectionSharerVisible()&&this.siteAPI.hideSelectionSharer(),this.siteAPI.resetCustomClickOccurred(),!i||function(e){return e.stopPropagation(),e.preventDefault(),!1}(e)}}}.apply(t,n))||(e.exports=s)},841:function(e,t,i){var n,s;n=[i(0),i(4)],void 0===(s=function(e,t){"use strict";function i(e,i){if(i){var n=e.getRootIdsWhichShouldBeRendered();return!t.componentUtils.shouldBeRendered(n,i)}}function n(e,t){return!i(e,t)}function s(t,n){return e(n).omit("").keys().pickBy(function(e){return!i(t,e)}).value()}function a(t){return e.get(t,["compRefs","SITE_PAGES","refs"])}return{getAllRenderedRootIds:function(){var t=this.getMasterPage();if(!t)return[];var i=this.props.siteData,r=this.siteAPI,o=a(t);if(!o)return[];var c=function(t){return e.get(t,["refs","popupRoot","refs"],{})}(this),u=i.getPrimaryPageId(),p=i.getCurrentPopupId();return!n(r,u)||p&&!n(r,p)?e.flatten(["masterPage",s(r,o),s(r,c)]):e.compact(["masterPage",u,p])},getRootIdsWhichShouldBeRendered:function(){var t=this.props.siteData;if(!this.getMasterPage()){var i=t.getExistingRootNavigationInfo(t.getCurrentUrlPageId()),n=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(i),s=this.siteAPI.getSiteAspect("siteMembers").getCustomSignupPageId();if(!n)return s?[s]:[]}return e.compact(["masterPage",t.getPrimaryPageId(),t.getCurrentPopupId()])},getComponentsByPageId:function(e){var t=this.getPageById(e);return t&&t.compRefs},getComponentByPageAndCompId:function(e,t){var i=this.getComponentsByPageId(e);return i&&i[t]},getPageRefs:a}}.apply(t,n))||(e.exports=s)},842:function(e,t,i){var n,s;n=[i(74),i(0),i(5),i(18),i(1)],void 0===(s=function(e,t,i,n,s){"use strict";var a=s.wixappsClassicsLogger,r=s.socialShareHandler;return n({displayName:"selectionSharer",propTypes:{siteAPI:i.shape({getSiteData:i.func.isRequired,openPopup:i.func.isRequired}).isRequired},getInitialState:function(){return{visible:!1,position:null,shareInfo:null}},sharePostWrapper:function(e){var t=this.state.shareInfo;t.url=e,r.handleShareRequest(this.props.siteAPI,{url:e,service:t.service,title:t.title,storeId:t.storeId,postId:t.postId,hashTags:t.hashTags||"",imageUrl:t.imgSrc,addDeepLinkParam:!1,description:t.description})},show:function(e,t){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_OPENED,{post_id:t.postId,site_id:t.siteId}),this.setState({visible:!0,position:e,shareInfo:t})},hide:function(){this.setState({visible:!1,position:null,shareInfo:null})},isVisible:function(){return this.state.visible},twitterClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"twitter",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="twitter",e.title=e.description,r.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},facebookClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"facebook",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="facebook",r.shortenURL(e.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,e.url))},mailClickHandler:function(){a.reportEvent(this.props.siteAPI.getSiteData(),a.events.SELECTION_SHARER_CLICKED,{type:"mail",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId}),this.hide();var e=this.state.shareInfo;e.service="email",e.description=e.description+"\r\n( "+e.url+" )",r.handleShareRequest(this.props.siteAPI,e)},render:function(){if(this.state.visible){var t={position:"absolute",left:this.state.position.x+"px",top:this.state.position.y+"px"},i=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/facebook.svg"),n=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/twitter.svg"),a=s.media.getMediaUrl(this.props.siteAPI.getSiteData().serviceTopology,"selectionSharerSocialIcons/mail.svg");return e("div",{className:"selectionSharerContainer",style:t},[e("img",{key:"selection-sharer-facebook-img",className:"selectionSharerOption",src:i,onClick:this.facebookClickHandler}),e("div",{key:"selection-sharer-first-separator",className:"selectionSharerVerticalSeparator"}),e("img",{key:"selection-sharer-twitter-img",className:"selectionSharerOption",src:n,onClick:this.twitterClickHandler}),e("div",{key:"selection-sharer-second-separator",className:"selectionSharerVerticalSeparator"}),e("img",{key:"selection-sharer-mail-img",className:"selectionSharerOption",src:a,onClick:this.mailClickHandler})])}return null}})}.apply(t,n))||(e.exports=s)},843:function(e,t){e.exports=I},844:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE;function n(i){return e.reduce(i,function(i,n){var s=function(i){var n=this._pointers.components.getAllDisplayedOnlyComponents(i);return e.filter(n,function(e){return t.displayedOnlyStructureUtil.isDisplayedComponent(e.id)})}.call(this,n);return e.forEach(s,function(e){i.push(e)}),i.push(n),i}.bind(this),[])}function s(t,i){this._roots=i,this._viewMode=t,this._compPointers=e(i).flatMap(function(e){var i=this._pointers.full.components.getPage(e,t);if(!i)return[];var s=this._pointers.full.components.getChildrenRecursively(i),a=n.call(this,s);return[i].concat(a)}.bind(this)).keyBy("id").value()}function a(e,t,i){this._compPointers={},this._pointers=e,this._displayedDal=t,this._documentAPI=i,this._roots=[],this._viewMode=null}return a.prototype={reset:function(){this._compPointers={}},isEmpty:function(){return e.isEmpty(this._compPointers)},getAllCompIds:function(t,i){return e.isEqual(this._roots,i)&&this._viewMode===t||s.call(this,t,i),e.keys(this._compPointers)},getCompPointer:function(i,n,a){if(!i)return null;var r=this._compPointers[i];return r&&(this._displayedDal.isExist(r)||function(i){if(t.displayedOnlyStructureUtil.isDisplayedComponent(i.id))return!1;var n=this._pointers.components.getAllDisplayedOnlyComponents(i);return!e.isEqual(n,[i])}.call(this,r))?r:(s.call(this,n,a),this._compPointers[i])},getCompDataId:function(e,t){if(!e)return null;var n=this._pointers.getInnerPointer(e,i[t]);return this._displayedDal.get(n)},getCompDataItemPointer:function(e,t,n){if(!e)return null;var s=void 0,a=void 0;n?s=this._documentAPI.getFullStructureProperty(e,i[t]):(a=this._pointers.getInnerPointer(e,i[t]),s=this._displayedDal.get(a));var r=null;return s&&(r=this._pointers.data.getItem(t,s.replace("#",""),function(e){return(this._pointers.full.components.getPageOfComponent(e)||this._pointers.components.getPageOfComponent(e)).id}.call(this,e))),r&&this._displayedDal.isExist(r)?r:null}},a}.apply(t,n))||(e.exports=s)},845:function(e,t,i){var n,s;n=[i(0),i(1),i(4)],void 0===(s=function(e,t,i){"use strict";var n=t.constants.DATA_TYPES,s=t.constants.PAGE_DATA_DATA_TYPES,a=t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE,r={props:"props",data:"data",design:"design",layout:"layout",style:"style",actionsBehaviors:"actionsBehaviors",dynamicBehaviorsCounter:"dynamicBehaviorsCounter"},o="masterPage",c=i.dataResolver,u="_runtime_";function p(t,i,n,s,r){r=r||e.uniqueId(u);var o=this._pointers.getInnerPointer(t,a[i]);this._displayedDal.set(o,"#"+r);var c=this._pointers.data.getItem(i,r,function(e){return this._pointers.full.components.getPageOfComponent(e).id}.call(this,t));return s?this._displayedDal.set(c,n):this._displayedDal.set(c,e.assign({id:r},n)),c}function l(t){var i=this._pointers.getInnerPointer(t,a[n.theme]),s=this._displayedDal.get(i),r=s+e.uniqueId(u),c=this._pointers.data.getItem(n.theme,s),p=this._displayedDal.get(c),l=e.defaults({id:r},p),d=this._pointers.data.getItem(n.theme,r,o);this._displayedDal.set(i,r),this._displayedDal.set(d,l)}function d(e,t,i){if("type"===i&&!e){if(t)return!0;throw new Error("data items have to be passed with a type")}return"id"===i}function g(t,i,s){if(i.type)return i;var a=null;if(s&&s.type)a=e.assign({},i,{type:s.type});else{if(t!==n.prop)throw new Error("data items have to be passed with a type");a=e.assign({},i,{type:"DefaultProperties"})}return a}function h(i,n,a,r){var o=this._pointers.data.getPageIdOfData(a),p=this._pointers.components.getPageOfComponent(r)&&this._pointers.components.getPageOfComponent(r).id,l=s[n],h=this._siteData.getDataByQuery(a.id,o,l);if(t.objectUtils.isSubset(h,i))return a;(function(t,i){var n=c.getDataRefsForDataItems(i,t.type);if(n){var s=e.keys(n),a=e.pick(t,s),r=e.filter(a,function(t){return t&&!e.includes(t.id,u)});return!e.isEmpty(r)}return!1}).call(this,h,l)&&(h=c.cloneDataItemWithNewRefIdsRecursively(h,l,u,this._siteData.getClonedDataItemsIdsMap(r.id)));var f=g(n,i,h),m=t.objectUtils.cloneAndConditionalMergeOfFields(f,h,d),v=c.getFlatMapOfNestedItem(m,l);return v=e.mapValues(v,function(e){return t.objectUtils.cloneDeep(e)}),this._displayedDal.merge(a,v[a.id]),delete v[a.id],e.forOwn(v,function(t,i){var s=function(t,i,n,s,a,r){return e.find([n,s],function(e){var n=t.data.getItem(r,a,e);return i.isExist(n)})||s}(this._pointers,this._displayedDal,p,o,i,n),a=this._pointers.data.getItem(n,i,s);this._pointers.data.validatePath(a),this._displayedDal.set(a,t)}.bind(this)),a}function f(t,i,s,o){var c=this._compPointersCache.getCompDataItemPointer(s,t,o);if(c||(c=p.call(this,s,t)),i[c.id]&&t===n.theme){var d=this._pointers.getInnerPointer(s,a[n.theme]),g=this._displayedDal.get(d);if(!g)return null;g&&!e.includes(g,u)&&l.call(this,s);var f=this._displayedDal.get(c);return i=i[c.id],e.forOwn(i,function(t,n){e.defaultsDeep(i[n],f[n])}),m[r.style].call(this,i,s)}return h.call(this,i,t,c,s)}var m={};function v(e,t,i,n,s){this._pointers=i,this._displayedDal=t,this._siteData=e,this._compPointersCache=n,this._documentAPI=s}function y(t,i){var n=null;return n=e.isPlainObject(t)?t:this._compPointersCache.getCompPointer(t,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots()),i?n:n&&this._displayedDal.isExist(n)?n:null}return m[r.dynamicBehaviorsCounter]=e.noop,m[r.data]=e.partial(f,n.data),m[r.style]=e.partial(f,n.theme),m[r.design]=e.partial(f,n.design),m[r.props]=function(s,a,r){var o=n.prop,c=this._compPointersCache.getCompDataItemPointer(a,o,r),u=i.displayedOnlyStructureUtil.isDisplayedComponent(a.id),l=c&&i.displayedOnlyStructureUtil.isDisplayedComponent(c.id),d=u&&!l;if(!c||d){var h=i.displayedOnlyStructureUtil.getItemId(a.id),f=i.displayedOnlyStructureUtil.getOriginalId(a.id),m=c?c.id:e.uniqueId(f+"_props"),v=d&&i.displayedOnlyStructureUtil.getUniqueDisplayedId(m,h);c=d?p.call(this,a,o,{},!1,v):p.call(this,a,o,{},!0)}var y=e.defaults({id:i.displayedOnlyStructureUtil.getOriginalId(a.id)},a),S=this._compPointersCache.getCompDataItemPointer(y,o,!0),A=S&&this._documentAPI.getFullDataItem(S),P=g(o,s,A),I=e.defaults({},P,A);return t.objectUtils.isSubset(this._displayedDal.get(c),I)||this._displayedDal.merge(c,I),c},m[r.actionsBehaviors]=function(t,s){var a=n.behaviors,r=this._compPointersCache.getCompDataItemPointer(s,a),o=i.displayedOnlyStructureUtil.isDisplayedComponent(s.id),c=r&&i.displayedOnlyStructureUtil.isDisplayedComponent(r.id),u=o&&!c;if(!r||u){var l=i.displayedOnlyStructureUtil.getItemId(s.id),d=i.displayedOnlyStructureUtil.getOriginalId(s.id),g=r?r.id:e.uniqueId(d+"_behavior"),h=u&&i.displayedOnlyStructureUtil.getUniqueDisplayedId(g,l);r=p.call(this,s,a,{type:"ObsoleteBehaviorsList"},!1,h)}var f=e.defaults({id:i.displayedOnlyStructureUtil.getOriginalId(s.id)},s),m=this._compPointersCache.getCompDataItemPointer(f,a,!0),v=m&&this._documentAPI.getFullDataItem(m),y=v&&v.items||[],S=(e.isString(y)?JSON.parse(y):y).concat(t),A=this._pointers.getInnerPointer(r,"items"),P=JSON.stringify(S);return e.isEqual(this._displayedDal.get(A),P)||this._displayedDal.set(A,P),A},m[r.layout]=function(e,t){var i=this._pointers.getInnerPointer(t,"layout");return this._displayedDal.merge(i,e),i},Object.freeze(m),v.prototype={updateDataItem:function(e,t,i,n){var s=y.call(this,e,n);return s?m[t].call(this,i,s,n):null},updateActionsAndBehaviorsItems:function(e,t){var i=y.call(this,e);return i?m[r.actionsBehaviors].call(this,t,i):null},updateCompLayout:function(e,t){var i=y.call(this,e);return i?m[r.layout].call(this,t,i):null},updateCompStyle:function(t,i){var s=y.call(this,t);if(!s)return null;var o=this._pointers.getInnerPointer(s,a[n.theme]),c=this._displayedDal.get(o);if(!c)return null;c&&!e.includes(c,u)&&l.call(this,s);var p=this._pointers.data.getItem(n.theme,c),d=this._displayedDal.get(p);return e.forOwn(i,function(t,n){e.defaultsDeep(i[n],d[n])}),m[r.style].call(this,i,s)},updateAll:function(t){var i=this,n=e.map(t,function(t,n){var s=t.overrides,a=y.call(i,n);return a?(e.forOwn(s,function(e,t){m[t].call(i,e,a)}),a):null});return e.compact(n)},OVERRIDE_TYPES:r},v}.apply(t,n))||(e.exports=s)},846:function(e,t,i){var n,s;function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}n=[i(0),i(1),i(4),i(178),i(8),i(847),i(139),i(108),i(848),i(849)],void 0===(s=function(e,t,i,n,s,r,o,c,u,p){"use strict";var l="masterPage",d="ghostStructureData";function g(t,i){return e.some(t.failedRequests,function(t){return e.isEqual(t.destination,i)})}function h(e,t){i.loggingUtils.logger.reportBI(e,o.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:t})}var f=function(t){return e.map(t.pages,"pageId")};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(s,a,r){var o=i.siteDataUtils.getRequestModel(e),c=i.siteDataUtils.getRendererModel(e);if(_(r))return n.clientOnlyDataFixers(s,t,o,e.currentUrl,e.urlFormatModel,e.isViewerMode(),c);var u=i.publicModelUtils.getPageFileNames(e.publicModel);return n.fix(s,t,o,e.currentUrl,e.urlFormatModel,e.isViewerMode(),c,u)}}var v=/http:\/\/[a-z]+\.[a-z]+\.com\//,y="//static.wixstatic.com/";function S(t,n,s,a){return"undefined"!=typeof document&&"https:"===window.document.location.protocol&&(n[0]=n[0].replace(v,y)),{name:"page request",urls:n,destination:["pagesData",s],isValidResponse:function(t){return e.isObject(t)},transformFunc:m(t,f(a)),error:function(e,i){t.isInSSR()&&t.onPageRequestFailed&&t.onPageRequestFailed(n[0],i,e),t.failedRequests.push(this)},onUrlRequestFailure:function(e,n){t.onPageRequestFailed&&t.onPageRequestFailed(e,n);var a=i.urlUtils.parseUrl(e);i.loggingUtils.logger.reportBI(t,o.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:s,hostname:a.hostname,url:e,responseStatusCode:n})}}}function A(n,r,u){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=r===l,g=n.biData.getPageNumber(),h=n.publicModel.pageList,v=P(n,r,u,h.topology);n.addFixedPageUrl(r,v);var y=i.loggingUtils.logger.reportBI,S=void 0,A={name:"data fixed page request",urls:[v].concat(a(p)),useResponse:D(n),onBeforeFetch:e.once(function(){S=e.now(),y(n,c.DATA_FIXED_PAGE_REQUEST,{stage:"1",pageNumber:g,masterPage:d,duration:null})}),callback:function(t,i,s,a){_(s)&&y(n,c.DATA_FIXED_PAGE_REQUEST,{stage:"2",pageNumber:g,masterPage:d,duration:e.now()-S,cdn:e.get(a,"via",null),cdnHit:function(t){return e.toNumber(t)>0}(e.get(a,"age"))})},onUrlRequestFailure:function(s,a,c){if(_(s)){var u="Fixed "+(r===l?"Master ":"")+"Page Request Failed";t.integrations.ravenUtils.captureError(u,{tags:{"data-fixer-server":!0},extra:{info:e.assign({failRequestUrl:v},e.omit(c,"name"))}}),i.loggingUtils.logger.reportBI(n,o.FIXED_PAGE_REQUEST_FAILED,{errorName:u,failRequestUrl:v,status:e.get(c,"status"),responseText:e.get(c,"responseText")})}else{n.failedRequests.push(A),n.onPageRequestFailed&&n.onPageRequestFailed(s,a);var p=i.urlUtils.parseUrl(s);i.loggingUtils.logger.reportBI(n,o.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:r,hostname:p.hostname,url:s,responseStatusCode:a})}}};return s.isOpen("sv_getDataFixedPageJsonAndUseThem",n)&&e.assign(A,{destination:["pagesData",r],isValidResponse:function(t){return e.isObject(t)},transformFunc:m(n,f(h))}),A}function P(n,a,r,o){var c=n.getRendererModel(),d=n.getPublicModel(),g=n.currentUrl,h=n.isUsingUrlFormat(t.siteConstants.URL_FORMATS.SLASH),f=n.getServiceTopologyProperty("siteAssetsServerUrl"),m=void 0;r?m=i.pagesUrlUtils.getPageJsonFileNameFromUrl(r):a===l?m=i.pagesUrlUtils.getMasterPageJsonFileName(d.pageList):(m=i.pagesUrlUtils.getPageJsonFileName(d.pageList,a))||(m=i.pagesUrlUtils.getPageJsonFileName(d.pageList,d.pageList.mainPageId));var v=e.omitBy({isUrlMigrated:h,quickActionsMenuEnabled:e.get(c,"siteMetaData.quickActions.configuration.quickActionsMenuEnabled",!1),metaSiteId:c.metaSiteId,siteId:c.siteInfo.siteId,pageId:m.replace(/\.json/i,""),version:u["santa-data-fixer"],v:e(o).get("0.parts").split("?v=").pop(),isHttps:e.startsWith(g.protocol,"https"),experiments:function(t){return e.filter(["sv_contactFormTemplatesMigration","sv_contactFormFinalMigration","sv_contactFormFinalMigrationEditor","sv_fixedMobileHeader","sv_migrateTpaToSemiNative","sv_tpaAddPublicAPI"],function(e){return s.isOpen(e,t)})}(n).join(","),ck:e.get(d,"siteAssets.cacheVersions.dataFixer")},e.isUndefined),y=t.urlUtils.toQueryString(v);return""+f+p.SITE_ASSETS_SERVER.FIXED_PAGE_JASON_PATH+"?"+y}function I(e){return!(!s.isOpen("sv_getDataFixedPageJson",e)||s.isOpen("sv_getDataFixedPageJsonAndUseThem",e))}function D(e){return!!s.isOpen("sv_getDataFixedPageJsonAndUseThem",e)}function _(t){return e.includes(t,p.SITE_ASSETS_SERVER.FIXED_PAGE_JASON_PATH+"?")}return{getRequestsForPages:function(t,n,s){if(!t.publicModel)return[];var a=[],r=t.publicModel.pageList;if(g(t,["pagesData",l]))h(t,l);else if(!n.pagesData[l]){var o=function(e,t){return S(e,i.pagesUrlUtils.getMasterPageURLs(t),l,t)}(t,r);D(t)?a.push(A(t,l,null,o.urls)):a.push(o),I(t)&&a.push(A(t,l))}var c=e.isArray(s)?s:[s];return e.forEach(c,function(s){if(s.pageId)if(i.errorPages.isErrorPage(s.pageId))a.push(S(t,i.errorPages.getJSONS(t,s.pageId),s.pageId,r));else if(g(t,["pagesData",s.pageId]))h(t,s.pageId);else if(function(t,i){var n=e.find(t.publicModel.pageList.pages,{pageId:i.pageId});return!e.isEmpty(i.jsonUrls)&&e.isEmpty(e.get(n,"urls"))}(t,s)){var o=S(t,s.jsonUrls,s.pageId,r);D(t,s.pageId)?a.push(A(t,s.pageId,s.jsonUrls[0],o.urls)):a.push(o),I(t)&&a.push(A(t,s.pageId,s.jsonUrls[0]))}else if(!function(t,i){var n=e.get(t,"rendererModel.passwordProtectedPages",[]);return e.includes(n,i.pageId)}(t,s)&&!n.pagesData[s.pageId]){var c=function(e,t,n){if(e.currentUrl&&e.currentUrl.query.fakePage){var s=e.currentUrl.query.fakePage;return{urls:[e.santaBase+"/static/fakePages/"+s+".json"],destination:["pagesData",n],transformFunc:m(e,f(t))}}var a=i.pagesUrlUtils.getPageURLs(t,n);return a||(n=t.mainPageId,a=i.pagesUrlUtils.getPageURLs(t,t.mainPageId)),S(e,a,n,t)}(t,r,s.pageId);D(t,s.pageId)?a.push(A(t,s.pageId,null,c.urls)):a.push(c),I(t)&&a.push(A(t,s.pageId))}}),a},getRequestForGhostStructure:function(n,s,o,c){if(!g(n,[d,o,c])){var u=e.get(n.getPublicModel(),["pageList","topology"])||e.get(n.getRendererModel(),["pageListTopology"]);return function(i,n,s,o){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=arguments[5],p=P(i,null,o,u),l=m(i),g={name:"Ghost structure request",urls:[p].concat(a(c)),destination:[d,s,n],isValidResponse:function(t){return e.isObject(t)&&e.get(t,["structure","id"])===n},onUrlRequestFailure:function(a,r,o){i.failedRequests.push(g),t.integrations.ravenUtils.captureError("Request for ghost structure data failed",{tags:{"load-ghost-structure":!0},extra:{info:e.assign({failRequestUrl:a,applicationId:s,widgetId:n},e.omit(o,"name"))}})},transformFunc:function(){var e=l.apply(void 0,arguments);return r.buildGhostStructure(e)}};return g}(n,c,o,s,i.pagesUrlUtils.getJsonUrlFromJsonFileName(u,s),u)}}}}.apply(t,n))||(e.exports=s)},847:function(e,t,i){var n,s;function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}n=[i(0),i(1),i(4)],void 0===(s=function(e,t,i){"use strict";var n=i.constants.PAGE_DATA_DATA_TYPES;function s(t,s){var a=t.connectionQuery,r=i.dataResolver.getSinglePageDataByQuery(s,n.connections,a);if(r){var o=e.find(r.items,{type:"WixCodeConnectionItem"});return o&&o.role}}function r(t,s){var a=e.cloneDeep(t),r=a.dataQuery,o=a.propertyQuery;return r&&(a.data=i.dataResolver.getSinglePageDataByQuery(s,n.data,r)),o&&(a.props=i.dataResolver.getSinglePageDataByQuery(s,n.props,o)),delete a.dataQuery,delete a.propertyQuery,delete a.connectionQuery,a}return{buildGhostStructure:function(i){for(var n={},o=[].concat(a(e.get(i,["structure","components"],[])));o.length>0;){var c=o.shift(),u=s(c,i);u&&(c.id=t.guidUtils.getUniqueId("ghost","-"),n[u]=r(c,i),o.push.apply(o,a(c.components||[])),c.components&&(n[u].children=e(c.components).map(function(e){return s(e,i)}).compact().value(),delete n[u].components))}return n}}}.apply(t,n))||(e.exports=s)},848:function(e){e.exports={"santa-data-fixer":"1.264.0"}},849:function(e,t,i){var n;void 0===(n=function(){"use strict";return{SITE_ASSETS_SERVER:{FIXED_PAGE_JASON_PATH:"/fixedData"}}}.apply(t,[]))||(e.exports=n)},850:function(e,t,i){var n,s;n=[i(0),i(1),i(8)],void 0===(s=function(e,t,i){"use strict";var n=t.fonts.fontUtils;function s(e){var t=e.rendererModel.siteInfo.documentType;return n.getCssUrls(t,e.serviceTopology)}function a(e,t,s){if(!i.isOpen("sv_fontsByAgent",e))return t;var a=n.getBrowserFontSupport(e.browser,e.os);return n.getStyleWithSpecificFontFaces(e.serviceTopology,s,a)||t}return{getRequests:function(t){var i=[],n=s(t);return e.forEach(n,function(n,s){e.startsWith(n,"//")&&(n="https:"+n),i.push({urls:[a(t,n,s)],destination:["externalStyles",s],dataType:"text",onUrlRequestFailure:t.isInSSR()?function(e){throw new Error("Failed fetching external style: "+e)}:void 0,isValidResponse:function(t){return e.isString(t)&&!e.isEmpty(t)}})}),i},getStylesIds:function(t){return e.keys(s(t))},getBrowserSpecificUrl:a}}.apply(t,n))||(e.exports=s)},851:function(e,t,i){var n,s;n=[i(1),i(0)],void 0===(s=function(e,t){"use strict";var i=void 0,n=void 0,s=void 0,a=void 0,r=void 0,o=void 0,c=void 0,u=void 0,p=void 0,l="POST",d="GET",g={login:"/api/member/login",register:"/api/member/register",customRegister:"/api/wix-sm/v1/auth/register",apply:"/api/member/apply",sendForgotPasswordMail:"/api/member/sendForgotPasswordMail",resetMemberPassword:"/api/member/changePasswordWithMailToken",getMemberDetails:"/api/member",handleOauthToken:"/api/social/token/handle",verify:"/_api/wix-sm/verify",authorize:"/api/wix-sm/v1/authorize",logout:"/_api/wix-sm/logout",resendEmailVerification:"/_api/wix-sm/email/resend"},h={};function f(e,i,n,s){if(t.get(n,"errorCode"))i(n.errorCode);else{s&&(n={payload:t.merge({},{sessionToken:t.get(n,["session","token"]),status:t.get(n,["member","status"]),siteMemberDto:{id:t.get(n,["member","id"])},raw:t.cloneDeep(n)})});var a=function(e){var i=t.get(e,"sessionToken")||t.get(e,["smSession","sessionToken"])||"";return t.get(i.match(/^JWS\.(.+)/),0)}(n.payload);a?v(a,e,i,n.payload):e(n)}}function m(e,r,o,c,u,p,l,d){var g=t.merge(r||{},{collectionId:n,metaSiteId:a});p&&(t.merge(g,{svSession:p,appUrl:i}),l&&(g.initiator=l)),y({type:o,url:s+e,data:g,asForm:!0},c,u,d)}function v(e,i,n,s){y({type:"POST",url:r,data:{token:e},asForm:!0},function(e){var n=t.merge({},e,{httpOnlySession:!0,payload:s});i(n)},n)}function y(i,n,s,a){var r={type:i.type,url:i.url,data:i.data,asForm:i.asForm,dataType:"json",jsonp:!1,success:function(e){f(n,s,e,i.isPlatformizedEndpoint)},error:s};i.headers&&t.assign(r,{headers:i.headers}),!0===a&&(r=t.merge(r,{crossDomain:!0,xhrFields:{withCredentials:!0}})),e.ajaxLibrary.ajax(r)}return h.initializeData=function(e){a=e.getMetaSiteId();var t=e.getClientSpecMapEntriesByType("sitemembers")[0],l=e.getPublicBaseUrl();n=t&&t.smcollectionId,s=e.serviceTopology.siteMembersUrl,r="//"+e.currentUrl.host+g.verify+"/"+a+"/"+e.siteId,o="//"+e.currentUrl.host+g.logout+"/"+a,c="//"+e.currentUrl.host+g.resendEmailVerification,i=e.currentUrl.full,u="https://"+e.currentUrl.host+g.customRegister,p=""+l+g.authorize+"/"+e.siteId+"/pages"},h.login=function(e,t,i,n,s){m(g.login,e,l,t,i,n,s)},h.register=function(e,t,i,n,s){m(g.register,e,l,t,i,n,s)},h.apply=function(e,t,i,n,s){m(g.apply,e,l,t,i,n,s)},h.sendForgotPasswordMail=function(e,t,i){m(g.sendForgotPasswordMail,{email:e.email,returnUrl:e.homePageUrl,lang:e.lang},l,t,i)},h.resetMemberPassword=function(e,t,i){m(g.resetMemberPassword,e,l,t,i)},h.getMemberDetails=function(e,t,i,n){e=e||"",m(g.getMemberDetails+"/"+e,null,d,t,i,null,null,n)},h.handleOauthToken=function(t,i,r){!function(t,i,r){var o="?"+e.urlUtils.toQueryString({collectionId:n,metaSiteId:a});y({type:"POST",url:s+g.handleOauthToken+o,data:t},i,r)}(r,t,i)},h.logout=function(e,t){y({type:"POST",url:o,asForm:!0},e,t)},h.resendEmailVerification=function(e,t,i){y({type:"GET",url:c+"/"+e,asForm:!1},t,i)},h.authByToken=function(e,t,i){v(e,t,i,{})},h.customRegister=function(e,i,n){var s=(t.startsWith(e.instance,"wixcode-pub.")?"":"wixcode-pub.")+e.instance;y({type:l,url:u,data:{email:e.email,password:e.password,contactInfo:e.contactInfo},headers:{Authorization:s},isPlatformizedEndpoint:!0},i,n)},h.getAuthorizedPages=function(e,t){y({type:d,url:p,asForm:!1,headers:{Authorization:"MSID."+a},isPlatformizedEndpoint:!0},e,t)},h}.apply(t,n))||(e.exports=s)},852:function(e,t){e.exports=D},853:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";function i(i,n){return e.compact([t.svg.createSvgFetchRequest(i.serviceTopology.mediaRootUrl,i,e.get(n,["data","svgId"]))])}return{"wixui.RatingsDisplay":i,"wixui.RatingsInput":i}}.apply(t,n))||(e.exports=s)},854:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";function i(i,n,s){var a=function(t,i,n,s){var a=t.cache.getBoundCacheInstance(!0),r=t.pointers.full.components.getPage(i,s),o=r&&t.pointers.full.components.getComponent(n,r),c=o&&a.getPath(o);return c?e.get(t.fullPagesData,c):null}(i,n,t.displayedOnlyStructureUtil.getOriginalId(s),i.siteData.getViewMode());return t.dataUtils.getAllCompsInStructure(a,i.siteData.isMobileView())}function n(t,n,s){var a=t.siteDataAPI.runtime,r=i(t,n,s);return e.reduce(r,function(t,i){var s=a.getDisplayedOnlyCompsForFullComp(i.id,n);return e.forEach(s,function(e){t[e.id]=e}),t[i.id]=i,t},{})}function s(t,i,n){var s=t.cache.getBoundCacheInstance(!0).getPath(t.pointers.getInnerPointer(i,n));return s?e.get(t.fullPagesData,s):null}function a(t,i){var n=t.cache.getBoundCacheInstance(!0).getPath(i);return n?e.get(t.fullPagesData,n):null}function r(e){return e.fullPagesData.pagesData}return function(t){var o={getAllCompsUnderRoot:e.partial(i,t),getFullAndDisplayedOnlyCompsUnderRoot:e.partial(n,t),getFullStructureProperty:e.partial(s,t),getFullDataItem:e.partial(a,t)};return(t.siteData.isInSSR()||window.isMockWindow)&&(o.getFullPagesData=e.partial(r,t)),o}}.apply(t,n))||(e.exports=s)},855:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=new t.SiteDataPrivates;function n(e){this.privatesKey=e,i.set(e,{siteData:e})}return n.prototype={createPageOriginalValuesMap:function(n,s){var a=i.get(this.privatesKey).siteData,r=a.getPageData(n,["structure"]),o=a.getAllStylesFromPage("masterPage"),c=n===t.siteConstants.MASTER_PAGE_ID?o:Object.assign({},o,a.getAllStylesFromPage(n)),u=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode(),p=u===t.constants.VIEW_MODES.MOBILE,l=t.originalValuesMapGenerator.createOriginalValuesMap(r,c,p);e.set(a,["originalValuesMap",r.id,u],l)},removePageOriginalValues:function(n,s){var a=i.get(this.privatesKey).siteData,r=a.getPageData(n,["structure"]),o=s?t.constants.VIEW_MODES.MOBILE:a.getViewMode();e.set(a,["originalValuesMap",r.id,o],{})}},n}.apply(t,n))||(e.exports=s)},856:function(e,t,i){var n,s;n=[i(0),i(27),i(1)],void 0===(s=function(e,t,i){"use strict";function n(t){this.queue=[],this.duringFlushQueue=[],this.isDuringFlush=!1,this.preFlushOp=e.noop,this.postFlushOp=e.noop,this.shouldThrowOnErrors=t}function s(t){var i=this;this.isDuringFlush=!0;var n=function(){r(t,i.shouldThrowOnErrors),function(){if(!e.isEmpty(this.duringFlushQueue)){var t=this.duringFlushQueue;this.duringFlushQueue=[],r(t,this.shouldThrowOnErrors)}}.call(i)},s=void 0;if(this.shouldThrowOnErrors)try{n()}catch(e){s=e}else n();if(this.isDuringFlush=!1,s&&this.shouldThrowOnErrors)throw s}n.prototype.addItem=function(e){this.queue.push(e)};var a={actionQueue:!0};function r(n,s){e.forEach(n,function(n,o,c){var u=void 0;if(s)u=n();else try{u=n()}catch(e){i.integrations.ravenUtils.captureError(e,{tags:a})}if(e.get(u,"then"))return function(i,n,s,a){i.then(function(i){t.action(function(){var t=e.slice(n,s+1);r(i?e.concat(i,t):t,a)})()})}(u,c,o,s),!1})}return n.prototype.flush=function(){if(this.isDuringFlush)e.isEmpty(this.queue)||(this.duringFlushQueue=this.queue);else{var i=this.queue;this.queue=[],this.preFlushOp(),t.runInAction(s.bind(this,i)),this.postFlushOp()}},n.prototype.runImmediately=function(e){this.isDuringFlush?e():(this.addItem(e),this.flush())},n.prototype.registerPreFlushOperation=function(e){this.preFlushOp=e},n.prototype.registerPostFlushOperation=function(e){this.postFlushOp=e},n}.apply(t,n))||(e.exports=s)},857:function(e,t,i){var n,s;n=[i(4),i(1),i(0)],void 0===(s=function(e,t,i){"use strict";var n=t.constants,s={};s[e.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0;var a=new t.SiteDataPrivates;function r(e,t,i){var s=function(e){return e.siteData.isMobileView()?n.VIEW_MODES.MOBILE:n.VIEW_MODES.DESKTOP}(e),a=e.pointers.components.getPage(i,s);return e.pointers.components.getComponent(t,a)}function o(e,t,n,s,r,o){this.privatesKey=e,a.set(e,{siteData:e,createDisplayedPage:t,createDisplayedNode:n,pointers:s,displayedDal:r,actionQueue:o}),i.bindAll(this,i.functionsIn(this))}function c(e,n,s,a,r){var o=e.pointers.activeModes.getPageActiveModes(n);e.displayedDal.isExist(o)||e.displayedDal.set(o,{});var c=e.pointers.activeModes.getPageActiveModes(n),u=e.pointers.componentStructure.getModesDefinitions(s),p=e.displayedDal.get(u),l=r&&i.find(p,{modeId:r}),d=a&&i.find(p,{modeId:a}),g=e.displayedDal.get(c),h=t.modes.getActiveModesForActivationChange(p,g,l,d);e.displayedDal.set(c,h)}function u(e,t,n){var s=e.pointers.activeModes.getPageActiveModes(t),a=e.displayedDal.get(s);if(!i.isEmpty(a)){var r=n?i.omitBy(a,n):{};return e.displayedDal.set(s,r),e.createDisplayedPage(t)}return!1}function p(e){return!function(e){return Boolean(s[e.modeType])}(e)}return o.prototype={resetAllActiveModes:function(){var e=a.get(this.privatesKey),t=e.pointers.activeModes.getAllActiveModes(),n=e.displayedDal.getKeys(t);i.forEach(n,function(t){u(e,t,p)})},deactivateModesInPage:function(e){return u(a.get(this.privatesKey),e)},getActiveModes:function(){var e=a.get(this.privatesKey),t=e.pointers.activeModes.getAllActiveModes(),n=e.displayedDal.getKeys(t);return i.reduce(n,function(e,t){var n=this.getPageActiveModes(t);return i.isEmpty(n)||(e[t]=n),e}.bind(this),{})},getPageActiveModes:function(e){var t=a.get(this.privatesKey),n=t.pointers.activeModes.getPageActiveModes(e),s=t.displayedDal.get(n);return i.pickBy(s)},activateModeById:function(e,t,i){var n=r(a.get(this.privatesKey),e,t);return this.activateMode(n,i)},activateMode:function(e,t){var i=a.get(this.privatesKey),n=i.pointers.full.components.getPageOfComponent(e);if(n&&n.id){var s=this.getActiveModes()[n.id];return(!s||!s[t])&&(i.actionQueue.runImmediately(function(){c(i,n.id,e,null,t),i.createDisplayedNode(e)}),!0)}return!1},deactivateModeById:function(e,t,i){var n=r(a.get(this.privatesKey),e,t);return this.deactivateMode(n,i)},deactivateMode:function(e,t){var i=a.get(this.privatesKey),n=i.pointers.full.components.getPageOfComponent(e);if(n&&n.id){var s=this.getActiveModes()[n.id];return!(!s||!s[t])&&(i.actionQueue.runImmediately(function(){c(i,n.id,e,t),i.createDisplayedNode(e)}),!0)}return!1},switchModesByIds:function(e,t,i,n){var s=r(a.get(this.privatesKey),e,t);return this.switchModes(s,i,n)},switchModes:function(e,t,i){var n=a.get(this.privatesKey);if(t===i)return!1;var s=n.pointers.full.components.getPageOfComponent(e),r=this.getActiveModes()[s.id]||{},o=!r[i]||r[t];return o&&n.actionQueue.runImmediately(function(){c(n,s.id,e,t,i),n.createDisplayedNode(e)}),o}},o}.apply(t,n))||(e.exports=s)},858:function(e,t,i){var n,s;n=[i(0),i(1),i(7)],void 0===(s=function(e,t,i){"use strict";var n=i.skinsMap,s={};function a(e,t,i,n){e[t]||(e[t]={skinName:i,componentType:n})}function r(e,t){var i=e(t);return i&&n.get(i.skin)}return t.sessionFreezer.freeze(s),{collectStyleIdsFromFullStructure:function i(o,c,u,p,l,d){!function(e,i,s){e.styleId?r(i,e.styleId)?a(s,e.styleId,i(e.styleId).skin,e.componentType):a(s,e.styleId,e.skin,e.componentType):e.skin&&n.get(e.skin)&&a(s,t.santaTypes.shortenStyleId(e.skin),e.skin,e.componentType)}(o,c,p),function(t,i,n){t.modes&&t.modes.overrides&&e.forEach(t.modes.overrides,function(e){e.styleId&&r(i,e.styleId)&&a(n,e.styleId,i(e.styleId).skin,t.componentType)})}(o,c,p),function(e,t,i,n,a){if(e.componentType&&s[e.componentType]){var r=function(e,t,i){var n=i.styleId&&e.getDataByQuery(i.styleId,t,e.dataTypes.THEME);return{dataItem:i.dataQuery&&e.getDataByQuery(i.dataQuery,t),propertiesItem:i.propertyQuery&&e.getDataByQuery(i.propertyQuery,t,e.dataTypes.PROPERTIES),styleItem:n,structure:i}}(i,a,e);s[e.componentType](r,t,i,n,a)}}(o,c,u,p,l);var g=t.dataUtils.getChildrenData(o,!!d);e(g).compact().forEach(function(e){i(e,c,u,p,l)})},registerClassBasedStyleCollector:function(e,t){s[e]=t}}}.apply(t,n))||(e.exports=s)},859:function(e,t,i){var n,s;n=[i(0),i(12),i(1)],void 0===(s=function(e,t,i){"use strict";return{preventTabbingOut:function(n){if("Tab"===n.key){n.stopPropagation();var s=i.accessibility.getTabbaleElements(t.findDOMNode(this));e.isEmpty(s)?n.preventDefault():n.shiftKey&&window.document.activeElement===e.head(s)?(n.preventDefault(),e.last(s).focus()):n.shiftKey||window.document.activeElement!==e.last(s)||(n.preventDefault(),e.head(s).focus())}}}}.apply(t,n))||(e.exports=s)},860:function(e,t,i){var n;void 0===(n=function(){"use strict";return{blockOuterScroll:function(e){var t=e.currentTarget,i=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,n=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+n<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+n>=i&&(t.scrollTop=i,e.preventDefault()),e.stopPropagation()}}}.apply(t,[]))||(e.exports=n)},861:function(e,t,i){var n,s;n=[i(0),i(7),i(6)],void 0===(s=function(e,t,i){"use strict";return i.mixins.skinInfoMixin(t.skinsMap)}.apply(t,n))||(e.exports=s)},862:function(e,t,i){var n,s;n=[i(0),i(4)],void 0===(s=function(e,t){"use strict";var i=t.matrixCalculations;return{getNumberOfDisplayedRows:function(e,t,n,s){return e||s&&s<t*n?t:i.getAvailableRowsNumber(t,n,s)},getItemsPerPage:function(e,t,i){return e*this.getNumberOfDisplayedRows(null,t,e,i)},getTotalPageCount:function(e,t,i){var n=this.getItemsPerPage(e,t,i),s=Math.floor(i/n);return i%n>0&&s++,s},getNextPageItemIndex:function(e,t,i,n){var s=e+this.getItemsPerPage(t,i,n);return s>=n&&(s=0),s},getPrevPageItemIndex:function(e,t,i,n){var s=this.getItemsPerPage(t,i,n),a=e-s;return a<0&&(a=(this.getTotalPageCount(t,i,n)-1)*s),a},getCounterText:function(e,t,i,n){var s=Math.floor(e/this.getItemsPerPage(t,i,n)),a=this.getTotalPageCount(t,i,n);return a||(a=1),String(s+1)+"/"+String(a)},getPageItems:function(e,t,i,n){return this.getPageItemsByStartIndex(e,t,this.getItemsPerPage(i,n,e.length))},getPageItemsByStartIndex:function(e,t,i){var n=[];if(i<e.length){for(var s=this.getLastItemIndex(e,t,i),a=t;a<=s;a++)n.push(e[a]);return n}return e},getLastItemIndex:function(e,t,i){return Math.min(e.length-1,t+i-1)}}}.apply(t,n))||(e.exports=s)},863:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t="wysiwyg.viewer.components.BoxSlideShowSlide",i="wysiwyg.viewer.components.StripContainerSlideShowSlide";function n(e){return e.componentType}return{getNextSlideIndex:function(e,t){var i=t+1;return i>=e.length&&(i=0),i},getPrevSlideIndex:function(e,t){var i=t-1;return i<0&&(i=e.length-1),i},getSlidesFromChildrenByStructure:function(s){return e.filter(s,function(e){return n(e)===t||n(e)===i})},getShownOnAllSlidesFromChildrenByStructure:function(s){return e.reject(s,function(e){return n(e)===t||n(e)===i})},isBoxOrStripSlideShowComponent:function(e){return"wysiwyg.viewer.components.BoxSlideShow"===e||"wysiwyg.viewer.components.StripContainerSlideShow"===e},isBoxOrStripSlideShowSlideComponent:function(e){return e===t||e===i},getMatchingChildSlideType:function(e){if(!this.isBoxOrStripSlideShowComponent(e))throw new Error("invalid comp type, not a box or strip slide show component");return"wysiwyg.viewer.components.BoxSlideShow"===e?t:i}}}.apply(t,n))||(e.exports=s)},864:function(e,t,i){var n,s;n=[i(5),i(0),i(7),i(6),i(398),i(3)],void 0===(s=function(e,t,i,n,s,a){"use strict";return{mixins:[n.mixins.skinBasedComp(i.skinsMap),s],propTypes:{closeFunction:e.func,compData:a.Types.Component.compData.isRequired,windowKeyboardEvent:a.Types.SiteAspects.windowKeyboardEvent.isRequired,windowTouchEvents:a.Types.SiteAspects.windowTouchEvents.isRequired},componentWillMount:function(){var e=this.props.windowKeyboardEvent;e.registerToEscapeKey(this),this.props.windowTouchEvents.registerToWindowTouchEvent("touchMove",this);var t=this.getPrevAndNextState();t.next&&e.registerToArrowRightKey(this),t.prev&&e.registerToArrowLeftKey(this)},getSkinProperties:function(){var e=this.getChildZoomComponentType(),i="wysiwyg.viewer.components.MobileMediaZoom"===e,n=this.getChildZoomExtraProps();return{"":{children:this.createChildComponent(this.props.compData,e,"mediaZoom",t.assign({ref:this.props.compData.id,actualNavigateToItemFunc:this.actualNavigateToItem,getBoxDimensionsFunc:this.getBoxDimensions,getChildCompFunc:this.getChildComp,getPrevAndNextStateFunc:this.getPrevAndNextState,isDataChangedFunc:this.isDataChanged,closeFunction:this.props.closeFunction,enableInnerScrolling:this.enableInnerScrolling||!1},n||{})),style:{width:"100%",height:"100%",position:i?"static":"absolute"}}}},closeMediaZoom:function(){this.refs[this.props.compData.id].closeMediaZoom()},onEscapeKey:function(){this.closeMediaZoom()},onArrowLeftKey:function(){this.refs[this.props.compData.id].clickOnPreviousButton()},onArrowRightKey:function(){this.refs[this.props.compData.id].clickOnNextButton()},onWindowTouchMove:function(e){this.enableInnerScrolling||(e.preventDefault(),e.stopPropagation())}}}.apply(t,n))||(e.exports=s)},865:function(e,t,i){var n,s;n=[i(0),i(5),i(4),i(3)],void 0===(s=function(e,t,i,n){"use strict";return{propTypes:{compData:n.Types.Component.compData.isRequired,id:n.Types.Component.id.isRequired,rootId:n.Types.Component.rootId.isRequired,handleAction:n.Types.Behaviors.handleAction.isRequired,galleryCompId:t.string,imageIndex:t.number},handleImageExpandedAction:function(){var t=this.props.rootId,n=e.get(this.props,"compData"),s=e.get(this.props,"imageIndex"),a=this.props.galleryCompId;if(a){var r=this.props.handleAction,o=[{name:i.constants.ACTION_TYPES.ITEM_CLICKED,pageId:t,sourceId:a,type:"comp"},{name:i.constants.ACTION_TYPES.IMAGE_EXPANDED,pageId:t,sourceId:a,type:"comp"},{name:i.constants.ACTION_TYPES.IMAGE_CHANGED,pageId:t,sourceId:a,type:"comp"}];e.forEach(o,function(e){r(e,function(e,t){return{item:e,timeStamp:i.loggingUtils.performance.now(),imageIndex:t,name:"imageExpanded"}}(n,s))})}}}}.apply(t,n))||(e.exports=s)},866:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";var t={getDefultAnimationValues:function(e,t,i,n){return{sourceNodesArrSorted:[e],destNodesArrSorted:[t],stagger:0,timingFunctionIndex:i,transName:n,sporadicallyRandom:!1}},getUpdatedTimingFunctionIndex:function(e,t){return t>e.length-1&&(t=0),t},getCrossFadePossibleTransitionByName:function(e){switch(e){case"crossFadeHorizWave":return this.sortMatrixByRows;case"crossFadeVertWave":return this.sortMatrixByCols;case"seq_crossFade_Diagonal":return this.convertMatrixToDiagonal}},convertArrayToMatrix:function(t,i,n){var s=0,a=new Array(i);return e.times(i,function(i){a[i]||(a[i]=[]),e.times(n,function(e){s<t.length?(a[i][e]=t[s],s++):a[i][e]=-1})}),a},sortMatrixByRows:function(e){return[e]},sortMatrixByCols:function(t,i,n){var s=this.convertArrayToMatrix(t,i,n),a=[],r=0;return e.times(n,function(t){e.times(i,function(e){-1!==s[e][t]&&(a[r]=s[e][t],r++)})}),[a]},reverseMatrix:function(e){return e.reverse()},convertMatrixToDiagonal:function(t,i,n){var s=this.convertArrayToMatrix(t,i,n),a=[],r=0;return e.times(i+n,function(t){var o=Math.max(0,t-i),c=Math.min(n-o,t,i);e.times(c,function(e){var n=s[Math.min(i,t)-e-1][o+e];-1!==n&&(a[r]=n,r++)})}),[a]},convertMatrixToReverseDiagonal:function(e,t,i){var n=this.convertMatrixToDiagonal(e,t,i);return this.reverseMatrix(n)},getMatrixByRows:function(t,i,n){var s=0,a=new Array(i);return e.times(i,function(i){a[i]||(a[i]=[]),e.times(n,function(e){s<t.length&&(a[i][e]=t[s],s++)})}),a},getMatrixByRowsReverse:function(e,t,i){var n=this.getMatrixByRows(e,t,i);return this.reverseMatrix(n)},getMatrixByColsReverse:function(e,t,i){var n=this.getMatrixByCols(e,t,i);return this.reverseMatrix(n)},getMatrixByCols:function(t,i,n){var s=this.getMatrixByRows(t,i,n),a=new Array(n);return e.times(n,function(t){a[t]||(a[t]=[]),e.times(i,function(e){s[e][t]&&(a[t][e]=s[e][t])})}),a}};return{getSortedArrayAndStagger:function(e,i,n,s,a,r){switch(e){case"none":return{sourceNodesArrSorted:[i],destNodesArrSorted:[n],stagger:0,transName:"NoTransition"};case"seq_shrink_All":case"seq_crossFade_All":var o=[t.sortMatrixByRows,t.sortMatrixByCols,t.reverseMatrix,t.convertMatrixToDiagonal,t.convertMatrixToReverseDiagonal,t.sortMatrixByRows],c=o[r=t.getUpdatedTimingFunctionIndex(o,r)];return{sourceNodesArrSorted:c.call(t,i,s,a),destNodesArrSorted:c.call(t,n,s,a),stagger:r===o.length-1||i.length!==n.length?0:.1,timingFunctionIndex:r,transName:"seq_shrink_All"===e?"Shrink":"CrossFade"};case"swipe_horiz_All":var u=[t.getMatrixByRows,t.getMatrixByRowsReverse],p=u[r=t.getUpdatedTimingFunctionIndex(u,r)];return{sourceNodesArrSorted:p.call(t,i,s,a),destNodesArrSorted:p.call(t,n,s,a),stagger:.1,timingFunctionIndex:r,transName:"SlideHorizontal",sporadicallyRandom:s>1};case"swipe_vert_All":var l=[t.getMatrixByCols,t.getMatrixByColsReverse],d=l[r=t.getUpdatedTimingFunctionIndex(l,r)];return{sourceNodesArrSorted:d.call(t,i,s,a),destNodesArrSorted:d.call(t,n,s,a),stagger:.1,timingFunctionIndex:r,transName:"SlideVertical",sporadicallyRandom:a>1};case"seq_random":var g=["seq_shrink_All","seq_crossFade_All","swipe_horiz_All","swipe_vert_All"],h=g[Math.floor(Math.random()*g.length)];return this.getSortedArrayAndStagger(h,i,n,s,a,r);case"horizSwipeAllAtOnce":return t.getDefultAnimationValues(i,n,r,"SlideHorizontal");case"vertSwipeAllAtOnce":return t.getDefultAnimationValues(i,n,r,"SlideVertical");case"crossFadeAllAtOnce":return t.getDefultAnimationValues(i,n,r,"CrossFade");case"crossFadeHorizWave":case"crossFadeVertWave":case"seq_crossFade_Diagonal":var f=t.getCrossFadePossibleTransitionByName(e);return{sourceNodesArrSorted:f.call(t,i,s,a),destNodesArrSorted:f.call(t,n,s,a),stagger:.1,timingFunctionIndex:r,transName:"CrossFade"};case"seq_swipe_alternate":var m=[t.getMatrixByRows,t.getMatrixByCols];return{sourceNodesArrSorted:i,destNodesArrSorted:n,stagger:.1,timingFunctionIndex:r=t.getUpdatedTimingFunctionIndex(m,r),transName:0===r?"SlideHorizontal":"SlideVertical"}}}}}.apply(t,n))||(e.exports=s)},867:function(e,t,i){var n,s;n=[i(0),i(3)],void 0===(s=function(e,t){"use strict";var i=t.Types;return{propTypes:{rootId:i.Component.rootId.isRequired,externalBaseUrl:i.PublicModel.externalBaseUrl.isRequired,isSinglePostPage:t.Types.isSinglePostPage.isRequired,pageUrl:i.pageUrl.isRequired,getUniquePageId:i.getUniquePageId.isRequired},getUniquePageId:function(){if("masterPage"===this.props.rootId)return this.props.externalBaseUrl;var e=this.props.rootId;return this.props.isSinglePostPage?this.props.getUniquePageId(e):this.props.pageUrl}}}.apply(t,n))||(e.exports=s)},868:function(e,t,i){var n,s;n=[i(869),i(870),i(871),i(872)],void 0===(s=function(e,t,i,n){"use strict";return{TPAActivity:e,ContactFormActivity:t,DynamicContactFormActivity:i,SubscribeFormActivity:n}}.apply(t,n))||(e.exports=s)},869:function(e,t,i){var n,s;n=[i(0),i(179)],void 0===(s=function(e,t){"use strict";var i=function(e,i){t.call(this,e,i)};return(i.prototype=new t).getParams=function(i){var n=t.prototype.getParams.call(this,i),s={"application-id":this._fields.appDefinitionId,instance:this._fields.instance};return s=e.assign(n,s)},i.prototype.getPayload=function(i){var n=t.prototype.getPayload.call(this,i),s={contactUpdate:this._fields.contactUpdate,activityInfo:this._fields.info,activityType:this._fields.type,activityDetails:this._fields.details};return s=e.assign(n,s)},i}.apply(t,n))||(e.exports=s)},870:function(e,t,i){var n,s;n=[i(0),i(179)],void 0===(s=function(e,t){"use strict";var i={name:{first:"",last:""},emails:[{tag:"main",email:""}],phones:[{tag:"main",phone:""}],addresses:[{tag:"main",address:""}]};Object.freeze(i);var n={name:"name",email:"emails",phone:"phones",address:"addresses"},s=function(e,t){t.phone||(t.phone=""),t.phone=t.phone.substring(0,29)},a=function(e,t){t.name||(t.name="");var i=t.name.split(" ");e.name&&(e.name.first=i[0],e.name.last=i[1])},r=function(e,i,n){t.call(this,e,i),this._fieldLabels=n};return(r.prototype=new t).getParams=function(i){var n=t.prototype.getParams.call(this,i),s={"component-name":"ContactForm"};return s=e.assign(n,s)},r.prototype.getPayload=function(r){var o=t.prototype.getPayload.call(this,r),c={contactUpdate:function(t){var r=e.omitBy(t,function(e){return!e}),o=e.map(r,function(e,t){return n[t]}),c=e.pick(i,o);return a(c,r),s(c,r),e.forEach(r,function(t,i){var s=c[n[i]];e.isArray(s)&&(e.head(s)[i]=t)}),c}(this._fields),activityInfo:function(e){var t={fields:[]};return Object.keys(e).forEach(function(i){t.fields.push({name:i,value:e[i]})}),t}(this._fields),activityDetails:function(t){var i="";return i+=t.subject?"<strong>"+t.subject+"</strong>":"",t.message&&(i+=t.subject?"<br>":"",i+=t.message),{additionalInfoUrl:null,summary:e.isEmpty(i)?"No message was received":i}}(this._fields),activityType:"contact/contact-form"};return c=e.assign(o,c)},r}.apply(t,n))||(e.exports=s)},871:function(e,t,i){var n,s;n=[i(0),i(179)],void 0===(s=function(e,t){"use strict";var i=29;function n(e,t){var i=e.filter(function(e){return e.name===t});return i.length>0?i[0].value:""}var s=function(t){function n(e){return t.filter(function(t){return t.name===e})}var s=[{type:"email",fields:n("secondaryEmail"),contactField:"emails"},{type:"phone",fields:n("phone"),contactField:"phones"},{type:"address",fields:n("address"),contactField:"addresses"}].reduce(function(e,t){return e[t.contactField]=t.fields.reduce(function(e,n){if(n.value){var s={tag:n.label};s[t.type]="phone"===n.name?function(e){return e.substring(0,i)}(n.value):n.value,e.push(s)}return e},[]),e},{}),a=n("email");if(a&&a.length>0){var r=a[0];s.emails.unshift({tag:r.label,email:r.value})}var o=function(t){var i=e.filter(t,{name:"name"});if(i.length>0){var n=i[0].value;if(!n)return"";var s=n.indexOf(" ");return s>0?{first:n.substr(0,n.indexOf(" ")),last:n.substr(n.indexOf(" ")+1)}:{first:n}}return""}(t);return o&&(s.name=o),s};var a=function(e,i){t.call(this,e,i)};return(a.prototype=new t).getParams=function(i){var n=t.prototype.getParams.call(this,i),s={"component-name":"ContactForm"};return s=e.assign(n,s)},a.prototype.getPayload=function(i){var a=t.prototype.getPayload.call(this,i),r={contactUpdate:s(this._fields),activityInfo:function(t){var i={};return i.fields=e.cloneDeep(t),i}(this._fields),activityDetails:function(t){var i=n(t,"subject"),s=n(t,"message"),a="";return a+=i?"<strong>"+i+"</strong>":"",s&&(a+=i?"<br>":"",a+=s),{additionalInfoUrl:null,summary:e.isEmpty(a)?"No message was received":a}}(this._fields),activityType:"contact/contact-form"};return r=e.assign(a,r)},a}.apply(t,n))||(e.exports=s)},872:function(e,t,i){var n,s;n=[i(0),i(179)],void 0===(s=function(e,t){"use strict";var i=function(e,i){t.call(this,e,i)};return(i.prototype=new t).getParams=function(i){var n=t.prototype.getParams.call(this,i),s={"component-name":"subscribeForm"};return s=e.assign(n,s)},i.prototype.getPayload=function(i){var n=t.prototype.getPayload.call(this,i),s={contactUpdate:function(e){return{name:{first:e.first||"",last:e.last||""},emails:[{tag:"main",email:e.email||""}],phones:e.phone?[{tag:"main",phone:e.phone||""}]:[],emailSubscriptionPolicy:"RECURRING"}}(this._fields),activityInfo:function(t){var i={fields:[]};return Object.keys(t).forEach(function(e){i.fields.push({name:e,value:t[e]})}),i.email=t.email,(t.first||t.last)&&(i.name=e.pickBy({first:t.first,last:t.last})),t.phone&&(i.phone=t.phone),i}(this._fields),activityType:"contact/subscription-form"};return s=e.assign(n,s)},i}.apply(t,n))||(e.exports=s)},873:function(e,t,i){var n,s;n=[i(4)],void 0===(s=function(e){"use strict";var t=e.urlUtils,i=e.ajaxLibrary,n="/_api/app-integration-bus-web/v1/activities";return{reportActivity:function(e,s,a,r){var o="?"+t.toQueryString(s.getParams()),c=e+n+o;i.ajax({type:"POST",url:c,data:s.getPayload(),dataType:"json",contentType:"application/json",success:a,error:r})}}}.apply(t,n))||(e.exports=s)},874:function(e,t,i){var n,s;n=[i(74),i(0),i(19),i(5),i(18),i(12),i(11),i(875),i(399),i(6)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u){"use strict";var p=i.createFactory(o);function l(e,i){t(e).map(a.findDOMNode).map(r).forEach(function(e){e.attr("data-leaving",!!i||null)})}return s({displayName:"wixTransitionGroup",mixins:[u.mixins.animationsMixin],propTypes:{getTransitionParams:n.func,transition:n.string,transitionDuration:n.number,reverse:n.bool,transitionCallback:n.func},getDefaultProps:function(){return{getTransitionParams:function(){return{}},transition:"CrossFade",transitionDuration:2,reverse:!1,transitionCallback:t.noop}},getInitialState:function(){return this.leavingChildren={},this.enteringChildren={},{}},render:function(){return p(t.assign({childFactory:this.childWrapper,component:"div",ref:"group"},t.omit(this.props,"transition","transitionDuration","reverse","transitionCallback","animations","isSiteBusy")))},childWrapper:function(t){return e(c,{onWillEnter:this.onWillEnter,onWillLeave:this.onWillLeave,refInParent:t.props.refInParent,ref:t.props.refInParent,key:t.props.refInParent},t)},getInnerRefs:function(e){return t.map(e,function(e){return this.refs.group.refs[e]}.bind(this))},flush:function(){if(!t.isEmpty(this.enteringChildren)&&t.size(this.leavingChildren)===t.size(this.enteringChildren)){var e=this.getInnerRefs(t.keys(this.leavingChildren)),i=this.getInnerRefs(t.keys(this.enteringChildren));l(e,!0),l(i,!1);var n=t.values(this.enteringChildren).concat(t.values(this.leavingChildren));this.leavingChildren={},this.enteringChildren={};var s=this.props.getTransitionParams();this.transition(e,i,this.props.transition,this.props.transitionDuration,0,t.assign({reverse:this.props.reverse},s),{onComplete:function(){this.props.transitionCallback(function(){t.forEach(n,function(e){e()})})}.bind(this)})}},onWillEnter:function(e,t){this.enteringChildren[e]=t,this.flush()},onWillLeave:function(e,t){this.leavingChildren[e]=t,this.flush()}})}.apply(t,n))||(e.exports=s)},875:function(e,t,i){var n,s;n=[i(74),i(0),i(19),i(5),i(18)],void 0===(s=function(e,t,i,n,s){"use strict";function a(e){var t={},n=0;return i.Children.forEach(e,function(e){t[e.key||""+n++]=e}),t}return s({displayName:"ReactTransitionGroup",propTypes:{component:n.any,childFactory:n.func,children:n.node},getDefaultProps:function(){return{component:"span",childFactory:t.identity}},getInitialState:function(){return{children:a(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var i=a(e.children),n=this.state.children;this.setState({children:t.assign({},n,i)});var s=void 0;for(s in i)!i[s]||n&&n.hasOwnProperty(s)||this.currentlyTransitioningKeys[s]||this.keysToEnter.push(s);for(s in n)!n[s]||i&&i.hasOwnProperty(s)||this.currentlyTransitioningKeys[s]||this.keysToLeave.push(s)},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var i=a(this.props.children);i&&i.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var i=a(this.props.children);i&&i.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var i=this.refs[e];i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=a(this.props.children);n&&n.hasOwnProperty(e)?this.performEnter(e):this.setState(function(i){var n=t.assign({},i.children);return delete n[e],{children:n}})},render:function(){var n=[];for(var s in this.state.children)if(this.state.children[s]){var a=this.state.children[s];n.push(i.cloneElement(this.props.childFactory(a),{ref:s,key:s}))}var r=t.assign({},this.props);return delete r.transitionLeave,delete r.transitionName,delete r.transitionAppear,delete r.transitionEnter,delete r.childFactory,delete r.transitionLeaveTimeout,delete r.transitionEnterTimeout,delete r.transitionAppearTimeout,delete r.component,e(this.props.component,r,n)}})}.apply(t,n))||(e.exports=s)},876:function(e,t,i){var n,s;n=[i(74),i(0),i(19),i(5),i(18)],void 0===(s=function(e,t,i,n,s){"use strict";return s({displayName:"fullScreenOverlay",propTypes:{siteWidth:n.number.isRequired,siteScrollingBlocker:n.object.isRequired,forceBackground:n.func.isRequired,disableForcedBackground:n.func.isRequired,isMobileDevice:n.bool.isRequired,overlayBackgroundOpacity:n.string,children:n.node},statics:{createOverlay:function(e,n){var s=i.createFactory(this);return e[""]=t.assign({},e[""],{wrap:[s,n]}),e}},getOverlayBackground:function(){return"rgba(0, 0, 0, "+(this.props.overlayBackgroundOpacity||1)+")"},componentDidMount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!0),this.props.isMobileDevice&&this.props.forceBackground(this.getOverlayBackground())},componentWillUnmount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,!1),this.props.isMobileDevice&&this.props.disableForcedBackground()},render:function(){return e("div",null,e("div",{className:"fullScreenOverlay",key:"fullScreenOverlay"},e("div",{className:"fullScreenOverlayContent",style:{width:this.props.siteWidth,background:this.getOverlayBackground()},key:"fullScreenOverlayContent"},this.props.children)))}})}.apply(t,n))||(e.exports=s)},877:function(e,t,i){var n;void 0===(n=function(){"use strict";function e(e){return e.getSiteAspect("animationsAspect")}return{playAnimations:function(t,i,n,s,a){var r=e(t);return r?r.playAnimations(i,n,s,a):a&&a()},hideElementsByAnimationType:function(t,i){var n=e(t);n&&n.hideElementsByAnimationType(i)},revertHideElementsByAnimations:function(t,i){var n=e(t);n&&n.revertHideElementsByAnimations(i)},stopAndClearAnimations:function(t,i,n){var s=e(t);s&&s.stopAndClearAnimations(i,n)},isAnimationPlayable:function(t,i){return e(t).isAnimationPlayable(i)}}}.apply(t,[]))||(e.exports=n)},878:function(e,t,i){var n,s;n=[i(0),i(390)],void 0===(s=function(e,t){"use strict";return{register:function(e){t.register(e)}}}.apply(t,n))||(e.exports=s)},879:function(e,t,i){var n,s;n=[i(25),i(904),i(889),i(890),i(892),i(893),i(894),i(895),i(394),i(897),i(898),i(899),i(900),i(901),i(902),i(401),i(903),i(880),i(905),i(906),i(907),i(908),i(909),i(912),i(913),i(914),i(915),i(916),i(917),i(918),i(919),i(920),i(921)],void 0===(s=function(e,t,i,n){"use strict";e.registerSiteAspect("behaviorsAspect",t),e.registerSiteAspect("animationsAspect",i),e.registerSiteAspect("designDataChangeAspect",n)}.apply(t,n))||(e.exports=s)},880:function(e,t,i){var n,s;n=[i(0),i(25),i(882),i(883),i(884),i(885),i(881),i(886),i(887),i(888),i(1)],void 0===(s=function(e,t,i,n,s,a,r,o,c,u,p){"use strict";var l=p.triggerTypesConsts;function d(t){this._aspectSiteAPI=t,this._siteData=t.getSiteData(),this._behaviors=[],this._pageTransitionComplete=[],this._pageNavigationCanceled=[],this._isDuringPageTransition=!1,this._navigationComplete=[],this._actions={},this._previouslyRegisteredPages=[],this._didFirstLayout=!1,this._didPageChange=!1,this._noopFirstLayout=this._siteData.isClientAfterSSR(),this.registerAction(i),this.registerAction(n),this.registerAction(s),this.registerAction(a),this.registerAction(o),this.registerAction(c),this.registerAction(u),this.registerAction(r),this.enableAction("pageTransition"),"preview"===(this._aspectSiteAPI.getRenderFlag("componentViewMode")||"preview")&&(this.enableAction("bgScrub"),this.enableAction("screenIn"),this.enableAction("scrollScrub"),this.enableAction("exit"),this.enableAction("load"),this.enableAction("modeChange")),this._registerTriggers(),t.registerToAddedRenderedRootsDidLayout(function(t){e.some(t,this._siteData.isPopupPage.bind(this._siteData))&&this.handleNavigationComplete()}.bind(this))}d.prototype.previewAnimation=function(e,t,i,n){var s=this._aspectSiteAPI.getPageById(t).sequence();return s.add(e,i.name,i.duration,i.delay,i.params),s.add(e,"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),n&&s.onCompleteAll(n),s.execute()},d.prototype.previewTransition=function(e,t,i,n,s){var a=void 0;if(a="masterPage"===i?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var r=a.sequence();return r.add({sourceRefs:e,destRefs:t},n.name,n.duration,n.delay,n.params),r.add(e.concat(t),"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),s&&r.onCompleteAll(s),r.execute()}},d.prototype.stopPreviewAnimation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this._aspectSiteAPI.getMasterPage();(this._aspectSiteAPI.getCurrentPopup()||this._aspectSiteAPI.getCurrentPage()).stopSequence(e,t),i.stopSequence(e,t)},d.prototype.enableAction=function(e){this._actions[e]&&this._actions[e].shouldEnable()&&this._actions[e].enableAction()},d.prototype.isActionDisabled=function(e){return this._actions[e]&&!this._actions[e].isEnabled()},d.prototype.needToRunPreConditions=function(e){var t=e.name;return!this._actions[t]||!this._actions[t].needToRunPreConditions||this._actions[t].needToRunPreConditions(e)},d.prototype.disableAction=function(e){this._actions[e]&&this._actions[e].disableAction()},d.prototype.executeAction=function(t,i){var n=e.drop(arguments,2);if(this._actions[t]){var s=this._actions[t];s.executeAction.apply(s,[i].concat(n))}},d.prototype.registerBehaviors=function(t,i,n){n=e.isString(n)?JSON.parse(n):n,n=e.map(n,function(n){return e.assign({},n,{pageId:i,sourceId:t,targetId:n&&n.targetId||t})}),this.unRegisterBehaviors(t,n,!1),this._behaviors=this._behaviors.concat(n),this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.unRegisterBehaviors=function(t,i,n){n=!1!==n,this._behaviors=e.reject(this._behaviors,{sourceId:t}),n&&this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[],this._behaviors=[],this._propagateBehaviorsUpdate(this._behaviors)},d.prototype.registerNextPageTransition=function(e,t,i,n,s,a,r,o){this._isDuringPageTransition=!0,this._actions.pageTransition.registerNextPageTransition(e,t,i,n,s,a,r,o),this._actions.screenIn.registerPageTransitionDuration(s)},d.prototype.registerPageTransitionComplete=function(t){e.isFunction(t)&&this._pageTransitionComplete.push(t)},d.prototype.registerToPageNavigationCanceled=function(t){e.isFunction(t)&&this._pageNavigationCanceled.push(t)},d.prototype.handlePagePageNavigationCanceled=function(){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageNavigationCanceled,function(e){e()}),this._pageNavigationCanceled=[],this.handleNavigationComplete()},d.prototype.handlePageTransitionComplete=function(t,i){this._aspectSiteAPI.endingPageTransition(),this._isDuringPageTransition=!1,e.forEach(this._pageTransitionComplete,function(e){e(t,i)}),this._pageTransitionComplete=[],this.handleNavigationComplete()},d.prototype.registerNavigationComplete=function(t){e.isFunction(t)&&this._navigationComplete.push(t)},d.prototype.handleNavigationComplete=function(){this._isDuringPageTransition||(this._aspectSiteAPI.endingPageTransition(),e.forEach(this._navigationComplete,function(e){e()}),this._navigationComplete=[],this._pageNavigationCanceled=[])},d.prototype.registerNextBGPageTransition=function(e,t,i,n){this._actions.pageTransition.registerNextBGPageTransition(e,t,i,n)},d.prototype.registerNextAnchorScroll=function(e){this._actions.pageTransition.registerNextAnchorScroll(e)},d.prototype.hasNextAnchorScroll=function(){return this._actions.pageTransition.hasNextAnchorScroll()},d.prototype.registerComponentsExit=function(e,t){this._actions.exit.registerComponentsExit(e,t)},d.prototype.registerAction=function(t){var i=new t(this._aspectSiteAPI),n=[].concat(i.ACTIONS_SUPPORTED||i.ACTION_NAME);e.forEach(n,function(e){if(this._actions[e])throw new Error("Action "+e+" already registered");if(!e)throw new Error("Action missing it's ACTION_NAME parameter, cannot register it");this._actions[e]=i}.bind(this))},d.prototype._propagateTrigger=function(t){var i=arguments;e.forEach(this._actions,function(n){e.includes(n.ACTION_TRIGGERS,t)&&n.handleTrigger.apply(n,i)})},d.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._noopFirstLayout&&!this._didFirstLayout&&this._aspectSiteAPI.notifyOnRendered(),this._didPageChange||!this._noopFirstLayout&&!this._didFirstLayout){this._noopFirstLayout=!1;var e=this._aspectSiteAPI.getSiteData(),t=e.getExistingRootNavigationInfo(e.getPrimaryPageId());this._aspectSiteAPI.isPageAllowedAndLoaded(t)&&this._propagateTrigger(l.PAGE_CHANGED)}this._didPageChange=!1,this._propagateTrigger(l.DID_LAYOUT)},d.prototype._enablePageChangeTransitionsAfterLayout=function(){this._didFirstLayout?this._didPageChange=!0:this._didFirstLayout=!0},d.prototype.reloadPageAnimations=function(){this._propagateTrigger(l.PAGE_RELOADED)},d.prototype._propagateBehaviorsUpdate=function(t){e.forEach(this._actions,function(i){i.handleBehaviorsUpdate(e.clone(t))})},d.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,l.SITE_READY)),this.registerPageTransitionComplete(this._propagateTrigger.bind(this,l.TRANSITION_ENDED)),this._aspectSiteAPI.registerToUrlPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this)),this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this)),this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,l.SCROLL)),this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,l.RESIZE)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,l.MODE_CHANGED_INIT)),this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,l.MODE_CHANGED_EXECUTE))},d.prototype.actionsRemoved=function(e){this._propagateTrigger(l.ACTIONS_REMOVED,e)},d.prototype.actionsAddedLayouted=function(e){this._propagateTrigger(l.ACTIONS_ADDED_LAYOUTED,e)},t.registerSiteAspect("actionsAspect",d)}.apply(t,n))||(e.exports=s)},881:function(e,t,i){var n,s;n=[i(0),i(11),i(1),i(12)],void 0===(s=function(e,t,i,n){"use strict";var s=i.triggerTypesConsts,a={ENTER:i.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:i.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:i.siteConstants.Animations.Modes.AnimationType.TRANSITION},r={};r[a.ENTER]=a.LEAVE,r[a.LEAVE]=a.ENTER,Object.freeze(r);var o={};o[a.ENTER]="modeIn",o[a.LEAVE]="modeOut",o[a.TRANSITION]="modeChange",Object.freeze(o);var c={"wysiwyg.viewer.components.SiteButton":i.siteConstants.Animations.TransitionType.NO_SCALE,"wysiwyg.viewer.components.WRichText":i.siteConstants.Animations.TransitionType.NO_DIMESIONS};function u(t,i,n){var s=e.get(n,"params.modeIds");switch(n.action){case"modeIn":return"enter"===t[n.targetId]&&e.every(s,function(e){return!0===i[e]});case"modeOut":return"leave"===t[n.targetId]&&e.every(s,function(e){return!1===i[e]});case"modeChange":return"transition"===t[n.targetId]&&e.every(s,function(t){return!e.isUndefined(i[t])});default:return!1}}function p(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._behaviorsById={},this.playingSequences={},this.componentAnimationsInfo={}}return p.prototype=e.create(Object.prototype,{constructor:p,ACTION_TRIGGERS:[s.MODE_CHANGED_INIT,s.MODE_CHANGED_EXECUTE],ACTION_NAME:"modeChange",ACTIONS_SUPPORTED:["modeChange","modeIn","modeOut"],shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice();return e&&!t&&!i},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this.revertHideElementsByAnimationType(this._behaviorsById),this._behaviorsById={},this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},needToRunPreConditions:function(){return!1},_executeActionOnTick:function(){this._animateOnNextTick&&(this._executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){this._behaviorsById={},e.forEach(this.playingSequences,function(e,t){this.getComponentPage(e.parentId).stopSequence(e.sequence.getId(),1),this.handleSequenceEnded(t,e.parentId,e.type)}.bind(this)),e.forEach(this.componentAnimationsInfo,function(e,t){e.hasPendingAnimation=!1,this.handleSequenceEnded(t,e.pageId,e.type)}.bind(this))},_executeAction:function(){e.isEmpty(this._behaviorsById)||e.assign(this.playingSequences,this.playJsAnimations())},executeAction:function(){this.handleTrigger.apply(this,arguments)},clearPlayedBehaviors:function(t){this._behaviorsById=e.omitBy(this._behaviorsById,function(e,i){return t[i]})},convertBehaviorTimingFunctionToCSS:function(e){return i.siteConstants.Animations.TimingFunctions[e]},clearCssTransitionFromNode:function(e){e.css({"transition-property":"","transition-duration":"","transition-delay":"","transition-timing-function":"","-webkit-transition-timing-function":"","-moz-transition-timing-function":"","-o-transition-timing-function":""})},addCssTransitionToNode:function(e,t){var i=this.convertBehaviorTimingFunctionToCSS(e.params.timingFunction);t.css({"transition-property":"background-color, color !important","transition-duration":e.duration+"s !important","transition-delay":e.delay+"s !important","transition-timing-function":i+" !important","-webkit-transition-timing-function":i+" !important","-moz-transition-timing-function":i+" !important","-o-transition-timing-function":i+" !important"})},initCssTransitions:function(){var i=e.filter(this._behaviorsById,{animationType:"transition"});i.length&&e.forEach(i,function(e){var i=e.targetId,n=t(this.getComponentNode(e.pageId,i));this.componentAnimationsInfo[i].didCssTransitionStartExecuting||(this.componentAnimationsInfo[i].didCssTransitionStartExecuting=!0,this.addCssTransitionToNode(e,n))}.bind(this))},handleSequenceEnded:function(e,i,n){n===a.TRANSITION&&this.clearCssTransitionFromNode(t(this.getComponentNode(i,e))),delete this.playingSequences[e],this.notifyAnimationEnded(e)},playJsAnimations:function(){var t={},i={};return e.forEach(this._behaviorsById,function(e){var n=this.getComponentPage(e.pageId),s=e.targetId,a=this.playingSequences[s],o=a&&r[a.type]===e.animationType,c=a&&a.type===e.animationType;t[s]=!0,c||(o?this.reverseAnimation(e):(a&&n.stopSequence(a.sequence.id),i[s]={sequence:n.sequence(),parentId:e.pageId,type:e.animationType},this.addAnimationToSequence(e,this.componentAnimationsInfo[e.targetId],i[e.targetId].sequence)))}.bind(this)),e.forEach(i,this.executeSequenceIfNeeded.bind(this)),this.clearPlayedBehaviors(t),i},reverseAnimation:function(e){var t=e.targetId,i=this.getComponentPage(e.pageId),n=this.playingSequences[t];n.type=e.animationType,this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.reverseSequence(n.sequence.getId())},executeSequenceIfNeeded:function(e,t){var i=e.sequence;if(i.hasAnimations()){var n=this.componentAnimationsInfo[t].progress,s=this.handleSequenceEnded.bind(this,t,e.parentId,e.type);this.componentAnimationsInfo[t].hasPendingAnimation=!1,i.onCompleteAll(s),i.onReverseAll(s),n&&i.onInit(function(e){e.progress(1-n)}),i.execute()}},getComponentPage:function(e){return this._aspectSiteAPI.getPageById(e)},getPageComponents:function(e){return this._aspectSiteAPI.getPageComponents(e)},getComponentNode:function(e,t){var i=this.getPageComponents(e)[t];return i?n.findDOMNode(i):null},addAnimationToSequence:function(e,t,n){var s=this.getPageComponents(e.pageId),r=e.targetId,o="modeOut"===e.action?"clip,transform":"clip,opacity,transform";if(!s[r])return null;var u=s[r].props.structure,p=e.duration,l=e.delay;if(e.animationType===a.TRANSITION){var d=t.prevLayout,g=e.name+(c[u.componentType]||i.siteConstants.Animations.TransitionType.SCALE);n.add(r,g,p,l,{from:d})}else n.add(r,e.name,p,l,e.params,0);return n.add(r,"BaseClear",0,0,{props:o,immediateRender:!1}),r},hideElementsByAnimationType:function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t),n=this.playingSequences[t],s=n&&r[n.type]===e.animationType;i&&!s&&(i.style.opacity=0)}}.bind(this))},revertHideElementsByAnimationType:function(t){e.forEach(t,function(t){e.forEach(t,function(e,t){if(this.animations.getProperties(e.name).hideOnStart){var i=this.getComponentNode(e.pageId,t);i&&(i.style.opacity="")}}.bind(this))}.bind(this))},initiateBehaviors:function(t,i,n,s,r){this._behaviorsById=e.assign(this._behaviorsById,i),e.forEach(n,function(e,i){var n=this.componentAnimationsInfo[i]=this.componentAnimationsInfo[i]||{};n.pageId=t,n.type=e,n.hasPendingAnimation=!0,n.onComplete=r,e===a.TRANSITION&&(n.prevLayout=s[i])}.bind(this))},handleBehaviorsUpdate:function(e){this._behaviors=e},runJsAnimationsOnNextTick:function(){this._animateOnNextTick=!0},runJsAnimationsImmediately:function(){this._executeAction()},notifyAnimationEnded:function(e){if(this.componentAnimationsInfo[e]&&!this.componentAnimationsInfo[e].hasPendingAnimation){var t={};t[e]=this.componentAnimationsInfo[e].type;var i=this.componentAnimationsInfo[e].onComplete;delete this.componentAnimationsInfo[e],i(t)}},handleDidLayout:function(){this._aspectSiteAPI.unRegisterFromDidLayout();var e=this._siteData.getBrowser();e&&(e.ie||e.edge||e.safari)?this.runJsAnimationsImmediately():this.runJsAnimationsOnNextTick()},handleReverseTransitionAnimations:function(t){var i=e.transform(t,function(e,t,i){t===a.TRANSITION&&e.push(i)},[]),n=e.transform(this.playingSequences,function(e,t,i){t.type===a.TRANSITION&&e.push(i)},[]),s=e.intersection(i,n);e.forEach(s,function(e){var t=this.componentAnimationsInfo[e],i=this.getComponentPage(t.pageId),n=this.playingSequences[e].sequence.getId(),s=i.getSequence(n),a=this.getComponentNode(t.pageId,e);t.progress=s.progress(),s.set(a,{clearProps:"clip,opacity"}),i.stopSequence(n,1),delete this.playingSequences[e]}.bind(this))},handleTrigger:function(t,i){if(this._isEnabled)switch(t){case s.MODE_CHANGED_INIT:var n=function(t,i,n){return e(t).filter(e.partial(u,i,n)).map(function(t){return e.assign({animationType:i[t.targetId]},t)}).keyBy("targetId").value()}(this._behaviors,i.componentAnimations,i.modeChanges),a=e.pick(i.componentAnimations,e.keys(n)),r=e.omit(i.componentAnimations,e.keys(n));this.initiateBehaviors(i.pageId,n,a,i.transitioningComponentsPrevLayout,i.onComplete),this.handleReverseTransitionAnimations(i.componentAnimations),this.initCssTransitions(),i.onComplete(r);break;case s.MODE_CHANGED_EXECUTE:this.hideElementsByAnimationType(this._behaviorsById),this._aspectSiteAPI.registerToDidLayout(this.handleDidLayout.bind(this))}else i&&i.onComplete&&i.onComplete(i.componentAnimations)}}),p}.apply(t,n))||(e.exports=s)},882:function(e,t,i){var n,s;n=[i(0),i(14),i(1),i(8),i(139)],void 0===(s=function(e,t,i,n,s){"use strict";var a=i.balataConsts,r=i.triggerTypesConsts,o={BackgroundParallax:[a.BALATA,a.MEDIA],BackgroundReveal:[a.BALATA,a.MEDIA],BackgroundZoom:[a.BALATA,a.MEDIA],BackgroundFadeIn:[a.BALATA],BackgroundBlurIn:[a.BALATA,a.MEDIA],SiteBackgroundParallax:[]};function c(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._animateOnNextTick=!1,this._liveSequenceIds=[],this._currentPageBehaviors=[],this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1,this.didFireInitialResizeEvent=!1}return Object.freeze(o),c.prototype=e.create(Object.prototype,{constructor:c,ACTION_TRIGGERS:[r.PAGE_CHANGED,r.PAGE_RELOADED,r.TRANSITION_ENDED,r.SCROLL,r.RESIZE],ACTION_NAME:"bgScrub",_currentScroll:{x:0,y:0},_currentPopupScroll:{x:0,y:0},shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled||(this.initiateBehaviors(),this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){this._isEnabled&&(this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations(),this._currentPageBehaviors=[],this._isEnabled=!1)},isEnabled:function(){return this._isEnabled},executeAction:function(){e.isEmpty(this._currentPageBehaviors)||this.setAnimationsProgress()},setSequenceProgress:function(e,i,n){var a=n.getSequence(e.sequenceId);a?a.progress(i):t.loggingUtils.logger.reportBI(this._siteData,s.NO_SEQUENCE_TO_RUN_ANIMATIONS_ON,{sequenceId:e.sequenceId})},setAnimationsProgress:function(){var t=Math.max(this._currentScroll.y,0);e.forEach(this._liveSequenceIds,function(e){if(this.isComponentInViewport(e.compId,e.parentId)){var i=(this._viewportHeight+t-e.componentTop)/e.maxTravel;this.setSequenceProgress(e,i,this.getComponentParent(e.parentId))}}.bind(this))},getComponentMeasure:function(t){var i=this._siteData.measureMap||{};return{height:e.get(i,["height",t],0),top:e.get(i,["absoluteTop",t],0)}},setSiteMeasure:function(){this._viewportHeight=this._siteData.getScreenHeight(),this._siteHeight=this.getSiteHeight()},initiateBehaviors:function(){this._currentPageBehaviors=this.getCurrentPageBehaviors(this._behaviors,this._siteData.getPrimaryPageId())},getComponentParent:function(e){return"masterPage"===e?this._aspectSiteAPI.getMasterPage():"siteBackground"===e?this._aspectSiteAPI.getComponentById("SITE_BACKGROUND"):this._aspectSiteAPI.getCurrentPage()},isComponentInViewport:function(e,t){if(i.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,t))return!0;var n=this._currentScroll,s=this._aspectSiteAPI.getCurrentPopupId();return s&&s===this._aspectSiteAPI.getRootOfComponentId(e)&&(n=this._currentPopupScroll),i.viewportUtils.isInViewport(this._aspectSiteAPI,n,e)},getSequenceParams:function(){return{suppressReactRendering:!1,forgetSequenceOnComplete:!1,paused:!0}},getCurrentPageBehaviors:function(t,i){return e.filter(t,function(e){return e.action===this.ACTION_NAME&&(e.pageId===i||"masterPage"===e.pageId||"siteBackground"===e.pageId)}.bind(this))},createSequences:function(){var t=!1;(this._liveSequenceIds=e.map(this._currentPageBehaviors,function(i){var n="siteBackground"===i.pageId,s=this.getComponentParent(i.pageId).sequence(),a=this.getComponentMeasure(i.targetId),r=this.animations.getProperties(i.name),c=(r.getMaxTravel||e.noop)(a,this._viewportHeight,this._siteHeight)||this._viewportHeight,u=i.params||{};u.browserFlags=this._siteData.browserFlags(),u.componentTop=a.top,u.componentHeight=a.height,u.viewPortHeight=this._viewportHeight;var p=[[i.targetId].concat(o[i.name])];s.add(p,i.name,i.duration,i.delay,u),t=r.shouldDisableSmoothScrolling||t;var l=s.execute(this.getSequenceParams());return{path:p,compId:i.targetId,parentId:i.pageId,behaviorName:i.name,componentTop:n?this._viewportHeight:a.top,componentHeight:a.height,maxTravel:c,sequenceId:l}}.bind(this)),n.isOpen("DisableSmoothScrolling",this._siteData))&&(t&&this._siteData.browserFlags().shouldDisableSmoothScrolling&&this._aspectSiteAPI.getSiteAspect("mouseWheelOverride").overrideMouseWheel())},handleTrigger:function(e,t){if(this._isEnabled)switch(this._currentScroll=function(e,t){if(e===r.SCROLL)return t;var i=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");return i&&i.getScrollPosition?i.getScrollPosition():this._aspectSiteAPI.getSiteScroll()}.call(this,e,t),this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),e){case r.PAGE_CHANGED:case r.TRANSITION_ENDED:this.clearAllAndReload(0),this._animateOnNextTick=!0,this._behaviorsUpdated=!1;break;case r.PAGE_RELOADED:case r.SCROLL:case r.RESIZE:(this._behaviorsUpdated||this._viewportHeightUpdated)&&(this.clearAllAndReload(0),this._behaviorsUpdated=!1,this._viewportHeightUpdated=!1),this._animateOnNextTick=!0}},_shouldForceResizeEvent:function(){!this._siteData.measureMap||this.didFireInitialResizeEvent&&this._siteData.getScreenHeight()===this._viewportHeight||(this.didFireInitialResizeEvent=!0,this._viewportHeight=this._siteData.getScreenHeight(),this._viewportHeightUpdated=!0,this.handleTrigger(r.RESIZE))},_executeActionOnTick:function(){this._shouldForceResizeEvent(),this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},clearAllAndReload:function(e){this.stopAndClearAnimations(e),this.initiateBehaviors(),this.setSiteMeasure(),this.createSequences()},stopAndClearAnimations:function(t){var i=this,n=this._aspectSiteAPI.getSiteAspect("mouseWheelOverride");n&&n.releaseMouseWheel&&n.releaseMouseWheel(),t=e.isNumber(t)?t:1,e.forEach(this._liveSequenceIds,function(e){var n=i.getComponentParent(e.parentId);n&&n.getSequence(e.sequenceId)&&n.stopSequence(e.sequenceId,t)}),this._liveSequenceIds=[]},handleBehaviorsUpdate:function(e){this._behaviors=e,this._behaviorsUpdated=!0},getSiteHeight:function(){var t=this._aspectSiteAPI.getSiteData().measureMap||{},i=this._aspectSiteAPI.getRenderFlag("extraSiteHeight");return e.get(t,"height.masterPage",0)+(t.siteMarginBottom||0)+(i||0)}}),c}.apply(t,n))||(e.exports=s)},883:function(e,t,i){var n,s;n=[i(0),i(1),i(181)],void 0===(s=function(e,t,i){"use strict";var n=t.triggerTypesConsts;function s(){i.apply(this,arguments),this._windowScrollAspect=this._aspectSiteAPI.getSiteAspect("windowScrollEvent"),this._currentScroll=this.getCurrentScroll(),this._previousScroll=void 0,this._accumulatedScroll=0}return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.SCROLL,n.PAGE_CHANGED,n.RESIZE,n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT],ACTION_NAME:"scrollScrub",ACTIONS_SUPPORTED:["scrollScrub"],runAction:function(t){this._previousScroll=this._currentScroll,this._currentScroll=this.getCurrentScroll(),this._accumulatedScroll=this.getAccumulatedScroll(),t=e.assign(t,{scroll:{previous:this._previousScroll,current:this._currentScroll,accumulatedScroll:this._accumulatedScroll}}),this.triggerActions(e.keys(this._currentActions),t)},getAccumulatedScroll:function(){var e=this._currentScroll.direction!==this._previousScroll.direction,t=Math.abs(this._currentScroll.position.y-this._previousScroll.position.y);return e?0:this._accumulatedScroll+t},getCurrentScroll:function(){if(!this._windowScrollAspect)return{};var t=this._windowScrollAspect.getScrollPosition();return{direction:this._windowScrollAspect.getScrollDirection(t),position:e.defaults(t,{x:0,y:0})}},handleActionTrigger:function(e){switch(e){case n.ACTIONS_REMOVED:case n.ACTIONS_ADDED_LAYOUTED:break;case n.RESIZE:case n.DID_LAYOUT:case n.PAGE_CHANGED:case n.SCROLL:this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),s}.apply(t,n))||(e.exports=s)},884:function(e,t,i){var n,s;n=[i(0),i(1),i(181)],void 0===(s=function(e,t,i){"use strict";var n=t.triggerTypesConsts;function s(){i.apply(this,arguments)}return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.SITE_READY,n.PAGE_RELOADED,n.PAGE_CHANGED,n.DID_LAYOUT,n.ACTIONS_REMOVED,n.ACTIONS_ADDED_LAYOUTED],ACTION_NAME:"load",ACTIONS_SUPPORTED:["load"],shouldEnable:e.constant(!0),runAction:function(){var t=e(this._currentActions).omit(e.keys(this._triggeredOnce)).keys().value();this.triggerActions(t)},handleActionTrigger:function(i){switch(i){case n.ACTIONS_REMOVED:this._triggeredOnce=e(this._triggeredOnce).omit(e.keys(arguments[1])).omit(e.keys(function(i){return e.pickBy(i,{sourceId:t.siteConstants.SITE_STRUCTURE_ID})}(this._currentActions))).value();break;case n.SITE_READY:case n.PAGE_RELOADED:case n.PAGE_CHANGED:case n.DID_LAYOUT:this.executeOnNextTick(this.runAction)}},resetActionState:e.noop}),s}.apply(t,n))||(e.exports=s)},885:function(e,t,i){var n,s;n=[i(0),i(1),i(14),i(181)],void 0===(s=function(e,t,i,n){"use strict";var s=t.triggerTypesConsts;function a(){n.apply(this,arguments),this._currentScroll={x:0,y:0},this._currentPopupScroll={x:0,y:0}}return a.prototype=e.create(n.prototype,{constructor:a,ACTION_TRIGGERS:[s.SCROLL,s.RESIZE,s.ACTIONS_ADDED_LAYOUTED,s.ACTIONS_REMOVED,s.DID_LAYOUT],ACTION_NAME:"screenIn",ACTIONS_SUPPORTED:["screenIn"],getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},isComponentInViewport:function(i,n){var s=this._aspectSiteAPI.getCurrentPopupId()===i.pageId?this._currentPopupScroll:this._currentScroll;return n=e.isNumber(n)?n:.15,t.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,i.sourceId)||t.viewportUtils.isInViewport(this._aspectSiteAPI,s,i.sourceId,n)||this.isChildOfFixedFooter(i.pageId,i.sourceId)||this.isPinnedElement(i.sourceId)||this.isChildOfPopover(i.sourceId,i.pageId)},isChildOfFixedFooter:function(e,t){var n=!1,s=i.measurerUtils.isFooterFixedPosition();if("masterPage"===e&&s){var a=this._aspectSiteAPI.getComponentById("SITE_FOOTER");n=this.isDescendantOf(a.props.structure,t)}return n},isChildOfPopover:function(e,t){return"wysiwyg.viewer.components.Popover"===this._aspectSiteAPI.getParentComponentType(e,t)},isPinnedElement:function(t){var i=this._aspectSiteAPI.getComponentById(t);if(i)return e.get(i,"props.structure.layout.fixedPosition")},isDescendantOf:function(t,i){return!!t.components&&e.some(t.components,function(e){return e.id===i||this.isDescendantOf(e,i)}.bind(this))},runScreenInActions:function(t){var i=e(t).omit(e.keys(this._triggeredOnce)).pickBy(this.isComponentInViewport).keys().value();this.triggerActions(i)},runAction:function(){var t=e.pickBy(this._currentActions,["name","screenIn"]);this.runScreenInActions(t)},handleActionTrigger:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("windowScrollEvent");switch(t===s.SCROLL?this._currentScroll=e.pick(i,["x","y"]):this._currentScroll=n.getScrollPosition()||this._currentScroll,this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll(),t){case s.ACTIONS_REMOVED:this._triggeredOnce=e.omit(this._triggeredOnce,e.keys(e.toArray(arguments)[1]));break;case s.DID_LAYOUT:case s.SCROLL:case s.RESIZE:case s.ACTIONS_ADDED_LAYOUTED:var a=1e3*Math.max(this._delayActionByTransitionDuration-.2,0);a>0?e.delay(function(){this._delayActionByTransitionDuration=0,this.executeOnNextTick(this.runAction)}.bind(this),a):this.executeOnNextTick(this.runAction)}},shouldEnable:function(){return"undefined"!=typeof window},resetActionState:e.noop}),a}.apply(t,n))||(e.exports=s)},886:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.triggerTypesConsts;function n(e,t){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=t,this._isEnabled=!1,this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null}return e.assign(n.prototype,{ACTION_TRIGGERS:[i.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled=!0},disableAction:function(){this._isEnabled=!1},isEnabled:function(){return this._isEnabled},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData),this._nextPageTransition={},this._nextPageBGTransition={},this._nextPageInitialScrollData=null},handleTrigger:function(t){this._isEnabled||e.isEmpty(this._nextPageTransition)||(this._nextPageTransition.duration=0,this._nextPageTransition.transitionName="NoTransition"),t===i.PAGE_CHANGED&&this.executeAction()},handleBehaviorsUpdate:function(e){this._behaviors=e},registerNextPageTransition:function(e,t,i,n,s,a,r,o){this._nextPageTransition={comp:e,previousRef:t,currentRef:i,transitionName:n,duration:s,delay:a,params:r,callbacks:o}},registerNextBGPageTransition:function(e,t,i,n){this._nextPageBGTransition={comp:e,previousRef:t,currentRef:i,callbacks:n}},registerNextAnchorScroll:function(e){this._nextPageInitialScrollData=e},hasNextAnchorScroll:function(){return null!==this._nextPageInitialScrollData},getNormalizedTransitionDuration:function(e,t){var i=e;return(t=t||{}).width?i=e*t.width/t.siteWidth:t.height&&(i=e*(Math.max(t.height,t.screenHeight)/t.screenHeight)),Math.min(i,1.2)},executeTransitions:function(i,n,s){var a=this._aspectSiteAPI,r="function"==typeof i.params?i.params():i.params,o=this.getNormalizedTransitionDuration(i.duration||0,r),c=void 0,u=void 0;if(!e.isEmpty(i)){c=i.comp.sequence(),(u=i.callbacks||{}).onStart&&c.onStartAll(u.onStart),u.onInterrupt&&c.onInterruptAll(u.onInterrupt),u.onComplete&&c.onCompleteAll(u.onComplete);var p={sourceRefs:i.previousRef,destRefs:i.currentRef};c.add(p,i.transitionName,o,i.delay,r).add([i.previousRef,i.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:!1}).execute()}e.isEmpty(n)||n.comp.transition(n.previousRef,n.currentRef,i.transitionName,o,i.delay,r,n.callbacks);var l=a.getSiteData(),d=t.scrollAnchors.calcAnchorScrollToPosition(s,a);s=d.anchorQuery,this.animations.animate("BaseScroll",a.getSiteContainer(),o,i.delay,{x:d.x||0,y:d.y||0,callbacks:{onComplete:function(){var e=this._aspectSiteAPI.getSiteAspect("anchorChangeEvent");e&&e.setSelectedAnchorAsync(l,s,l.getPrimaryPageId(),t.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL),this._aspectSiteAPI.notifyOnRendered()}.bind(this)}})}}),n}.apply(t,n))||(e.exports=s)},887:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.triggerTypesConsts;function n(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animations=this._siteData.animations,this._behaviors=[],this._isEnabled=!1,this._liveSequenceIds=[],this._animateOnNextTick=!1,this._pendingComponentExits=[]}return n.prototype=e.create(Object.prototype,{constructor:n,ACTION_TRIGGERS:[i.PAGE_CHANGED,i.PAGE_RELOADED],ACTION_NAME:"exit",shouldEnable:function(){var e="undefined"!=typeof window,t=this._siteData.isTabletDevice(),i=this._siteData.isMobileDevice(),n=this._siteData.isMobileView();return e&&!t&&!i&&!n},enableAction:function(){this._isEnabled||(this._tickerCallback=this._executeActionOnTick.bind(this),this.animations.addTickerEvent(this._tickerCallback),this._isEnabled=!0)},disableAction:function(){if(this._isEnabled){this._animateOnNextTick=!1,this.animations.removeTickerEvent(this._tickerCallback),this._tickerCallback=null,this.stopAndClearAnimations();var t=e.map(this._pendingComponentExits,"callback");this._pendingComponentExits=[],this._isEnabled=!1,e.forEach(t,function(e){e()})}},isEnabled:function(){return this._isEnabled},executeAction:function(){if(!e.isEmpty(this._pendingComponentExits)){var t=this._pendingComponentExits;this._pendingComponentExits=[],e.forEach(t,function(e){this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations(e.leavingCompIds,e.callback))}.bind(this))}},playPageAnimations:function(t,i){var n={},s={},a=[],r=e(this._behaviors).filter(function(i){return i.action===this.ACTION_NAME&&e.includes(t,i.sourceId)}.bind(this)).keyBy("sourceId").value();e.forEach(r,function(e){var t=this.getComponentParent(e.pageId);t.refs[e.sourceId]&&(s[e.pageId]||(s[e.pageId]=t.sequence(),n[e.pageId]=[]),n[e.pageId].push(this.addAnimationToSequence(e,s)))}.bind(this));var o=1;function c(){0===--o&&i()}return e.forEach(s,function(t,i){t.hasAnimations()&&(o++,t.onCompleteAll(c),t.onInterruptAll(c),n[i]=e.compact(n[i]),a.push({parentId:i,sequenceId:t.getId()}),t.execute())}),c(),a},getComponentParent:function(e){return this._aspectSiteAPI.getPageById(e)},addAnimationToSequence:function(e,t){var i=t[e.pageId];return i.add(e.targetId,e.name,e.duration,e.delay,e.params,0),i.add(e.targetId,"BaseClear",0,0,{props:"clip,opacity,transform",immediateRender:!1}),e.targetId},registerComponentsExit:function(e,t){this._isEnabled?(this._pendingComponentExits.push({leavingCompIds:e,callback:t}),this._animateOnNextTick=!0):t()},handleTrigger:function(){},handleBehaviorsUpdate:function(e){this._behaviors=e},_executeActionOnTick:function(){this._animateOnNextTick&&(this.executeAction(),this._animateOnNextTick=!1)},stopAndClearAnimations:function(){e.forEach(this._liveSequenceIds,function(e){var t=this.getComponentParent(e.parentId);t&&t.stopSequence(e.sequenceId,1)}.bind(this)),this._liveSequenceIds=[]}}),n}.apply(t,n))||(e.exports=s)},888:function(e,t,i){var n,s;n=[i(0),i(1),i(181)],void 0===(s=function(e,t,i){"use strict";var n=t.triggerTypesConsts;function s(){i.apply(this,arguments),this._componentsLastVisableState={},this._registeredActions={},this._isEnabled=!0,this._currentPageId=null}return s.prototype=e.create(i.prototype,{constructor:s,ACTION_TRIGGERS:[n.ACTIONS_ADDED_LAYOUTED,n.ACTIONS_REMOVED,n.DID_LAYOUT,n.PAGE_CHANGED],ACTION_NAME:"viewport",ACTIONS_SUPPORTED:["viewportEnter","viewportLeave"],shouldEnable:e.constant(!0),isComponentHiddenOrCollapsed:function(e){var t=this._siteData.measureMap||{},i=t.isHidden[e],n=t.collapsed[e];return i||n},triggerViewPortEventIfNeeded:function(t,i){var n=this._aspectSiteAPI.getSiteAspect("viewportChange").get(t);if(n&&n.in&&this._componentsLastVisableState[t]){var s=e.find(i,{name:"viewportLeave"});if(s)this._aspectSiteAPI.getSiteAspect("behaviorsAspect").handleAction(s)}},compVisibilityChange:function(t){if(!this._componentsLastVisableState[t]){var i=e(this._currentActions).filter({sourceId:t}).values().value();e.forEach(i,this.registerAction)}var n=e.values(this._registeredActions[t]);this.triggerViewPortEventIfNeeded(t,n),this._componentsLastVisableState[t]&&e.forEach(n,this.unRegisterAction)},checkIfCompVisibilityChanged:function(t){var i=void 0;e.isNil(this._componentsLastVisableState[t])||(i=this._componentsLastVisableState[t]),this._componentsLastVisableState[t]=this.isComponentHiddenOrCollapsed(t),e.isNil(i)||i===this._componentsLastVisableState[t]||this.compVisibilityChange(t,i,this._componentsLastVisableState[t])},registerAction:function(t){var i=t.sourceId,n=t.name,s=!0;(this._registeredActions[i]||(s=!1,this._registeredActions[i]={}),this._registeredActions[i][n])||(this._registeredActions[i][n]=t,s||this._aspectSiteAPI.getSiteAspect("viewportChange").register(i,function(t){var n=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");if(t.in){var s=e.get(this._registeredActions[i],"viewportEnter");s&&n.handleAction(s)}if(t.out){var a=e.get(this._registeredActions[i],"viewportLeave");a&&n.handleAction(a)}}.bind(this),["in","out"]))},unRegisterAction:function(t){var i=t.sourceId,n=t.name;(e.isEmpty(this._registeredActions[i])||delete this._registeredActions[i][n],e.isEmpty(this._registeredActions[i]))&&(delete this._registeredActions[i],this._aspectSiteAPI.getSiteAspect("viewportChange").unregister(i))},handleActionTrigger:function(t){var i=e(this._currentActions).map("sourceId").uniq().value();switch(t){case n.DID_LAYOUT:e.forEach(i,this.checkIfCompVisibilityChanged);break;case n.PAGE_CHANGED:var s=this._siteData.getFocusedRootId();s!==this._currentPageId&&(this._currentPageId=s,this.resetActionState());break;case n.ACTIONS_ADDED_LAYOUTED:e.forEach(i,this.checkIfCompVisibilityChanged),e.forEach(this._currentActions,function(e){this._componentsLastVisableState[e.sourceId]||this.registerAction(e)}.bind(this))}},resetActionState:function(){e.forEach(this._componentsLastVisableState,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._componentsLastVisableState[t]}.bind(this)),e.forEach(this._registeredActions,function(e,t){this._aspectSiteAPI.getComponentByPageAndCompId("masterPage",t)||delete this._registeredActions[t]}.bind(this))}}),s}.apply(t,n))||(e.exports=s)},889:function(e,t,i){var n,s;n=[i(0),i(12)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this.animationsPackage=this._siteData.animations,this._liveSequenceIdsByGroup={}}function n(t){for(var i=t.targetId||t.sourceId;e.isArray(i);)i=i[0];return this._aspectSiteAPI.getRootOfComponentId(i)||t.pageId}function s(i,s){e.forEach(i,function(e){var i=this.animationsPackage.getProperties(e.name),a=!e.viewMode||e.viewMode===this._siteData.getViewMode();if(i&&i.hideOnStart&&a){var r=n.call(this,e),o=this._aspectSiteAPI.getComponentByPageAndCompId(r,e.targetId||e.sourceId),c=o?t.findDOMNode(o):null;c&&(c.style.opacity=s)}}.bind(this))}return i.prototype.previewAnimation=function(e,t,i,n){var s=void 0,a=void 0,r=this._aspectSiteAPI.getPageById(t);if(r)return a={props:"clip,opacity,transform,transform-origin",immediateRender:!1},(s=r.sequence()).add(e,i.name,i.duration,i.delay,i.params),s.add(e,"BaseClear",0,0,a),n&&s.onCompleteAll(n),s.execute()},i.prototype.addAnimationToSequence=function(t,i,s){var a=i[n.call(this,t)],r=t.targetId,o=t.name,c=t.params,u=c.duration,p=c.delay,l=e.omit(t.params,["duration","delay"]);if(a.add(r,o,u,p,l,0),s){a.add(r,"BaseClear",0,0,{props:"clip,opacity,transform",immediateRender:!1})}return t.targetId},i.prototype.playAnimations=function(t,i,s,a){var r={},o={},c=[];e.forEach(i,function(t){var i=n.call(this,t),a=this._aspectSiteAPI.getPageComponents(i);if(a){var c=t.targetId||t.sourceId;if(!e.isString(c)||a[c]){if(!o[i]){var u=this._aspectSiteAPI.getPageById(i);o[i]=u.sequence(),r[i]=[]}this.addAnimationToSequence(t,o,s),r[i].push(c)}}}.bind(this));var u=1,p=function(i){u--,this._liveSequenceIdsByGroup[t]=e.reject(this._liveSequenceIdsByGroup[t],{sequenceId:i}),0===u&&a()}.bind(this);return e.forEach(o,function(t,i){t.hasAnimations()&&(u++,t.onCompleteAll(p.bind(this,t.getId())),r[i]=e.compact(r[i]),c.push({parentId:i,sequenceId:t.getId()}),t.execute())}.bind(this)),p(),this._liveSequenceIdsByGroup[t]=this._liveSequenceIdsByGroup[t].concat(c),r},i.prototype.hideElementsByAnimationType=function(e){s.call(this,e,0)},i.prototype.revertHideElementsByAnimations=function(e){s.call(this,e,"")},i.prototype.previewTransition=function(e,t,i,n,s){var a=void 0;if(a="masterPage"===i?this._aspectSiteAPI.getMasterPage():this._aspectSiteAPI.getCurrentPage()){var r=a.sequence();return r.add({sourceRefs:e,destRefs:t},n.name,n.duration,n.delay,n.params),r.add(e.concat(t),"BaseClear",0,0,{props:"clip,opacity,transform,transform-origin",immediateRender:!1}),s&&r.onCompleteAll(s),r.execute()}},i.prototype.stopPreviewAnimation=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._aspectSiteAPI.getAllRenderedRoots();e.forEach(n,function(e){e.stopSequence(t,i)})},i.prototype.stopAndClearAllAnimations=function(){e(this._liveSequenceIdsByGroup).keys().forEach(this.stopAndClearAnimations.bind(this))},i.prototype.stopAndClearAnimations=function(t,i){e.forEach(this._liveSequenceIdsByGroup[t],function(e){var t=this._aspectSiteAPI.getPageById(e.parentId);t&&t.stopSequence(e.sequenceId,i)}.bind(this)),this._liveSequenceIdsByGroup[t]=[]},i.prototype.isAnimationPlayable=function(e){return n.call(this,e)},i}.apply(t,n))||(e.exports=s)},890:function(e,t,i){var n,s;n=[i(0),i(891)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredHandlers={},this.registerHandler("designDataChangeBgBehaviorsHandler",t.handle)}return i.prototype={registerHandler:function(e,t){this._registeredHandlers[e]=t},unregisterHandler:function(t){this._registeredHandlers=e.omit(this._registeredHandlers,t)},notify:function(e,t,i){this.propagate(e,t,i)},propagate:function(t,i,n){e.forEach(this._registeredHandlers,function(e){e(this._aspectSiteAPI,t,i,n)}.bind(this))}},i}.apply(t,n))||(e.exports=s)},891:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i=t.balataConsts,n={FadeIn:{type:"animation",defaults:{params:{}}},FadeOut:{type:"animation",defaults:{params:{}}},Scale:{type:"animation",defaults:{params:{scale:1}}}};function s(s,a,r,o){var c=s.getSiteAspect("behaviorsAspect");e.forEach(o,function(s){var o=e.get(r,["background",i[s.part]],{}),u=e.get(n,[s.name,"defaults","params"]);c.handleBehavior(function(i,n,s,a){var r={name:n.name,type:n.type,targetId:[[i,t.balataConsts.BALATA,n.part]],params:e.clone(n.params)||{}};return e.isEmpty(s)||e.assign(r.params,s,e.pick(a,e.keys(s))),r}(a,s,u,o),{group:a})})}function a(t,a,r,o){var c=function(e,t){return e.getComponentById(t).refs.balata}(t,a),u=r||{},p=function(t,i,n){var s=[];e.forEach(e.filter(t.dataChangeBehaviors,{trigger:"out"}),function(e){s.push(e)}),e.forEach(e.filter(i.dataChangeBehaviors,{trigger:"in"}),function(t){e.find(s,e.pick(t,["type","part","name"]))||s.push(t)});var a={callbacks:{onComplete:function(){n.setState({transforms:{}})}}};return e.map(s,function(t){var i=e.defaults({},a,t.params);return e.defaults({params:i},t)})}(r,o,c);!function(e,t){e.getSiteAspect("animationsAspect").stopAndClearAnimations(t)}(t,a),s(t,a,o,p),c.setState({transforms:function(t,s){var a=e(s).map("part").uniq().value(),r=e.transform(s,function(t,i){var s=e.get(n,[i.name,"defaults","params"]);t[i.part]=e.assign({},t[i.part],s)},{});return e.transform(a,function(n,s){var a=e.get(t,["background",i[s]]);n[s]=e.merge({},r[s],e.pick(a,e.keys(r[s])))},{})}(u,p)})}return Object.freeze(n),{handle:function(t,i,n,s){e.isEmpty(e.get(n,"dataChangeBehaviors"))&&e.isEmpty(e.get(s,"dataChangeBehaviors"))||e.get(s,"background.mediaRef.type")!==e.get(n,"background.mediaRef.type")||a(t,i,n,s)}}}.apply(t,n))||(e.exports=s)},892:function(e,t,i){var n,s;n=[i(25),i(0)],void 0===(s=function(e,t){"use strict";function i(e){this.aspectSiteApi=e,this.storedHeight=0,e.registerToDidLayout(function(){var e=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap,i=t.get(e,"height.masterPage",0);if(i&&i!==this.storedHeight){this.storedHeight=i;var n=void 0;window.parent.postMessage?n=window.parent:window.parent.document.postMessage&&(n=window.parent.document),n&&void 0!==n&&n.postMessage(i,"*")}}.bind(this))}return e.registerSiteAspect("parentFrame",i),i}.apply(t,n))||(e.exports=s)},893:function(e,t,i){var n,s;n=[i(0),i(400),i(25)],void 0===(s=function(e,t,i){"use strict";function n(t){var i={};if(t){var n=t.split(" ");return e.forEach(n,function(e){var t=e.split(":");t[0]&&t[1]&&(i[t[0]]=t[1])}),e.isEmpty(i)?t:i}}function s(){}s.prototype={getComponentsToRender:function(i){var s=i.getSiteData(),a=function(i){var s=i.getExistingRootNavigationInfo(i.getFocusedRootId()),a=i.getDataByQuery(s.pageItemId);if(!a)return null;var r=n(s.pageItemAdditionalData),o=e.get(r,"propertyQuery"),c=t.getCompStructure(a.type,a,o,i);return c||null}(s);return a?[{structure:a,pageId:s.getFocusedRootId(),props:function(t){var i={},s=t.getFocusedRootId(),a=n(t.getExistingRootNavigationInfo(s).pageItemAdditionalData);if(e.isPlainObject(a)){var r=t.getDataByQuery(a.galleryId)||a.galleryId;r&&(i.pageItemAdditionalData=r),a.galleryCompId&&(i.galleryCompId=a.galleryCompId)}else i.pageItemAdditionalData=a;return i}(s)}]:null}},i.registerSiteAspect("pageItem",s)}.apply(t,n))||(e.exports=s)},894:function(e,t,i){var n,s;n=[i(0),i(400),i(25)],void 0===(s=function(e,t,i){"use strict";function n(t){this._aspectSiteAPI=t,e.bindAll(this,["zoom","unzoom"])}return n.prototype={zoom:function(e,t){if(!e||"Image"!==e.type||!t)throw new Error("nonPageItemZoom should be used only with (imageData, galleryData)");this._aspectSiteAPI.setAspectGlobalData("nonPageItemZoom",{image:e,galleryData:t})},unzoom:function(){this._aspectSiteAPI.removeAspectGlobalData("nonPageItemZoom")},getComponentsToRender:function(e){var i=e.getAspectGlobalData("nonPageItemZoom");if(i){var n=e.getSiteData(),s=t.getCompStructure("Image",i.image,null,n);return s.compData=i.image,delete s.dataQuery,[{structure:s,props:{key:s.key,compData:i.image,closeFunction:this.unzoom,pageItemAdditionalData:i.galleryData}}]}return null}},i.registerSiteAspect("nonPageItemZoom",n),n}.apply(t,n))||(e.exports=s)},895:function(e,t,i){var n,s;n=[i(0),i(25),i(896)],void 0===(s=function(e,t,i){"use strict";var n="externalScriptLoader";function s(e){this.siteAPI=e}return s.prototype={loadScript:function(t,s,a){var r=e.get(this.siteAPI.getAspectGlobalData(n),t),o=!r;if(o){var c=i.getScriptDescription(t,a);if(!c)return;r={script:c,callbacks:[]}}s&&r.callbacks.push({callback:s,context:a}),o&&e.isFunction(r.script.actionBefore)&&r.script.actionBefore(),(s||o)&&this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,r]])),o&&this.siteAPI.forceUpdate()},unsubscribe:function(t,i){var s=e.get(this.siteAPI.getAspectGlobalData(n),t);s&&(e.pull(s.callbacks,i),this.siteAPI.updateAspectGlobalData(n,e.fromPairs([[t,s]])))}},t.registerSiteAspect(n,s),s}.apply(t,n))||(e.exports=s)},896:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i="v2.4",n="304553036307597",s=e.template("//connect.facebook.net/<%= lang %>/sdk.js#xfbml=1&appId=<%= appId %>&version=<%= sdkVersion %>");return{getScriptDescription:function(e,a){return"FACEBOOK"===e?{NAME:"FacebookSDK",SRC:s({lang:function(e){var i={en:"en_US",es:"es_ES",pt:"pt_BR",ru:"ru_RU",fr:"fr_FR",de:"de_DE",ja:"ja_JP",ko:"ko_KR",it:"it_IT",pl:"pl_PL",tr:"tr_TR",nl:"nl_NL",sv:"sv_SE",da:"da_DK",no:"nn_NO"};return i[t.wixUserApi.getLanguage(e.cookie,e.currentUrl,e.userLanguage)]||i.en}(a),sdkVersion:i,appId:n})}:"GOOGLE"===e?{NAME:"GoogleApi",SRC:"//apis.google.com/js/plusone.js",actionBefore:function(){window.___gcfg={lang:t.wixUserApi.getLanguage(a.cookie,a.currentUrl,a.userLanguage)}}}:void 0}}}.apply(t,n))||(e.exports=s)},897:function(e,t,i){var n,s;n=[i(0),i(25),i(1)],void 0===(s=function(e,t,i){"use strict";var n=i.stringUtils,s=["focus","blur"],a=function(e){this._aspectSiteAPI=e,this._registerToFocusEvents()};a.prototype={_registerToFocusEvents:function(){this._compsRegistry={},e.forEach(s,function(e){this._compsRegistry[e]={},this._aspectSiteAPI.registerToFocusEvents(e,this.propagateFocusEvent.bind(this,e))}.bind(this))},registerToFocusEvent:function(e,t){this._compsRegistry[e][t.props.id]=t.props.id},unregisterFromFocusEvent:function(e,t){delete this._compsRegistry[e][t.props.id]},propagateFocusEvent:function(t){var i=this._compsRegistry[t],s="on"+n.capitalize(t),a=void 0;e.forEach(i,function(e){(a=this._aspectSiteAPI.getComponentById(e))?a[s]&&a[s]():delete this._compsRegistry[t][e]}.bind(this))}},t.registerSiteAspect("windowFocusEvents",a)}.apply(t,n))||(e.exports=s)},898:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(t,i){e.forEach(i,function(i){!function(t,i){e.forEach(i,function(i){var n=e.findLast(i.scrollModes,function(e){return e.settings.scrollPos<=t});n&&i.debouncedActivateModeById(n.modeId)})}(t,i)})}function n(e){var t=this;this._aspectSiteAPI=e,this._registeredCompIds={},this.invokeOnce=[],this._registeredScrollModes={},this._prevScrollPosition={x:0,y:0},this._prevScrollDirection="",this._aspectSiteAPI.getSiteData().isInSSR()?this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",{x:0,y:0}):this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",this._aspectSiteAPI.getSiteScroll()),this._aspectSiteAPI.registerToSiteReady(function(){t._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t._aspectSiteAPI.getSiteScroll()),e.registerToScroll(t.propagateScrollEvent.bind(t)),t._aspectSiteAPI.isExperimentOpen("scrollModes")&&e.registerToRenderedRootsChange(t.cleanNonRenderedScrollModes.bind(t))})}n.prototype={scrollSiteTo:function(e,t,i){if(i){if(!function(e){var t=this._aspectSiteAPI.getSiteData(),i=t.getScreenSize(),n=t.measureMap.height.masterPage;if(!(n>i.height))return!1;var s=this.getScrollPosition().y,a=s+i.height;return e>s&&n>a||e<s&&s>0}.call(this,t))return void i();this.invokeOnce.push(i)}this._aspectSiteAPI.scrollSiteTo(e,t)},registerToScroll:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToScroll:function(e){delete this._registeredCompIds[e.props.id]},propagateScrollEvent:function(t){var n=this;this._aspectSiteAPI.updateAspectGlobalData("windowScrollEvent",t);var s=this.getScrollDirection(t);this._aspectSiteAPI.isExperimentOpen("scrollModes")&&i(t.y,this._registeredScrollModes),this._prevScrollPosition=t,this._prevScrollDirection=s,e.forEach(this._registeredCompIds,function(e){var i=n._aspectSiteAPI.getComponentById(e);i?i.onScroll&&i.onScroll(t,s):delete n._registeredCompIds[e]}),e.forEach(this.invokeOnce,function(e){e(t,s)}),this.invokeOnce=[]},getScrollDirection:function(e){return e.y!==this._prevScrollPosition.y?e.y>this._prevScrollPosition.y?"DOWN":"UP":e.x!==this._prevScrollPosition.x?e.x>this._prevScrollPosition.x?"RIGHT":"LEFT":this._prevScrollDirection},getScrollPosition:function(){return this._aspectSiteAPI.getAspectGlobalData("windowScrollEvent")},registerCompScrollModes:function(t,i,n){this._registeredScrollModes[i]=this._registeredScrollModes[i]||{};var s=e.findKey(this._registeredScrollModes,t);s&&s!==i&&delete this._registeredScrollModes[s][t];var a=this._aspectSiteAPI;this._registeredScrollModes[i][t]={scrollModes:e.sortBy(n,"settings.scrollPos"),debouncedActivateModeById:function(e,t,i){var n=void 0,s=void 0;return function(a){a!==s&&(s=a,clearTimeout(n),n=setTimeout(function(){e.activateModeById(t,i,s)},50))}}(a,t,i)}},clearCompScrollModes:function(t){var i=e.findKey(this._registeredScrollModes,t);i&&delete this._registeredScrollModes[i][t]},cleanNonRenderedScrollModes:function(t,i){this._aspectSiteAPI.isExperimentOpen("scrollModes")&&(this._registeredScrollModes=e.omit(this._registeredScrollModes,i))}},t.registerSiteAspect("windowScrollEvent",n)}.apply(t,n))||(e.exports=s)},899:function(e,t,i){var n,s;n=[i(0),i(11),i(25)],void 0===(s=function(e,t,i){"use strict";function n(e){this._aspectSiteAPI=e,this._registeredCompIds={},this._registeredCompIdsOrientation={},this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this)),this._aspectSiteAPI.registerToOrientationChange(this.propagateOrientationEvent.bind(this))}n.prototype={registerToResize:function(e){this._registeredCompIds[e.props.id]=e.props.id},unregisterToResize:function(e){delete this._registeredCompIds[e.props.id]},registerToOrientationChange:function(e){this._registeredCompIdsOrientation[e.props.id]=e.props.id},unregisterToOrientationChange:function(e){delete this._registeredCompIdsOrientation[e.props.id]},propagateResizeEvent:function(){var i=null;e.forEach(this._registeredCompIds,function(e){var n=this._aspectSiteAPI.getComponentById(e);if(n){if(n.onResize){if(!i){var s=t(window.document.body);i={height:s.height(),width:s.width()}}n.onResize(i)}}else delete this._registeredCompIds[e]}.bind(this))},propagateOrientationEvent:function(){e.forEach(this._registeredCompIdsOrientation,function(e){var t=this._aspectSiteAPI.getComponentById(e);t?t.onOrientationChange&&t.onOrientationChange():delete this._registeredCompIdsOrientation[e]}.bind(this))}},i.registerSiteAspect("windowResizeEvent",n)}.apply(t,n))||(e.exports=s)},900:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";var i=function(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToDocumentClick(this.propagateDocumentClickEvent.bind(this)),this._registeredCompIds=[]};i.prototype={registerToDocumentClickEvent:function(t){this._registeredCompIds=e.union(this._registeredCompIds,[t])},unRegisterToDocumentClickEvent:function(t){e.pull(this._registeredCompIds,t)},propagateDocumentClickEvent:function(t){e.forEach(this._registeredCompIds,function(e){var i=this._aspectSiteAPI.getComponentById(e);i&&i.onDocumentClick&&i.onDocumentClick(t)}.bind(this))}},t.registerSiteAspect("windowClickEventAspect",i)}.apply(t,n))||(e.exports=s)},901:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";var i={39:"ArrowRight",37:"ArrowLeft",27:"Escape",13:"Enter",32:"Space"};function n(e){this._aspectSiteAPI=e,this._aspectSiteAPI.registerToKeyDown(this.propagateKeyDownSpecificKeyEvent.bind(this)),this._aspectSiteAPI.registerToKeyUp(this.propagateKeyboardEvent.bind(this,"KeyUp")),this._registeredCompIds={specificKeysKeyDown:{Escape:[],ArrowRight:[],ArrowLeft:[]},KeyDown:[],KeyUp:[]}}n.prototype={registerToKeyDownWithFocus:function(e,t){t.addEventListener("focus",function(){this.registerToKeyDown(e)}.bind(this)),t.addEventListener("blur",function(){this.unRegisterKeyDown(e)}.bind(this))},registerToEscapeKey:function(e){this._registeredCompIds.specificKeysKeyDown.Escape.push(e.props.id)},registerToArrowRightKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowRight.push(e.props.id)},registerToArrowLeftKey:function(e){this._registeredCompIds.specificKeysKeyDown.ArrowLeft.push(e.props.id)},unRegisterKeys:function(t){e.forEach(this._registeredCompIds.specificKeysKeyDown,function(i,n){this._registeredCompIds.specificKeysKeyDown[n]=e.without(this._registeredCompIds.specificKeysKeyDown[n],t.props.id)}.bind(this))},registerToKeyDown:function(e){this._registeredCompIds.KeyDown.push(e.props.id)},unRegisterKeyDown:function(t){this._registeredCompIds.KeyDown=e.without(this._registeredCompIds.KeyDown,t.props.id)},registerToKeyUp:function(e){this._registeredCompIds.KeyUp.push(e.props.id)},unRegisterKeyUp:function(t){this._registeredCompIds.KeyUp=e.without(this._registeredCompIds.KeyUp,t.props.id)},unRegisterAll:function(e){this.unRegisterKeys(e),this.unRegisterKeyDown(e),this.unRegisterKeyUp(e)},propagateKeyDownSpecificKeyEvent:function(t){this.propagateKeyboardEvent("KeyDown",t);var n=i[t.keyCode||t.which];if(!e.isEmpty(this._registeredCompIds.specificKeysKeyDown[n])){var s=e.last(this._registeredCompIds.specificKeysKeyDown[n]),a=this._aspectSiteAPI.getComponentById(s),r="on"+n+"Key";a?a[r]&&(t.preventDefault(),a[r]()):this._registeredCompIds.specificKeysKeyDown[n]=e.without(this._registeredCompIds.specificKeysKeyDown[n],s)}},propagateKeyboardEvent:function(t,n){!e.isEmpty(this._registeredCompIds[t])&&function(e){return Boolean(i[e.keyCode||e.which])}(n)&&e.forEach(this._registeredCompIds[t],function(i){var s=this._aspectSiteAPI.getComponentById(i),a="on"+t;s?s[a]&&(n.preventDefault(),s[a](n)):this._registeredCompIds[t]=e.without(this._registeredCompIds[t],i)}.bind(this))}},t.registerSiteAspect("windowKeyboardEvent",n)}.apply(t,n))||(e.exports=s)},902:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,e.bindAll(this,e.functionsIn(this))}return i.prototype={getComponentsToRender:function(t){var i=t.getAspectGlobalData("addComponent");return e.values(i)},addComponent:function(e,t,i){var n={};n[e]={structure:t,props:i},this._aspectSiteAPI.updateAspectGlobalData("addComponent",n),this._aspectSiteAPI.forceUpdate()},deleteComponent:function(e){var t=this._aspectSiteAPI.getAspectGlobalData("addComponent");delete t[e],this._aspectSiteAPI.setAspectGlobalData("addComponent",t),this._aspectSiteAPI.forceUpdate()}},t.registerSiteAspect("addComponent",i),i}.apply(t,n))||(e.exports=s)},903:function(e,t,i){var n,s;n=[i(0),i(4),i(25)],void 0===(s=function(e,t,i){"use strict";var n="QuickActionBarAspect",s=e.map(t.constants.SUPPORTED_DYNAMIC_ACTIONS,"appId");function a(t,i){var n=e.find(t,{appId:i.appId});n?e.merge(n,i):t.push(i)}function r(t){this.aspectSiteApi=t,this.aspectSiteApi.updateAspectGlobalData(n,{dynamicActions:[]}),e.bindAll(this,e.functionsIn(this))}Object.freeze(s),r.prototype={updateDynamicActions:function(t){!function(t){var i=e(t).map("appId").difference(s).value();if(e.some(i))throw new Error('failed to add unsupported dynamic actions with app ids: "'+i+'"')}(t=[].concat(t));var i=this.aspectSiteApi.getAspectGlobalData(n).dynamicActions;!function(t,i){e.forEach(i,e.partial(a,t,e))}(i,t),this.aspectSiteApi.updateAspectGlobalData(n,{dynamicActions:i}),this.aspectSiteApi.forceUpdate()}},i.registerSiteAspect(n,r)}.apply(t,n))||(e.exports=s)},904:function(e,t,i){var n,s;n=[i(0),i(180),i(258)],void 0===(s=function(e,t,i){"use strict";var n=["sourceId","type","name"],s=["behaviors","registeredActionsByTypeSource"];function a(t){return e.at(t,n).join(",")}function r(e){return e.type+":"+e.sourceId}function o(t,i,n,s){var a=e(t).map(n).keyBy(s).value(),r=e.keys(a),o=e.keys(i),c=e.intersection(r,o);return{map:a,added:e.difference(r,c),removed:e.difference(o,c)}}function c(t,i,n){var s=e(t).pick(i).map(function(t,i){return!0===n?t:e.pick(t,n[i])}).values().value();return e.assign.apply(e,[{}].concat(s))}function u(n,s,a){var r=this._aspectSiteAPI.getSiteAPI(),o=r.getAllRenderedRootIds(),c=e.map(n,function(i){var n=function(t,i,n){return e(i).chain().pick(t).map(function(t){return e.flatten(e.values(t))}).find(function(t){return e(t).map("behavior").some(n)}).find(function(t){return e.isEqual(t.behavior,n)}).get("action").value()}(o,this._rawBehaviorsForActions,i);return t.getBehaviorPreprocessor(a)(i,n,r)}.bind(this));i.handleBehaviors(r,c,s,a)}function p(t){return e(t).map("action").groupBy(r).value()}function l(i,n){var s=t.getHandler(e.get(n,"behavior.type","animation"));return e.isUndefined(s.isEnabled)||s.isEnabled(n.behavior,i.getSiteAPI())}function d(t,i,n){var s=t.getSiteAspect("actionsAspect");return e(i).reject(function(e){return s.isActionDisabled(e.action.name)}).filter(function(e){return l(t,e)}).map(function(t){return e.defaultsDeep(t,{behavior:{type:"animation",pageId:n},action:{pageId:n}})}).value()}function g(t){this._aspectSiteAPI=t,this._registeredActions={},this._registeredBehaviors={},this._ranOnce={},this._rawBehaviorsForActions={},this._behaviorsAdded={},this._behaviorsRemoved={},this._actionsAdded={},this._actionsRemoved={},this._actionsToBehaviorsMap={},this._behaviorsToActionsMap={},this._triggeredBehaviors=[],this._behaviorsToExecute={},this._behaviorsToExecuteListeners={},e.set(t.getSiteData(),s,{}),e.bindAll(this,["handleActions","handleAction","setBehaviorsForActions","getActions","getCompActions","convertBehaviors","_handleDidLayout","_handleRootsChanged","_handleRootsAddedDidLayout","resetBehaviorsRegistration","_registerPendingBehaviors","registerBehavior","handleBehavior","isBehaviorEnabled"]),this._aspectSiteAPI.registerToDidLayout(this._handleDidLayout),this._aspectSiteAPI.registerToAddedRenderedRootsDidLayout(this._handleRootsAddedDidLayout),this._aspectSiteAPI.registerToRenderedRootsChange(this._handleRootsChanged),this.applySsrChanges=this._registerPendingBehaviors.bind(this)}return g.prototype={handleActions:function(t,n){e.forEach(this._actionsToBehaviorsMap,function(s,r){e(s).pick(e.map(t,a)).values().flatten().map(e.get.bind(e,this._registeredBehaviors[r])).groupBy("type").forEach(function(s,a){this._triggeredBehaviors=this._triggeredBehaviors.concat(s),s=function(t,n){return e.filter(t,function(e){var t=i.behaviorUniqueIdentifier(e);return!(e.playOnce&&n[t]||(n[t]=!0,0))})}(s,this._ranOnce),n=e.defaults({},n,{action:"action"}),t=t||[{name:"action"}],n.action=t[0].name,u.call(this,s,n,a)}.bind(this))}.bind(this))},handleAction:function(e,t){this.handleActions([e],t)},setBehaviorsForActions:function(t,i,n){var a=d(this._aspectSiteAPI,t,i);e.set(this._aspectSiteAPI.getSiteData(),s.concat([i,n]),p(t)),e.set(this._rawBehaviorsForActions,[i,n],a)},getActions:function(t,i){var n=e.get(this._aspectSiteAPI.getSiteData(),s,{});return e(n).map(i).flatMap(t+":"+i).compact().uniq().mapKeys(function(e){return e.name}).value()},getCompActions:function(t,i,n,s){var a=p(d(this._aspectSiteAPI,s,n));return e(e.get(a,[t+":"+i])).compact().uniq().mapKeys(function(e){return e.name}).value()},convertBehaviors:function(t,i){return e.map(t,function(t){if(t.behavior&&t.action)return t;var n={name:t.action,sourceId:t.sourceId||i,type:"comp"},s=e.omit(t,["action","sourceId","pageId","duration","delay","params"]);return s.targetId=s.targetId||i,s.params=e.assign(e.cloneDeep(t.params),e.pick(t,["duration","delay"])),{action:n,behavior:s}})},_handleDidLayout:function(){var n=this._aspectSiteAPI.getAllRenderedRootIds();e.forEach(n,function(n){var s=e.flatten(e.values(this._rawBehaviorsForActions[n])),r=e.get(this._aspectSiteAPI.getSiteData(),"measureMap.top",{});s=e.filter(s,function(t){var i=t.action.sourceId,n=t.action.type,s=t.behavior.type,a=t.behavior.targetId,o="comp"!==n||e.isNumber(r[i]),c="widget"===s||"site"===s||e.isNumber(r[a]);return o&&c}),function(n,s){var r=o(n,this._registeredBehaviors[s]||{},"behavior",i.behaviorUniqueIdentifier);this._behaviorsAdded[s]=r.added.concat(this._behaviorsAdded[s]||[]),this._behaviorsRemoved[s]=r.removed.concat(this._behaviorsRemoved[s]||[]),e(this._registeredBehaviors[s]).pick(r.removed).forEach(function(i){var n=t.getHandler(i.type),s=e.find(this._triggeredBehaviors,function(t){return e.isEqual(t,i)}),a=!!s;e.has(n,"cancelPreCondition")&&!a&&n.cancelPreCondition(i,this._aspectSiteAPI),e.has(n,"cancel")&&n.cancel(i,this._aspectSiteAPI),this._triggeredBehaviors=e.without(this._triggeredBehaviors,s)}.bind(this)),this._registeredBehaviors[s]=r.map;var c=o(n,this._registeredActions[s]||{},"action",a);this._actionsRemoved[s]=this._actionsRemoved[s]||{},e.assign(this._actionsRemoved[s],e.pick(this._registeredActions[s],c.removed)),this._registeredActions[s]=c.map,this._actionsAdded[s]=c.added.concat(this._actionsAdded[s]||[]),this._actionsToBehaviorsMap[s]=e(n).groupBy(function(e){return a(e.action)}).mapValues(function(t){return e(t).map("behavior").map(i.behaviorUniqueIdentifier).value()}).value(),this._behaviorsToActionsMap[s]=e(n).groupBy(function(e){return i.behaviorUniqueIdentifier(e.behavior)}).mapValues(function(t){return e(t).map("action").map(a).value()}).value()}.call(this,s,n)}.bind(this));var s=c(this._registeredActions,n,this._actionsAdded),r=e(this._actionsRemoved).pick(n).values().reduce(e.assign,{}),u=e(this._registeredActions).pick(n).values().reduce(e.assign,{}),p=c(this._registeredBehaviors,n,this._behaviorsAdded);e.forEach(p,function(i,s){var a=e(this._behaviorsToActionsMap).pick(n).values().map(s).compact().flatten().map(e.get.bind(e,u)).every(function(e){return this._aspectSiteAPI.getSiteAspect("actionsAspect").needToRunPreConditions(e)}.bind(this));if((!i.playOnce||!this._ranOnce[s])&&a){var r=t.getHandler(i.type);e.has(r,"handlePreCondition")&&r.handlePreCondition(i,this._aspectSiteAPI)}}.bind(this)),e.forEach(n,function(e){this._actionsAdded[e]=[],this._actionsRemoved[e]={},this._behaviorsAdded[e]=[],this._behaviorsRemoved[e]=[]}.bind(this)),e.isEmpty(r)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(r),e.isEmpty(s)||this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsAddedLayouted(s)},_handleRootsChanged:function(t,i){var n=c(this._registeredActions,i,!0);e.forEach(i,function(t){this._rawBehaviorsForActions[t]=[],this._registeredActions[t]={},this._registeredBehaviors[t]={},this._behaviorsAdded[t]=[],this._behaviorsRemoved[t]=[],this._actionsAdded[t]=[],this._actionsRemoved[t]={},this._actionsToBehaviorsMap[t]={},this._behaviorsToActionsMap[t]={},e.set(this._aspectSiteAPI.getSiteData(),s.concat(t),{})}.bind(this)),this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(n)},_handleRootsAddedDidLayout:function(){},resetBehaviorsRegistration:function(){this._ranOnce={}},_registerPendingBehaviors:function(){e.forEach(this._aspectSiteAPI.getSiteData().ssr.pendingBehaviours,function(e){this.registerBehavior(e,e.callback,!0)}.bind(this))},registerBehavior:function(t,i,n){var s=e.toArray(this._behaviorsToExecute[t.targetId]).concat({name:t.name,params:t.params,callback:i});n&&e.get(t,"params.requiresDom.requiresFullRender")&&function(t,i){e.remove(t,["name",i])}(s,t.name),this._behaviorsToExecuteListeners[t.targetId]?this._behaviorsToExecuteListeners[t.targetId](s):this._behaviorsToExecute[t.targetId]=s},trackBehaviorsToExecute:function(e,t){var i=this;return this._behaviorsToExecuteListeners[e]=t,this._behaviorsToExecute[e]&&(t(this._behaviorsToExecute[e]),delete this._behaviorsToExecute[e]),function(){i._behaviorsToExecuteListeners[e]===t&&(delete i._behaviorsToExecuteListeners[e],delete i._behaviorsToExecute[e])}},handleBehavior:function(e,t){u.call(this,[e],t,e.type)},handleProcessedBehavior:function(e,t){var n=this._aspectSiteAPI.getSiteAPI();i.handleBehaviors(n,[e],t,e.type)},isBehaviorEnabled:function(t){var i=this.convertBehaviors([t]);return l(this._aspectSiteAPI,e.head(i))}},g}.apply(t,n))||(e.exports=s)},905:function(e,t,i){var n,s,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();n=[i(0),i(25),i(1)],void 0===(s=function(e,t,i){"use strict";function n(t,n){var s=t.replace(/\/$/,"")+"/_api/dynamicmodel",a=e.isEmpty(n)?"":"?"+i.urlUtils.toQueryString(n);return"undefined"!=typeof window&&(s=s.replace(/^[^:]+:/,window.location.protocol)),s+a}var s=!0;var r=function(){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.reloadSpecMapPlugin=[],this.instanceChangedRegisteredComps={},this._aspectSiteAPI=i,this.aspectState=function(t){return{read:function(i){var n=t.getAspectGlobalData("dynamicClientSpecMap");return i?e.get(n,i):n},update:function(e){t.updateAspectGlobalData("dynamicClientSpecMap",e)},delete:function(i){var n=e.set(t.getAspectGlobalData("dynamicClientSpecMap"),i,void 0);t.updateAspectGlobalData("dynamicClientSpecMap",n)}}}(i)}return a(t,[{key:"reloadClientSpecMap",value:function(t,i){var a=this._aspectSiteAPI.getSiteData();a&&a.isViewerMode()&&function(t,i,a){var r="error",o={url:n(t.getExternalBaseUrl(),a.urlParams),destination:["dynamicClientSpecMapLoaded"],force:!0,cache:s,syncCache:!0,transformFunc:function(){return!0},callback:function(n,s){r="success",e.invokeMap(this.reloadSpecMapPlugin,"callback"),s.visitorId&&this._aspectSiteAPI.setBiVisitorId(s.visitorId),s.clientSpecMap&&(this.aspectState.delete("appInstanceMap"),this._aspectSiteAPI.setClientSpecMap(s.clientSpecMap)),s.svSession&&(t.pubSvSession(s.svSession),this._aspectSiteAPI._site.notifyAspects(this._aspectSiteAPI._site.supportedEvents.svSessionChange,s.svSession)),s.hs&&t.setHubSecurityToken(s.hs),s.ctToken&&t.setCTToken(s.ctToken),i&&i(s)}.bind(this)};t.store.loadBatch([o],function(){"error"===r&&i({status:r})}),s=!1}.call(this,a,t,e.isObject(i)?i:{})}},{key:"getNewAppInstance",value:function(t,s){(function(t,s){var a=this;i.ajaxLibrary.ajax({type:"GET",url:n(this._aspectSiteAPI.getSiteData().getExternalBaseUrl(),{}),dataType:"json",contentType:"application/json",success:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.get(i.clientSpecMap,[t,"instance"]);a.updateAppInstance(t,n),a._aspectSiteAPI.triggerClientSpecMapUpdatedCallbacks(),s(n)},error:function(){s()}})}).call(this,t,s)}},{key:"updateAppInstance",value:function(t,i){var n=this.aspectState.read("appInstanceMap")||{};n[t]=i,this.aspectState.update({appInstanceMap:n}),function(t,i){e.forEach(this.instanceChangedRegisteredComps[t],function(e){e.sendPostMessage({intent:"addEventListener",eventType:"INSTANCE_CHANGED",params:{instance:i}})})}.call(this,t,i)}},{key:"getAppInstance",value:function(t){var i=this.aspectState.read("appInstanceMap");return e.get(i,[t])}},{key:"registerToInstanceChanged",value:function(t){var i=t.props.compData.applicationId;e.set(this.instanceChangedRegisteredComps,[i,t.props.id],t)}},{key:"unRegisterToInstanceChanged",value:function(e){var t=e.props.compData.applicationId;this.instanceChangedRegisteredComps[t]&&delete this.instanceChangedRegisteredComps[t][e.props.id]}},{key:"registerReloadSpecMapPlugin",value:function(e,t){var i=this;this.reloadSpecMapPlugin.push({compPageId:e,callback:function(){i._aspectSiteAPI.getSiteData().getCurrentUrlPageId()===e&&t()}})}}]),t}();t.registerSiteAspect("dynamicClientSpecMap",r)}.apply(t,n))||(e.exports=s)},906:function(e,t,i){var n,s;n=[i(25),i(0),i(4),i(1)],void 0===(s=function(e,t,i,n){"use strict";var s="VerticalAnchorsMenuAspect";function a(e){t.forEach(e,function(e){e()})}function r(e,i){return e?{top:e.absoluteTop[i],left:t.get(e,"custom["+i+"].backgroundLeft",0)+e.absoluteLeft[i],height:e.height[i],width:t.get(e,"custom["+i+"].backgroundWidth",e.width[i])}:{}}function o(e,t){i.imageUtils.getImageMeanBrightness(t.thumbnailImageUrl,{width:1,height:1},function(i,n){e.updateInformation(t.compId,t.rootId,{brightness:i,alpha:n})},function(){return null})}function c(e){this.activeAnchorObservers.length>0&&this.aspectSiteAPI.updateAspectGlobalData(s,{anchorsData:n.scrollAnchors.getAnchorsDataSortedByY(this.aspectSiteAPI.getSiteData(),e)})}var u=function(e){this.aspectSiteAPI=e,this.autoColorObservers=[],this.activeAnchorObservers=[],this.imagesToCheckColorOf={},t.bindAll(this,t.functionsIn(this)),e.registerToDidLayout(function(){var e=this.aspectSiteAPI.getAspectGlobalData(s)||{},i=this.aspectSiteAPI.getSiteData().measureMap;!e.anchorsData&&this.activeAnchorObservers.length>0&&(c.call(this,0),e=this.aspectSiteAPI.getAspectGlobalData(s)||{});var n=e;n.colorInfo=t.mapValues(e.colorInfo,function(e){return t.mapValues(e,function(e,n){return t.assign(e,{layout:r(i,n)})})}),this.aspectSiteAPI.setAspectGlobalData(s,n),a(this.autoColorObservers)}.bind(this)),e.registerToScroll(function(e){c.call(this,e.y),a(this.autoColorObservers)}.bind(this)),e.registerToRenderedRootsChange(function(e,i){var n=this.aspectSiteAPI.getAspectGlobalData(s)||{},a=n;a.colorInfo=t.omit(n.colorInfo,i),this.aspectSiteAPI.setAspectGlobalData(s,a)}.bind(this))};return u.prototype={updateInformation:function(e,i,n){var o=this.aspectSiteAPI.getSiteData().measureMap;o&&t.assign(n,{layout:r(o,e)});var c=this.aspectSiteAPI.getAspectGlobalData(s)||{};t.set(c,["colorInfo",i,e],n),this.aspectSiteAPI.setAspectGlobalData(s,c),a(this.autoColorObservers)},updateImageInfo:function(e,i,n){var s={thumbnailImageUrl:n,compId:e,rootId:i};if(this.autoColorObservers.length)o(this,s);else{var a=i.toString()+"-"+e.toString();this.imagesToCheckColorOf[a]?t.assign(this.imagesToCheckColorOf[a],s):this.imagesToCheckColorOf[a]=s}},registerToMeanColor:function(e){this.autoColorObservers.push(e),function(e){var i=o.bind(null,e);t.forOwn(e.imagesToCheckColorOf,i),e.imagesToCheckColorOf=[]}(this)},unregisterToMeanColor:function(e){t.pull(this.autoColorObservers,e)},registerToActiveAnchor:function(e){this.activeAnchorObservers.push(e)},unregisterToActiveAnchor:function(e){t.pull(this.activeAnchorObservers,e)}},e.registerSiteAspect("VerticalAnchorsMenuAspect",u),u}.apply(t,n))||(e.exports=s)},907:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(e){var t=this;this._aspectSiteAPI=e,this._aspectSiteAPI.registerToSiteReady(function(){return t._aspectSiteAPI.registerToVisibilityChange(t.propagateEvent.bind(t))}),this.registeredCallbacks={}}return i.prototype={propagateEvent:function(){var t=this.get();e.forEach(this.registeredCallbacks,function(e){e(t)})},register:function(e,t,i){this.registeredCallbacks[e]=t,i&&t(this.get())},unregister:function(t){this.registeredCallbacks=e.omit(this.registeredCallbacks,t)},get:function(){return this._aspectSiteAPI.getVisibilityState()}},t.registerSiteAspect("siteVisibilityChange",i),i}.apply(t,n))||(e.exports=s)},908:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";var i=["in","out","while_in"];function n(t,i,n,s,a){if(!e.isUndefined(t)&&!e.isUndefined(i)){var r=t+i,o=s+n,c=r<s,u=r>o,p=t<s,l=t>o,d=!(p||l),g=!(c||u),h=p&&u,f=d||g||h,m=g&&!d,v=d&&!g,y=g&&d,S=0;return h?S=n:m?S=r-s:v?S=o-t:y&&(S=i),{in:f,inPartialAbove:m,inPartialBelow:v,inCover:h,inContained:y,out:!f,outAbove:c,outBelow:l,percentVisible:S/i,percentOfViewport:S/n,isFixed:!!a}}}function s(t,i){return{windowHeight:t.getScreenHeight(),compAbsTop:e.get(t,["measureMap","absoluteTop",i]),compHeight:e.get(t,["measureMap","height",i]),isFixed:e.get(t,["measureMap","shownInFixed",i])}}function a(e){return e.isPopupOpened()?e.getCurrentPopupScroll():e.getAspectGlobalData("windowScrollEvent")||{x:0,y:0}}function r(t,i){var r=a(t),o=t.getSiteData();e.forEach(i,function(t,i){var a=s(o,i),c=n(a.compAbsTop,a.compHeight,a.windowHeight,r.y,a.isFixed);if(c){var u=function(e,t){return{in:e.in&&t.out,out:e.out&&t.in,while_in:e.in&&t.in}}(c,t.previousState),p=e.some(t.eventTypes,function(e){return u[e]});t.previousState=c,p&&t.callback(c)}})}function o(t){this._aspectSiteAPI=t,this.registeredListeners={};var i=e.partial(r,t,this.registeredListeners);t.registerToSiteReady(function(){t.registerToScroll(i),t.registerToResize(i),t.registerToOrientationChange(i),t.registerToDidLayout(i),i()})}return o.prototype={eventTypes:i,register:function(e,t,n){this.registeredListeners[e]={callback:t,eventTypes:n||i,previousState:{out:!0,in:!1}}},unregister:function(e){delete this.registeredListeners[e]},get:function(e){var t=a(this._aspectSiteAPI),i=s(this._aspectSiteAPI.getSiteData(),e);return n(i.compAbsTop,i.compHeight,i.windowHeight,t.y,i.isFixed)}},t.registerSiteAspect("viewportChange",o),o}.apply(t,n))||(e.exports=s)},909:function(e,t,i){var n,s;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(25),i(910),i(911)],void 0===(s=function(e,t,i,n){"use strict";var s="mediaAspect";function r(e){var t=this;"undefined"==typeof window||window.Hls||requirejs(["hls-light"],function(){return t.updateQualityState("adaptiveVideo",{hlsLoaded:!0})}),this.aspectSiteAPI=e,this.siteData=e.getSiteData(),this.isEnabled=!0,this.playerStateChangeListeners={};var n={videoQualityCheckInterval:5e3,headRequestStaticUrl:this.siteData.getStaticVideoHeadRequestUrl()};this.fileAvailabilityUtil=new i(n),this.aspectSiteAPI.setAspectGlobalData(s,{})}return r.prototype={getData:function(e){return this.aspectSiteAPI.getAspectComponentData(s,e)||{}},getQualityData:function(t){return e.get(this.aspectSiteAPI.getAspectGlobalData(s),t)},updatePlayerState:function(e,t){this.aspectSiteAPI.updateAspectComponentData(s,e,t),this.notifyStateChange(e)},updateQualityState:function(t,i){var n=e.assign({},this.getQualityData(t),i);this.aspectSiteAPI.updateAspectGlobalData(s,a({},t,n))},removePlayerState:function(t){e.isEmpty(this.getData(t))||(this.aspectSiteAPI.setAspectComponentData(s,t,{}),this.notifyStateChange(t))},registerPlayer:function(t,i){i=i||{};var n=e.get(i,"mediaData"),s=e.get(n,"videoId");this.updatePlayerState(t,{playerType:i.playerType||"none",videoId:s,duration:e.get(n,"duration",0)}),this.registerPlayerServices(t,i.mediaData,i.services)},unregisterPlayer:function(e){this.removePlayerState(e),this.unregisterPlayerServices(e)},registerPlayerServices:function(t,i,n){(n=n||{}).viewport&&this.aspectSiteAPI.getSiteAspect("viewportChange").register(t,n.viewport.callback,n.viewport.eventTypes),n.visibility&&this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").register(t,n.visibility.callback),n.fileAvailability&&e.forEach(n.fileAvailability.videoParts,function(e){this.fileAvailabilityUtil.register(t,i,e.quality,e.name,n.fileAvailability.callback)}.bind(this))},unregisterPlayerServices:function(e){this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").unregister(e),this.aspectSiteAPI.getSiteAspect("viewportChange").unregister(e),this.fileAvailabilityUtil.unregister(e)},registerStateChange:function(t,i,n){e.set(this.playerStateChangeListeners,[i,t],n);var s=this.getData(i);e.isEmpty(s)||n(s)},unregisterStateChange:function(t,i){this.playerStateChangeListeners[i]=e.omit(this.playerStateChangeListeners[i],t),e.isEmpty(this.playerStateChangeListeners[i])&&(this.playerStateChangeListeners=e.omit(this.playerStateChangeListeners,i))},notifyStateChange:function(t){e.forEach(this.playerStateChangeListeners[t],e.bind(function(e){e(this.getData(t))},this))},updateControlsData:function(t,i,n){var a=e.get(i,["background","mediaRef"]),r=e.get(a,"qualities"),o=e.find(r,{quality:"storyboard"}),c={disableAudio:e.get(n,"disableAudio",!1),hasAudio:e.get(a,"hasAudio",!0),canPause:"toggle"===e.get(n,["playerInteraction","click"])};o&&e.assign(c,{storyboardUrl:e.get(o,"url"),videoAspectRatio:o&&o.width/o.height}),this.aspectSiteAPI.updateAspectComponentData(s,t,{controlsData:c})},shouldPlay:function(e){var t=this.aspectSiteAPI.getSiteAspect("viewportChange").get(e);return!(!t||!t.in)&&!this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").get().hidden},initFeatureDetections:function(){this.siteData.isViewerMode()&&(this.siteData.isInSSR()||e.get(this.aspectSiteAPI.getAspectGlobalData(s),"featureDetections"))||this.aspectSiteAPI.updateAspectGlobalData(s,a({},"featureDetections",n()))}},t.registerSiteAspect(s,r),r}.apply(t,n))||(e.exports=s)},910:function(e,t,i){var n,s;n=[i(0),i(1)],void 0===(s=function(e,t){"use strict";var i="mp4",n=6e4,s=t.mediaConsts;function a(t,i){return e.includes(i.readyQualities,i.qualities[t].quality)}function r(e){this.config=e,this.videoAvailabilityCollection={},this.componentsCallbackCollection={}}return r.prototype={register:function(t,i,n,s,a){var r=function(t,i){var n=void 0;switch(i){case"video":n=e.reject(t.qualities,{quality:"storyboard"});break;case"storyboard":n=e.filter(t.qualities,{quality:"storyboard"})}return n}(i,s);if(!e.isEmpty(r)){this.componentsCallbackCollection[s+t]={type:s,playerId:t,videoId:i.videoId,onSuccessCallback:a,targetQuality:n};var o=this.videoAvailabilityCollection[s+i.videoId];if(o)e.isEmpty(o.readyQualities)||this.notifySingleReadyState(this.componentsCallbackCollection[s+t],o,o.key);else{o={type:s,videoId:i.videoId,key:s+i.videoId,readyQualities:[],testingQuality:n,qualities:r,timeStamp:(new Date).getTime(),duration:1e3*i.duration,timerInterval:0},this.videoAvailabilityCollection[o.key]=o;var c=e.find(o.qualities,{quality:o.testingQuality});this.loadDummyVideo(o.key,o.videoId,c)}}},unregister:function(t){this.componentsCallbackCollection=e.omit(this.componentsCallbackCollection,t)},loadDummyVideo:function(e,n,s){t.ajaxLibrary.ajax({url:function(e,n,s){return n.url?t.urlUtils.joinURL(s,n.url):t.urlUtils.joinURL(s,e,n.quality,i,"file."+i)}(n,s,this.config.headRequestStaticUrl),type:"HEAD",success:function(){this.canPlay(e)}.bind(this),error:function(){this.onError(e)}.bind(this)})},onError:function(e){var t=this.videoAvailabilityCollection[e];if(t){var i=this.getNextIndexToCheck(t);"undefined"!=typeof window&&i>=0&&!a(i,t)?(t.testingQuality=t.qualities[i].quality,setTimeout(function(){this.loadDummyVideo(e,t.videoId,t.qualities[i])}.bind(this),100)):this.resetQualityTest(t),this.notifyReadyState(t.key)}},getNextIndexToCheck:function(t){return e.findIndex(t.qualities,{quality:t.testingQuality})-1},canPlay:function(t){var i=this.videoAvailabilityCollection[t];if(i){if(e.includes(i.readyQualities,i.testingQuality)||i.readyQualities.push(i.testingQuality),!this.isAllQualitiesAvailable(i)){var n=this.getNextIndexToCheck(i);"undefined"!=typeof window&&n>=0&&!a(n,i)?(i.testingQuality=i.qualities[n].quality,setTimeout(function(){this.loadDummyVideo(t,i.videoId,i.qualities[n])}.bind(this),100)):this.resetQualityTest(i)}this.notifyReadyState(t)}},resetQualityTest:function(t){if(t){t.testingQuality=e.last(t.qualities).quality;var i=function(t,i){var s=e.now()-t.timeStamp;if(s>n&&s>5*t.duration)return 0;var a=s>t.duration&&s<=2*t.duration?4:8;return Math.max(i,t.duration/a)}(t,this.config.videoQualityCheckInterval);"undefined"!=typeof window&&i>0&&(clearTimeout(t.timerInterval),t.timerInterval=setTimeout(function(){var i=e.find(t.qualities,{quality:t.testingQuality});this.loadDummyVideo(t.key,t.videoId,i)}.bind(this),i))}},notifyReadyState:function(t){var i=this.videoAvailabilityCollection[t];i&&e.forEach(e.filter(this.componentsCallbackCollection,{videoId:i.videoId}),e.bind(function(e){this.notifySingleReadyState(e)},this))},notifySingleReadyState:function(t){var i=t.type+t.videoId,n=this.videoAvailabilityCollection[i];t.onSuccessCallback({videoId:n.videoId,readyQualities:n.readyQualities,availabilityState:function(t,i){return e.isEmpty(t)?s.availabilityReadyStates.IN_PROCESS:e.includes(t,i)?s.availabilityReadyStates.IDLE:s.availabilityReadyStates.PLAYING_PREVIEW}(n.readyQualities,t.targetQuality),type:n.type}),this.isAllQualitiesAvailable(n)&&this.unregister(t.type+t.playerId)},isAllQualitiesAvailable:function(e){return e.readyQualities.length===e.qualities.length}},r}.apply(t,n))||(e.exports=s)},911:function(e,t,i){var n;void 0===(n=function(){"use strict";return function(){return{playsInline:!/(iPhone|iPod)/g.test(navigator.userAgent)||"playsInline"in window.document.createElement("video")}}}.apply(t,[]))||(e.exports=n)},912:function(e,t,i){var n,s;n=[i(0),i(25),i(1)],void 0===(s=function(e,t,i){"use strict";var n=i.stringUtils,s={},a=["touchstart","touchmove","touchend","touchcancel"];function r(t){a.forEach(function(e){s[e]={}},this),t.getSiteData().isInSSR()||(this.siteAspectAPI=t,function(){a.forEach(function(t){this.siteAspectAPI.registerToWindowTouchEvent(t,function(t){var i=t.type.slice("touch".length),a="WindowTouch"+n.capitalize(i),r=s[t.type],o="on"+a,c=void 0;e.forEach(r,function(e){(c=this.siteAspectAPI.getComponentById(e))?c[o]&&c[o](t):delete r[e]}.bind(this))}.bind(this))}.bind(this))}.call(this))}r.prototype={registerToWindowTouchEvent:function(e,t){s[e.toLowerCase()][t.props.id]=t.props.id},unregisterFromWindowTouchEvent:function(e,t){delete s[e.toLowerCase()][t.props.id]}},t.registerSiteAspect("windowTouchEvents",r)}.apply(t,n))||(e.exports=s)},913:function(e,t,i){var n,s;n=[i(0),i(1),i(25)],void 0===(s=function(e,t,i){"use strict";function n(e){this._aspectSiteAPI=e,this._registeredCompCallbacks={},e.registerToScroll(this.onScroll.bind(this)),e.registerToRenderedRootsChange(this.onRenderedRootsChange.bind(this))}function s(t){var i=this._aspectSiteAPI.getAspectGlobalData("anchorChangeEvent"),n=e.get(i,"activeAnchorComp.id"),s=e.get(t,"activeAnchorComp.id");s&&s!==n&&(this._aspectSiteAPI.updateAspectGlobalData("anchorChangeEvent",t),this.propagateAnchorChangeEvent(t))}function a(i,n,a){var r=n?function(i,n,s){s=s||i.getPrimaryPageId();var a=t.scrollAnchors.getPageAnchors(i,s),r=t.scrollAnchors.getSortedAnchorsByY(i,a);return e.find(r,{id:n.replace("#","")})}(i,n,a):n;if(r){var o={activeAnchorComp:r};s.call(this,o)}}function r(i){var n=this._aspectSiteAPI.getSiteData(),a=n.isPopupOpened();if(i&&!a&&!e.isUndefined(i.y)){var r=t.scrollAnchors.getActiveAnchor(n,i.y);s.call(this,r)}}return n.prototype={registerToAnchorChange:function(e){e.onAnchorChange&&(this._registeredCompCallbacks[e.props.id]=e.onAnchorChange)},unregisterToAnchorChange:function(e){delete this._registeredCompCallbacks[e.props.id]},onScroll:function(t){e.isEmpty(this._registeredCompCallbacks)||r.call(this,t)},onRenderedRootsChange:function(i){if(e.isEmpty(i)){var n=this._aspectSiteAPI.getSiteAspect("windowScrollEvent").getScrollPosition();r.call(this,n)}else{var a=this._aspectSiteAPI.getSiteData().getPrimaryPageId(),o={activeAnchorComp:t.scrollAnchors.getPageTopAnchor(a)};s.call(this,o)}},setSelectedAnchorAsync:function(e,t,i,n){t&&(t=t.replace("#",""),setTimeout(a.bind(this,e,t,i),n))},propagateAnchorChangeEvent:function(t){e.forEach(this._registeredCompCallbacks,function(e){e(t)})}},i.registerSiteAspect("anchorChangeEvent",n),n}.apply(t,n))||(e.exports=s)},914:function(e,t,i){var n,s;n=[i(25),i(0),i(11)],void 0===(s=function(e,t,i){"use strict";function n(e){this._siteAPI=e.getSiteAPI();var t=this._siteAPI.getSiteData();this.fixOverflowScrollEdges=t.browserFlags().fixOverflowScrollEdges,this._blockersList=[],this._scrollCorrection=void 0,this.blockListeners=[]}function s(e){(function(){this._scrollCorrection=window.scrollY}).call(this),i("html").css({marginTop:-Math.max(.5,window.scrollY)+"px"}).addClass("blockSiteScrolling"),this.blockListeners.forEach(function(t){t.handleBlockedBy(e)})}function a(e){i("html").removeClass("blockSiteScrolling").css({marginTop:""}),function(){window.scrollTo(0,this._scrollCorrection)}.call(this),this.blockListeners.forEach(function(t){t.handleUnblockedBy(e)})}n.prototype={setSiteScrollingBlocked:function(e,i){var n=t.head(this._blockersList);this._blockersList=i?t(this._blockersList).concat(e).uniq().value():t.without(this._blockersList,e);var r=t.head(this._blockersList);n!==r&&(r?s:a).call(this,e)},setSiteScrollingBlockedForModal:function(e,t,n){if(!n)return this.setSiteScrollingBlocked(e,t);var s=i("#SITE_CONTAINER");return t||"hidden"!==s.css("overflow")?void 0:s.css({height:"auto",overflow:"auto"})},isSiteScrollingBlocked:function(){return!!t.size(this._blockersList)},registerScrollingLayer:function(e){this.fixOverflowScrollEdges&&e.addEventListener("scroll",function(){e.scrollTop=t.clamp(e.scrollTop,1,e.scrollHeight-e.clientHeight-1)})},registerScrollBlockedListener:function(e){this.blockListeners.push(e)},onHeightChanged:function(e,t){if(e)return this._siteAPI.exitFullScreenMode(),i("#SITE_CONTAINER").css({height:t,overflow:"hidden"})},getDeviceSpecificProperties:function(e,t,i){return e&&t&&i>0?{"":{style:{position:"absolute",height:i}},dialog:{style:{position:"absolute"}},iframe:{style:{height:i}}}:{}}},e.registerSiteAspect("siteScrollingBlocker",n)}.apply(t,n))||(e.exports=s)},915:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._isOverride=!1}function n(e){"undefined"!=typeof window&&(e.preventDefault(),window.scrollBy(0,-e.wheelDelta/2))}i.prototype={overrideMouseWheel:function(){var e=window.document.body;if(!this._isOverride){if(void 0!==e.onwheel)e.addEventListener("wheel",n);else{if(void 0===e.onmousewheel)return;e.addEventListener("mousewheel",n)}this._isOverride=!0}},releaseMouseWheel:function(){var e=window.document.body;e.removeEventListener("wheel",n),e.removeEventListener("mousewheel",n),this._isOverride=!1},isOverride:function(){return this._isOverride}},t.registerSiteAspect("mouseWheelOverride",i)}.apply(t,n))||(e.exports=s)},916:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSvSessionChange(this.notifySessionChanged.bind(this))}i.prototype={registerToSessionChanged:function(e){this._registeredComps[e.props.id]=e},unRegisterToSessionChanged:function(e){delete this._registeredComps[e.props.id]},notifySessionChanged:function(t){e.forEach(this._registeredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SESSION_CHANGED",params:{userSession:t}})})}},t.registerSiteAspect("svSessionChangeEvent",i)}.apply(t,n))||(e.exports=s)},917:function(e,t,i){var n,s;n=[i(0),i(25),i(258)],void 0===(s=function(e,t,i){"use strict";var n=function(t){t.registerToMessage(this.handleMessage.bind(this)),this.siteAPI=t,this.callbacks={},this.components={},this.queue={},e.bindAll(this,["handleMessage","registerComponent","unRegisterComponent","postMessage"])};return n.prototype={handleMessage:function(t){e.forEach(this.components,function(n,s){if(t.source===n){var a=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(s);0===e.size(a)?this.queue[s]=t:(function(){e.size(this.queue)>0&&e.forEach(this.queue,function(t,n){var s=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(n);i.handleBehaviors(this.siteAPI,e.map(s,"behavior"),t,"widget"),delete this.queue[n]}.bind(this))}.call(this),i.handleBehaviors(this.siteAPI,e.map(a,"behavior"),t,"widget"))}}.bind(this))},registerComponent:function(e,t){this.components[e]=t},unRegisterComponent:function(e){delete this.components[e]},postMessage:function(e,t){var i=this.components[e];i&&i.postMessage(t,"*")}},t.registerSiteAspect("HtmlPostMessageAspect",n),n}.apply(t,n))||(e.exports=s)},918:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(e){this._aspectSiteAPI=e,this._registeredComps={},e.registerToSiteMetadataChange(this.notifySiteMetadataChanged.bind(this))}i.prototype={registerToSiteMetadataChange:function(e){this._registeredComps[e.props.id]=e},unRegisterToSiteMetadataChange:function(e){delete this._registeredComps[e.props.id]},notifySiteMetadataChanged:function(t){e.forEach(this._registeredComps,function(e){e.sendPostMessage({intent:"addEventListener",eventType:"SITE_METADATA_CHANGED",params:t})})}},t.registerSiteAspect("siteMetadataChangeAspect",i)}.apply(t,n))||(e.exports=s)},919:function(e,t,i){var n,s;n=[i(0),i(25)],void 0===(s=function(e,t){"use strict";function i(t){this._aspectSiteAPI=t,this._registeredCloseHandlers={},e.bindAll(this,["registerCloseHandler","unregisterCloseHandler","closePopupPage","openPopupPage"])}return i.prototype={registerCloseHandler:function(e,t){this._registeredCloseHandlers[e]=t},unregisterCloseHandler:function(t){this._registeredCloseHandlers=e.omit(this._registeredCloseHandlers,t)},closePopupPage:function(){var t=this._aspectSiteAPI.getCurrentPopupId();t&&(this._aspectSiteAPI.closePopupPage(),e.isFunction(this._registeredCloseHandlers[t])&&(this._registeredCloseHandlers[t].apply(this,arguments),this.unregisterCloseHandler(t)))},openPopupPage:function(e){this._aspectSiteAPI.openPopupPage(e)}},t.registerSiteAspect("PopupPageAspect",i),i}.apply(t,n))||(e.exports=s)},920:function(e,t,i){var n,s;n=[i(11),i(0),i(25),i(27)],void 0===(s=function(e,t,i,n){"use strict";var s="focus-ring";function a(t){e(t).addClass(s)}function r(e){e.registerToComponentDidMount(function(){this.disposeReaction=n.reaction(e.getSiteData().isVisualFocusEnabled,this.addOrRemoveListeners.bind(this),{fireImmediately:!0})}.bind(this)),e.registerToWillUnmount(function(){this.disposeReaction(),this.unregisterListeners()}.bind(this))}r.prototype={addOrRemoveListeners:function(e){e?this.registerListeners():this.unregisterListeners()},registerListeners:function(){this.unregisterListeners(),this.keyUpEventListener=this.onKeyUp.bind(this),this.elementBlurEventListener=this.onBlur.bind(this),this.windowFocusEventListener=this.onWindowFocus.bind(this),this.windowBlurEventListener=this.onWindowBlur.bind(this),window.document.addEventListener("keyup",this.keyUpEventListener,!0),window.document.addEventListener("blur",this.elementBlurEventListener,!0),window.addEventListener("focus",this.windowFocusEventListener,!0),window.addEventListener("blur",this.windowBlurEventListener,!0)},unregisterListeners:function(){window.document.removeEventListener("keyup",this.keyUpEventListener,!0),window.document.removeEventListener("blur",this.elementBlurEventListener,!0),window.removeEventListener("focus",this.windowFocusEventListener,!0),window.removeEventListener("blur",this.windowBlurEventListener,!0)},onWindowFocus:function(){window.document.activeElement===this.elementWithFocusRing&&a(this.elementWithFocusRing)},onWindowBlur:function(){e(window.document.activeElement).hasClass(s)&&(this.elementWithFocusRing=window.document.activeElement)},onKeyUp:function(e){e.altKey||e.ctrlKey||e.metaKey||t.includes([9,38,40],e.keyCode)&&a(e.target)},onBlur:function(t){!function(t){e(t).removeClass(s)}(t.target)}},i.registerSiteAspect("visualFocusAspect",r)}.apply(t,n))||(e.exports=s)},921:function(e,t,i){var n,s;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(25),i(1),i(139)],void 0===(s=function(e,t,i,n){"use strict";var s,r,o="head",c="bodyStart",u="bodyEnd",p={VALID:0,MISSING:1,CORRUPTED:2},l=[o,c,u];function d(e){switch(e){case o:return window.document.head;case c:case u:return window.document.body;default:return null}}var g=(a(s={},o,"head html embeds start"),a(s,c,"body start html embeds start"),a(s,u,"body end html embeds start"),s),h=(a(r={},o,"head html embeds end"),a(r,c,"body start html embeds end"),a(r,u,"body end html embeds end"),r);function f(t,i,n){var s=t.getCodeEmbeds();return e(s).filter({position:i}).filter(function(e){return"custom"===e.embedType||"verificationCode"===e.embedType}).filter(function(t){return!t.pages||e.some(t.pages,function(e){return e===n})||S(t)}).value()}function m(t,i,n,s,a){var r=n,o=d(i),c=0;e.forEach(f(t,i,t.getCurrentUrlPageId()),function(t){var i=window.document.createElement("div");if(s.length>0&&s[c]===t.id)r=a[c],c++;else{var n=window.document.createElement("div");for(n.innerHTML=t.content.html,function t(i,n){e.forEach(i.childNodes,function(i){var s=null;i.nodeType===window.Node.ELEMENT_NODE?(s=window.document.createElement(i.tagName),e.forEach(i.attributes,function(e){s.setAttribute(e.name,e.value)}),t(i,s)):i.nodeType===window.Node.TEXT_NODE?s=window.document.createTextNode(i.textContent):i.nodeType===window.Node.COMMENT_NODE&&(s=window.document.createComment(i.textContent)),s&&n.appendChild(s)})}(n,i);i.children.length;)o.insertBefore(i.children[0],r.nextSibling);r=r.nextSibling}})}function v(t){for(var i=g[t],n=h[t],s=d(t),a=null,r=null,o=0;o<s.childNodes.length;o++){var c=s.childNodes[o];if(c.nodeType===window.Node.COMMENT_NODE)if(c.textContent===i)a=o,r={location:t},e.set(r,["index","start"],a),e.set(r,["nodes","start"],c);else if(c.textContent===n){r=e.merge(r,{index:{end:o},nodes:{end:c}});break}}return r}function y(e,t){for(var i=0;i<t.length;++i)e.removeChild(t[i])}var S=function(e){return e.loadOnce&&!e.pages},A=function(e){return!S(e)};function P(e){var t=this;this._aspectSiteAPI=e,this._siteData=e.getSiteData(),this._aspectSiteAPI.registerToUrlPageChange(this.onUrlPageChanged.bind(this)),this._aspectSiteAPI.registerToSiteReady(this.onSiteReady.bind(this)),this._aspectSiteAPI.registerToComponentDidMount(function(){t.previousPageId=t._siteData.getCurrentUrlPageId()})}P.prototype.onSiteReady=function(){if(this._siteData.getCodeEmbeds()&&!e.isEmpty(this._siteData.getCodeEmbeds())){var t=e.map(l,function(t){return function(t){if(!t)return p.MISSING;var i=e.get(t,["index","start"]),n=e.get(t,["index","end"]),s=e.get(t,["nodes","start"])&&e.get(t,["nodes","end"]);return i&&n&&i<n&&s?p.VALID:p.CORRUPTED}(v(t))});e.includes(t,p.CORRUPTED)?(this._commentNodeStatus=p.CORRUPTED,i.logger.reportBI(this._siteData,n.INVALID_CODE_EMBED_SCRIPT,{})):e.includes(t,p.MISSING)?(this._commentNodeStatus=p.VALID,function(){var e=window.document.getElementById("SITE_CONTAINER");window.document.body.insertBefore(window.document.createComment(g[c]),e),window.document.body.insertBefore(window.document.createComment(h[c]),e),window.document.body.appendChild(window.document.createComment(g[u])),window.document.body.appendChild(window.document.createComment(h[u]))}(),function(t){var i=e.map([c,u],function(e){return v(e)});e.forEach(i,function(e){m(t,e.location,e.nodes.start,[],[])})}(this._siteData)):this._commentNodeStatus=p.VALID}},P.prototype.onUrlPageChanged=function(){var t=this;if(this._commentNodeStatus===p.VALID){var i=this.previousPageId;this.previousPageId=this._siteData.getCurrentUrlPageId();var n=e.map(l,function(e){return v(e)}),s={},a={},r={};e.forEach(n,function(n){var o=n.location,c=function(t,i,n){return e(t).slice(i+1,n).filter({nodeType:window.Node.ELEMENT_NODE}).value()}(d(o).childNodes,n.index.start,n.index.end),u=f(t._siteData,o,i);s[o]=[],a[o]=[],r[o]=[];for(var p=0;p<u.length;++p)A(u[p])?s[o].push(c[p]):(a[o].push(u[p].id),r[o].push(c[p]))});for(var o=0;o<l.length;++o){var c=l[o];y(d(c),s[c])}e.forEach(n,function(e){m(t._siteData,e.location,e.nodes.start,a[e.location],r[e.location])})}},t.registerSiteAspect("codeEmbedsAspect",P)}.apply(t,n))||(e.exports=s)},922:function(e,t,i){var n,s;n=[i(180),i(923)],void 0===(s=function(e,t){"use strict";e.registerHandler("site",t)}.apply(t,n))||(e.exports=s)},923:function(e,t,i){var n,s;n=[i(0),i(1),i(924)],void 0===(s=function(e,t,i){"use strict";function n(){return!0}function s(){return{default:function(e){t.log.error("Invalid behavior",e)},openPopup:function(){function e(e,t,i){var n=i.targetId;return!e.isZoomOpened()&&!function(e){return"editor"===e.getRenderFlag("componentViewMode")}(e)&&!function(e,t){return e.getRuntimeDal().hasBeenPopupOpened(t)}(e,n)&&!e.isPopupOpened()&&(t.isMobileView()?Boolean(i.params.openInMobile):Boolean(i.params.openInDesktop))}var t=void 0;return function(i,n){clearTimeout(t);var s=n.getSiteData();e(n,s,i)&&(t=setTimeout(function(t){s.getPrimaryPageId()!==t||e(n,s,i)&&n.getSiteAspect("PopupPageAspect").openPopupPage(i.targetId)},function(e){return 1e3*(e.params.delay||0)}(i),s.getPrimaryPageId()))}}(),prefetchPages:i.prefetchPages}}function a(){return{default:function(e){t.log.error("Invalid behavior",e)},openPopup:n,prefetchPages:i.isEnabled}}var r=void 0,o=void 0;return{handle:function(t,i){r=r||s(),e.forEach(t,function(e){(r[e.name]||r.default)(e,i)})},isEnabled:function(e,t){return((o=o||a())[e.name]||o.default)(t)}}}.apply(t,n))||(e.exports=s)},924:function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(e){"use strict";return{prefetchPages:function(t,i){var n=i.getSiteData().getPagesDataItems(),s=t.params.prefetchFilters,a=e(n).filter(function(t){return e.every(s,function(i,n){return e.includes(i,t[n])})}).map("id").value();if(!e.isEmpty(a)){var r=i.getSiteDataAPI(),o=0;e.forEach(a,function(e){var t={pageId:e};r.loadPage(t,function(){++o===a.length&&i.addPrefetchPages(a)})})}},isEnabled:function(){return!0}}}.apply(t,n))||(e.exports=s)},925:function(e,t,i){var n,s;n=[i(378),i(4)],void 0===(s=function(e,t){"use strict";e.hooks.registerHook(e.hooks.types.PAGE_LOADED_FIRST_RENDER,function(i,n,s){i.rendererModel.previewMode||e.isProtectedPage(i)||t.errorPages.isErrorPage(i.getPrimaryPageId())||s||n.preInitWidgets(i,i.currentUrl.full)}),e.hooks.registerHook(e.hooks.types.PAGE_LOADED,function(e,i){!function(e,i){if(i.pageId!==t.siteConstants.MASTER_PAGE_ID){var n=e.getSiteDataAPI(),s=e.getSiteData(),a=i.pageId;s.isPopupPage(a)&&(a=s.getPrimaryPageId()),n.updateActiveSOSPModes(a)}}(e,i);var n=e.getSiteData(),s=!i.routerDefinition,a=n.getFocusedRootId()===e.getCurrentPopupId(),r=a&&i.pageId===n.getPrimaryPageId(),o=n.getFocusedRootId()!==i.pageId;if(s&&o&&!r)e.getSiteAspect("WidgetAspect").initApps([i.pageId]);else if(i.routerDefinition){var c=!o,u=i.innerRoute!==n.getRootNavigationInfo().innerRoute;if(c&&u)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(o&&!a)return void e.getSiteAspect("WidgetAspect").initApps([i.pageId]);if(a){var p=i.pageId===n.getPrimaryPageId();(!p||p&&u)&&e.getSiteAspect("WidgetAspect").initApps([i.pageId])}}})}.apply(t,n))||(e.exports=s)},97:function(e,t){e.exports=S}})});
//# sourceMappingURL=core.min.js.map